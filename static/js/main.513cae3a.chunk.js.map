{"version":3,"sources":["assets/avatar-default.png","assets sync /^/.//.*$","assets/movies-banner.png","assets/movies-icon.jpg","assets/news-icon.png","assets/preview.jpg","firebase-config.js","components/LogIn.js","components/Header.js","functions/sorts.js","components/Sortbar.js","functions/formatNumber.js","functions/getElapsedTime.js","components/PostBox.js","components/Home.js","components/Search.js","components/Footer.js","functions/secondsToDate.js","components/SubSidebar.js","components/subredditContext.js","components/Subreddit.js","components/Submit.js","components/Reply.js","components/Comment.js","components/Comments.js","components/Post.js","components/App.js","index.js"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","LogIn","setLogInForm","setSignUpForm","logIn","nightMode","useState","email","username","password","confirmPassword","form","setForm","handleChange","event","target","name","value","setError","message","errorMsg","document","querySelector","submitBtn","createElement","classList","add","parentNode","insertBefore","innerHTML","className","onClick","action","type","placeholder","onChange","preventDefault","checkUsername","a","db","getFirestore","q","query","collection","where","getDocs","querySnapshot","empty","forEach","doc","data","auth","getAuth","signInWithEmailAndPassword","then","catch","error","console","log","createAccount","addDoc","upvoted","downvoted","createUserWithEmailAndPassword","Header","user","setNightMode","searchInput","setSearchInput","logInForm","signUpForm","dropdown","setDropdown","navigate","useNavigate","sampleAccount","sampleLogIn","to","xmlns","viewBox","fill","cx","cy","r","d","onKeyDown","keyCode","body","remove","signOut","getDocId","currentUser","docId","deleteDocFields","docRef","updateDoc","deleteField","deleteDocument","deleteDoc","deleteUser","sortByHot","array","sortByDateNew","date","Date","array1","array2","p","getTime","seconds","push","sortByTop","concat","slice","sort","b","upvotes","downvotes","Sortbar","posts","setPosts","comments","setComments","sortTypePosts","setSortTypePosts","sortTypeComments","setSortTypeComments","postsArray","resultA","sortByDateOld","comment","totalReplies","replies","length","loopReplies","branch","reply","sortByControversial","formatNumber","num","Math","abs","toFixed","getElapsedTime","startTime","elapsedTime","secondsPerYear","secondsPerMonth","secondsPerDay","now","years","floor","months","days","hours","minutes","PostBox","setUser","propSlug","post","setPost","activeFlairs","pickFlair","postPage","slug","useParams","setUpvoted","setDownvoted","deleted","setDeleted","useEffect","includes","vote","direction","postRef","userRef","upvotedClone","downvotedClone","index","indexOf","splice","newUpvotes","newDownvotes","temp","author","flairs","flair","i","title","text","subreddit","Home","getPosts","href","rel","Search","searchQuery","Footer","secondsToDate","year","getFullYear","month","getMonth","day","getDate","SubSidebar","colors","description","members","color","created","style","background","state","SubredditContext","React","createContext","Subreddit","banner","icon","setSubreddit","setActiveFlairs","require","default","LightBlue","DarkBlue","getSubreddit","getDoc","docSnap","exists","postsRef","querySnap","backgroundImage","backgroundColor","src","alt","postFlairs","f","hasActiveFlair","Provider","Submit","setTitle","setText","location","useLocation","submitPost","Reply","parent","setReply","submitReply","parentId","postId","querySelectorAll","replyInput","Comment","collapsed","setCollapsed","showCommentsReply","setShowCommentsReply","commentRef","c","avatarDefault","Comments","allComments","getComments","commentsRef","commentsArray","addReplies","allComment","Post","postSubreddit","useContext","getPost","App","firebaseAppConfig","getFirebaseConfig","initializeApp","onAuthStateChanged","userAuth","getUser","exact","path","element","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.513cae3a.chunk.js","sourcesContent":["export default \"data:image/png;base64,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\"","var map = {\n\t\"./avatar-default.png\": 33,\n\t\"./movies-banner.png\": 56,\n\t\"./movies-icon.jpg\": 57,\n\t\"./news-icon.png\": 58,\n\t\"./preview.jpg\": 59\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 36;","export default __webpack_public_path__ + \"static/media/movies-banner.df3d9cd1.png\";","export default __webpack_public_path__ + \"static/media/movies-icon.0c5d95c1.jpg\";","export default __webpack_public_path__ + \"static/media/news-icon.9ab6c1a5.png\";","export default __webpack_public_path__ + \"static/media/preview.9aee41a0.jpg\";","// Firebase Configuration\nconst firebaseConfig = {\n\tapiKey: \"AIzaSyDVf2ofyD_gruQEYKvwsTnjF5B55bqtswE\",\n\tauthDomain: \"fakeddit-c2fc2.firebaseapp.com\",\n\tprojectId: \"fakeddit-c2fc2\",\n\tstorageBucket: \"fakeddit-c2fc2.appspot.com\",\n\tmessagingSenderId: \"615056824169\",\n\tappId: \"1:615056824169:web:929502b979e546b2f80ff8\"\n};\n\nexport function getFirebaseConfig() {\n\tif (!firebaseConfig || !firebaseConfig.apiKey) {\n\t\tthrow new Error('No Firebase configuration object provided.');\n\t} else {\n\t\treturn firebaseConfig;\n\t}\n}","import React, { useState } from \"react\";\nimport { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword } from \"firebase/auth\";\nimport { getFirestore, collection, query, where, getDocs, addDoc } from \"firebase/firestore\";\nimport \"../styles/LogIn.css\";\n\nconst LogIn = ({setLogInForm, setSignUpForm, logIn, nightMode}) => {\n    const [form, setForm] = useState({\n        email: '',\n        username: '',\n        password: '',\n        confirmPassword: '',\n    });\n\n    const handleChange = event => {\n        setForm({\n            ...form,\n            [event.target.name]: event.target.value\n        });\n    };\n\n    const processLogIn = event => {\n        event.preventDefault();\n\n        // Check if username exists\n        const checkUsername = async () => {\n            const db = getFirestore();\n            const q = query(collection(db, \"users\"), where(\"username\", \"==\", form.username));\n            const querySnapshot = await getDocs(q);\n\n            if (!querySnapshot.empty) {\n                let email = '';\n                querySnapshot.forEach((doc) => {\n                    email = doc.data().email;\n                });\n\n                return email;\n            } else {\n                throw new Error('Invalid username');\n            }\n        };\n\n        // Log in\n        const logIn = async (email, password) => {\n            const auth = getAuth();\n            signInWithEmailAndPassword(auth, email, password)\n            .then(() => {\n                setLogInForm(false);\n            })\n            .catch(error => {\n                if (error.code === 'auth/wrong-password') {\n                    setError('Wrong password.');\n                }\n                console.log(error);\n            });\n        };\n\n        // Check if any field is empty\n        if (form.username === '' || form.password === '') {\n            setError('All fields required.');\n        } else {\n            checkUsername()\n            .then(email => {\n                logIn(email, form.password);\n            })\n            .catch((error) => {\n                setError(error.message);\n            });\n        }\n    };\n\n    const processSignUp = event => {\n        event.preventDefault();\n\n        // Check if username exists\n        const checkUsername = async () => {\n            const db = getFirestore();\n            const q = query(collection(db, \"users\"), where(\"username\", \"==\", form.username));\n            const querySnapshot = await getDocs(q);\n\n            if (!querySnapshot.empty) {\n                throw new Error('Username already exists.');\n            }\n        };\n\n        // Create Account\n        const createAccount = async () => {\n            const db = getFirestore();\n            await addDoc(collection(db, \"users\"), {\n                email: form.email,\n                username: form.username,\n                password: form.password,\n                upvoted: [],\n                downvoted: []\n            });\n        };\n\n        // Check if any field is empty and if passwords match\n        if (form.email === '' || form.username === '' || form.password === '' || form.confirmPassword === '') {\n            setError('All fields required.');\n        } else if (form.password !== form.confirmPassword) {\n            setError('Passwords do not match.');\n        } else {\n            checkUsername()\n            .then(() => {\n                // Create Auth Account\n                const auth = getAuth();\n                createUserWithEmailAndPassword(auth, form.email, form.password)\n                .then(createAccount)\n                .then(() => { setSignUpForm(false); })\n                .catch(error => {\n                    if (error.code === 'auth/weak-password') {\n                        setError('Password must have at least 6 characters.');\n                    } else if (error.code === 'auth/invalid-email') {\n                        setError('Invalid email.');\n                    } else if (error.code === 'auth/email-already-in-use') {\n                        setError('Email in use.');\n                    }\n                    console.log(error);\n                });\n            })\n            .catch(error => {\n                setError(error.message);\n                console.log(error);\n            });\n        }\n    };\n\n    const setError = message => {\n        let errorMsg = document.querySelector('.error-msg');\n        if (!errorMsg) {\n            const submitBtn = document.querySelector('.log-in-form-submit-btn');\n            errorMsg = document.createElement('div');\n            errorMsg.classList.add('error-msg');\n            submitBtn.parentNode.insertBefore(errorMsg, submitBtn);\n        }\n\n        errorMsg.innerHTML = message;\n    };\n\n    return (\n        <div className={!nightMode ? \"log-in\" : \"log-in log-in-dark\"}>\n            <div className=\"canvas log-in-canvas\" />\n            <div className=\"log-in-form-container\">\n                <div className=\"log-in-form-close\">\n                    <div className=\"log-in-form-close-btn\" onClick={() => {\n                        logIn ? setLogInForm(false) : setSignUpForm(false);\n                    }} />\n                </div>\n                {logIn ?\n                <form className=\"log-in-form\" action=\"\">\n                    <h1>Login</h1>\n                    <div>By continuing, you agree to our <span className=\"link\">User Agreement</span> and <span className=\"link\">Privacy Policy</span>.</div>\n                    <input type=\"text\" name=\"username\" value={form.username} placeholder=\"Username\" onChange={handleChange} />\n                    <input type=\"password\" name=\"password\" value={form.password} placeholder=\"Password\" onChange={handleChange} />\n                    <button type=\"submit\" className=\"log-in-form-submit-btn\" onClick={processLogIn}>Log In</button>\n                    <div className=\"log-in-form-bottom\">\n                        <div>Forgot your <span className=\"link\">username</span> or <span className=\"link\">password</span>?</div>\n                        <div>New to Fakeddit? <span className=\"link\" onClick={() => {\n                            setLogInForm(false);\n                            setSignUpForm(true);\n                        }}>SIGN UP</span></div>\n                    </div>\n                </form>\n                :\n                <form className=\"log-in-form\" action=\"\">\n                    <h1>Sign up</h1>\n                    <div>By continuing, you are setting up a Fakeddit account and agree to our <span className=\"link\">User Agreement</span> and <span className=\"link\">Privacy Policy</span>.</div>\n                    <input type=\"email\" name=\"email\" value={form.email} placeholder=\"Email\" onChange={handleChange} />\n                    <input type=\"text\" name=\"username\" value={form.username} placeholder=\"Username\" onChange={handleChange} />\n                    <input type=\"password\" name=\"password\" value={form.password} placeholder=\"Password\" onChange={handleChange} />\n                    <input type=\"password\" name=\"confirmPassword\" value={form.confirmPassword} placeholder=\"Confirm Password\" onChange={handleChange} />\n                    <button type=\"submit\" className=\"log-in-form-submit-btn\" onClick={processSignUp}>Continue</button>\n                    <div className=\"log-in-form-bottom\">\n                        <div>Already a Fakedditor? <span className=\"link\" onClick={() => {\n                            setLogInForm(true);\n                            setSignUpForm(false);\n                        }}>LOG IN</span></div>\n                    </div>\n                </form>\n                }\n            </div>\n        </div>\n    );\n};\n\nexport default LogIn;","import React, { useState } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { getAuth, signInWithEmailAndPassword, signOut, deleteUser } from \"firebase/auth\";\nimport { getFirestore, collection, query, where, getDocs, doc, deleteDoc, updateDoc, deleteField } from \"firebase/firestore\";\nimport LogIn from \"./LogIn\";\nimport '../styles/Header.css';\n\nconst Header = ({user, nightMode, setNightMode}) => {\n\tconst [searchInput, setSearchInput] = useState('');\n\tconst [logInForm, setLogInForm] = useState(false);\n\tconst [signUpForm, setSignUpForm] = useState(false);\n\tconst [dropdown, setDropdown] = useState(false);\n\tconst navigate = useNavigate();\n\tconst sampleAccount = {\n\t\tusername: 'johndoe',\n\t\temail: 'johndoe@johndoe.com',\n\t\tpassword: 'johndoe'\n\t};\n\n\tconst handleInput = event => {\n\t\tsetSearchInput(event.target.value);\n\t};\n\n\tconst submitSearch = event => {\n\t\tif (event.keyCode === 13) {\n\t\t\tnavigate(\"/search/\" + searchInput);\n\t\t}\n\t};\n\n\tconst sampleLogIn = async () => {\n\t\tconst auth = getAuth();\n\t\tsignInWithEmailAndPassword(auth, sampleAccount.email, sampleAccount.password);\n\t};\n\n\tconst logOut = () => {\n\t\tconst auth = getAuth();\n\t\tsignOut(auth).then(() => {\n\t\t\tsetDropdown(false);\n\t\t}).catch(error => {\n\t\t\tconsole.log(error);\n\t\t});\n\t};\n\n\tconst deleteAccount = () => {\n\t\tconst db = getFirestore();\n\t\tconst auth = getAuth();\n\n\t\t// Get Document id of user\n\t\tconst getDocId = async () => {\n\t\t\tconst q = query(collection(db, \"users\"), where(\"email\", \"==\", auth.currentUser.email));\n\t\t\tconst querySnapshot = await getDocs(q);\n\t\t\tlet docId = '';\n\t\t\tquerySnapshot.forEach(doc => {\n\t\t\t\tdocId = doc.id;\n\t\t\t});\n\n\t\t\treturn docId;\n\t\t}\n\n\t\t// Delete Fields from Document\n\t\tconst deleteDocFields = async (id) => {\n\t\t\tconst docRef = doc(db, \"users\", id);\n\t\t\tawait updateDoc(docRef, {\n\t\t\t\temail: deleteField(),\n\t\t\t\tusername: deleteField(),\n\t\t\t\tpassword: deleteField(),\n\t\t\t\tupvoted: deleteField(),\n\t\t\t\tdownvoted: deleteField()\n\t\t\t});\n\t\t};\n\n\t\t// Delete Document\n\t\tconst deleteDocument = async (id) => {\n\t\t\tconst docRef = doc(db, \"users\", id);\n\t\t\tawait deleteDoc(docRef);\n\t\t};\n\n\t\t// Delete Account\n\t\tgetDocId()\n\t\t.then(id => {\n\t\t\tdeleteDocFields(id)\n\t\t\t.then(() => { deleteDocument(id) })\n\t\t\t.then(() => { deleteUser(auth.currentUser) })\n\t\t\t.then(() => {\n\t\t\t\tsetDropdown(false);\n\t\t\t\tconsole.log('Successfully deleted account');\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tconsole.log(error);\n\t\t\t});\n\t\t});\n\t}\n\n\tconst toggleNightMode = () => {\n\t\tif (!nightMode) {\n\t\t\tdocument.body.classList.add('body-dark');\n\t\t\tsetNightMode(true);\n\t\t} else {\n\t\t\tdocument.body.classList.remove('body-dark');\n\t\t\tsetNightMode(false);\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className={!nightMode ? \"header\" : \"header header-dark\"}>\n\t\t\t{dropdown ?\n\t\t\t\t<div className=\"canvas\" onClick={() => {setDropdown(false)}} />\n\t\t\t: null}\n\t\t\t<div className=\"header-left\">\n\t\t\t\t<Link to=\"/\">\n\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" className=\"logo\">\n\t\t\t\t\t\t<g>\n\t\t\t\t\t\t\t<circle fill=\"#FF4500\" cx=\"10\" cy=\"10\" r=\"10\"></circle>\n\t\t\t\t\t\t\t<path fill=\"#FFFFFF\" d=\"M6.83 8.24h1.64V6.65A4.26 4.26 0 0 1 9 4.19 2.92 2.92 0 0 1 11.54 3a10.31 10.31 0 0 1 2.94.29l-.41 2.43a5.54 5.54 0 0 0-1.32-.2 1 1 0 0 0-1.21.87v1.85h2.62L14 10.61h-2.46v8.24H8.47v-8.24H6.83V8.24z\"></path>\n\t\t\t\t\t\t</g>\n\t\t\t\t\t</svg>\n\t\t\t\t</Link>\n\t\t\t\t<Link to=\"/\">\n\t\t\t\t\t<div className=\"header-title\">fakeddit</div>\n\t\t\t\t</Link>\n\t\t\t</div>\n\t\t\t<div className=\"header-center\">\n\t\t\t\t<div className=\"search-box\">\n\t\t\t\t\t<form>\n\t\t\t\t\t\t<input className=\"search-field\" type=\"search\" placeholder=\"Search Fakeddit\" onChange={handleInput} onKeyDown={submitSearch}></input>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"header-right\">\n\t\t\t\t{!user ?\n\t\t\t\t\t<div className=\"header-btns-container\">\n\t\t\t\t\t\t<button className=\"header-btn sample-btn\" onClick={sampleLogIn}>Use A Sample Account</button>\n\t\t\t\t\t\t<button className=\"header-btn login-btn\" onClick={() => {setLogInForm(true)}}>Log In</button>\n\t\t\t\t\t\t<button className=\"header-btn signup-btn\" onClick={() => {setSignUpForm(true)}}>Sign Up</button>\n\t\t\t\t\t</div>\n\t\t\t\t:\n\t\t\t\t\t<div className=\"header-username\">{user.username}</div>\n\t\t\t\t}\n\t\t\t\t<div className=\"user-btn\" onClick={() => {setDropdown(true)}}>\n\t\t\t\t\t<div className=\"user-dropdown-btn\"></div>\n\t\t\t\t\t{dropdown ?\n\t\t\t\t\t\t<div className=\"user-dropdown-menu\">\n\t\t\t\t\t\t\t<div className=\"dropdown-header\">VIEW OPTIONS</div>\n\t\t\t\t\t\t\t<div className=\"dropdown-item\" onClick={toggleNightMode}>\n\t\t\t\t\t\t\t\tNight Mode\n\t\t\t\t\t\t\t\t<button className=\"night-mode-btn\" type=\"button\">\n\t\t\t\t\t\t\t\t\t<div className=\"night-mode-btn-switch\" />\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"dropdown-header\">MORE STUFF</div>\n\t\t\t\t\t\t\t<div className=\"dropdown-item\">Coins</div>\n\t\t\t\t\t\t\t<div className=\"dropdown-item\">Premium</div>\n\t\t\t\t\t\t\t<div className=\"dropdown-item\">Powerups</div>\n\t\t\t\t\t\t\t<div className=\"dropdown-item\">Talk</div>\n\t\t\t\t\t\t\t<div className=\"dropdown-item\">Predictions</div>\n\t\t\t\t\t\t\t<div className=\"dropdown-item\">Help Center</div>\n\t\t\t\t\t\t\t{user ?\n\t\t\t\t\t\t\t\t<div className=\"dropdown-item\" onClick={logOut}>Log Out</div>\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<div className=\"dropdown-item\" onClick={() => {\n\t\t\t\t\t\t\t\t\tsetDropdown(false);\n\t\t\t\t\t\t\t\t\tsetLogInForm(true);\n\t\t\t\t\t\t\t\t}}>Log In / Sign Up</div>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t{user && user.username !== sampleAccount.username ?\n\t\t\t\t\t\t\t\t<div className=\"dropdown-item\" onClick={deleteAccount}>Delete Account</div>\n\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t: null}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{logInForm ?\n\t\t\t\t<LogIn setLogInForm={setLogInForm} setSignUpForm={setSignUpForm} logIn={true} nightMode={nightMode} />\n\t\t\t: null}\n\t\t\t{signUpForm ?\n\t\t\t\t<LogIn setLogInForm={setLogInForm} setSignUpForm={setSignUpForm} logIn={false} nightMode={nightMode} />\n\t\t\t: null}\n\t\t</div>\n\t);\n}\n\nexport default Header;","/* Sort by hot\nSort by date (desc), split between recent (last 24 hrs) and old,\nthen sort recent by top (desc) */\nconst sortByHot = array => {\n    sortByDateNew(array);\n\n    const date = new Date();\n    const array1 = [];\n    const array2 = [];\n    array.forEach(p => {\n        const deltaSeconds = (date.getTime() / 1000) - p.date.seconds;\n        const deltaHours = deltaSeconds / 60 / 60;\n        deltaHours <= 24 ? array1.push(p) : array2.push(p);\n    });\n\n    sortByTop(array1);\n    array = (array1.concat(array2)).slice();\n};\n\n// Sort by best (upvotes / downvotes) (desc)\nconst sortByBest = array => {\n    array.sort((a, b) => {\n        // Check for zero divisor\n        let resultA = (a.downvotes === 0) ? a.upvotes : a.upvotes / a.downvotes;\n        let resultB = (b.downvotes === 0) ? b.upvotes : b.upvotes / b.downvotes;\n\n        return resultB - resultA;\n    });\n};\n\n// Sort by top (votes) (desc)\nconst sortByTop = array => {\n    array.sort((a, b) => {\n        return (b.upvotes - b.downvotes) - (a.upvotes - a.downvotes);\n    });\n};\n\n// Sort by date (desc)\nconst sortByDateNew = array => {\n    array.sort((a, b) => {\n        return b.date - a.date;\n    });\n};\n\n// Sort by date (asc)\nconst sortByDateOld = array => {\n    array.sort((a, b) => {\n        return a.date - b.date;\n    });\n};\n\n// Sort by controversial (desc)\nconst sortByControversial = array => {\n    array.forEach(comment => {\n        let totalReplies = comment.replies.length;\n\n        if (comment.replies > 0) {\n            const loopReplies = branch => {\n                branch.forEach(reply => {\n                    totalReplies++;\n\n                    // If current comment has replies, recursively loop through each reply\n                    if (reply.replies.length > 0) {\n                        loopReplies(reply.replies);\n                    }\n                });\n            };\n\n            loopReplies(comment.replies);\n        }\n\n        // Temporarily add totalReplies property to comment\n        comment.totalReplies = totalReplies;\n    });\n\n    // Sort by totalReplies\n    array.sort((a, b) => {\n        return b.totalReplies - a.totalReplies;\n    });\n\n    // Delete totalReplies property from comments\n    array.forEach(comment => {\n        delete comment.totalReplies;\n    });\n};\n\nexport {\n    sortByHot,\n    sortByBest,\n    sortByTop,\n    sortByDateNew,\n    sortByDateOld,\n    sortByControversial\n};","import React, { useState } from \"react\";\nimport { sortByHot, sortByBest, sortByTop, sortByDateNew, sortByDateOld, sortByControversial } from \"../functions/sorts\";\nimport \"../styles/Sortbar.css\";\n\nconst Sortbar = ({posts, setPosts, comments, setComments, nightMode}) => {\n    const [sortTypePosts, setSortTypePosts] = useState('hot');\n    const [sortTypeComments, setSortTypeComments] = useState('best');\n    const [dropdown, setDropdown] = useState(false);\n\n    const sort = (type) => {\n        let postsArray;\n        postsArray = posts ? posts.slice() : comments.slice();\n\n        if (type === 'hot') {\n            sortByHot(postsArray);\n            posts ? setSortTypePosts('hot') : setSortTypeComments('hot');\n        } else if (type === 'best'){\n            sortByBest(postsArray);\n            posts ? setSortTypePosts('best') : setSortTypeComments('best');\n        } else if (type === 'top') {\n            sortByTop(postsArray);\n            posts ? setSortTypePosts('top') : setSortTypeComments('top');\n        } else if (type === 'new') {\n            sortByDateNew(postsArray);\n            posts ? setSortTypePosts('new') : setSortTypeComments('new');\n        } else if (type === 'old') {\n            sortByDateOld(postsArray);\n            posts ? setSortTypePosts('old') : setSortTypeComments('old');\n        } else if (type === 'controversial') {\n            if (comments) {\n                sortByControversial(postsArray);\n                posts ? setSortTypePosts('controversial') : setSortTypeComments('controversial');\n            }\n        }\n\n        posts ? setPosts(postsArray) : setComments(postsArray);\n    };\n\n    return (\n        <div className={!nightMode ? \"sortbar\" : \"sortbar sortbar-dark\"}>\n        { posts ?\n            <div className=\"sortbar-posts\">\n                <div className={`sortbar-btn ${sortTypePosts === 'hot' ? `sortbar-btn-active` : ''}`} onClick={() => {\n                    if (sortTypePosts !== 'hot') {\n                        sort('hot');\n                    }\n                }}>Hot</div>\n                <div className={`sortbar-btn ${sortTypePosts === 'best' ? `sortbar-btn-active` : ''}`} onClick={() => {\n                    if (sortTypePosts !== 'best') {\n                        sort('best');\n                    }\n                }}>Best</div>\n                <div className={`sortbar-btn ${sortTypePosts === 'top' ? `sortbar-btn-active` : ''}`} onClick={() => {\n                    if (sortTypePosts !== 'top') {\n                        sort('top');\n                    }\n                }}>Top</div>\n                <div className={`sortbar-btn ${sortTypePosts === 'new' ? `sortbar-btn-active` : ''}`} onClick={() => {\n                    if (sortTypePosts !== 'new') {\n                        sort('new');\n                    }\n                }}>New</div>\n                <div className={`sortbar-btn ${sortTypePosts === 'old' ? `sortbar-btn-active` : ''}`} onClick={() => {\n                    if (sortTypePosts !== 'old') {\n                        sort('old');\n                    }\n                }}>Old</div>\n            </div>\n        :\n            <div className=\"sortbar-comments\">\n                <div className=\"sortbar-comments-btn\" onClick={() => { dropdown ? setDropdown(false) : setDropdown(true) }}>\n                    {sortTypeComments === 'best' ? <div>Sort By: Best</div> : null}\n                    {sortTypeComments === 'hot' ? <div>Sort By: Hot</div> : null}\n                    {sortTypeComments === 'top' ? <div>Sort By: Top</div> : null}\n                    {sortTypeComments === 'new' ? <div>Sort By: New</div> : null}\n                    {sortTypeComments === 'old' ? <div>Sort By: Old</div> : null}\n                    {sortTypeComments === 'controversial' ? <div>Sort By: Controversial</div> : null}\n                    {dropdown ?\n                    <div className=\"sortbar-comments-dropdown\">\n                        <div className=\"sortbar-comments-dropdown-item\" onClick={() => {\n                            if (sortTypeComments !== 'best') {\n                                sort('best');\n                            }\n                        }}>Best</div>\n                        <div className=\"sortbar-comments-dropdown-item\" onClick={() => {\n                            if (sortTypeComments !== 'hot') {\n                                sort('hot');\n                            }\n                        }}>Hot</div>\n                        <div className=\"sortbar-comments-dropdown-item\" onClick={() => {\n                            if (sortTypeComments !== 'top') {\n                                sort('top');\n                            }\n                        }}>Top</div>\n                        <div className=\"sortbar-comments-dropdown-item\" onClick={() => {\n                            if (sortTypeComments !== 'new') {\n                                sort('new');\n                            }\n                        }}>New</div>\n                        <div className=\"sortbar-comments-dropdown-item\" onClick={() => {\n                            if (sortTypeComments !== 'old') {\n                                sort('old');\n                            }\n                        }}>Old</div>\n                        <div className=\"sortbar-comments-dropdown-item\" onClick={() => {\n                            if (sortTypeComments !== 'controversial') {\n                                sort('controversial');\n                            }\n                        }}>Controversial</div>\n                    </div>\n                    : null}\n                </div>\n            </div>\n        }\n        </div>\n    );\n}\n\nexport default Sortbar;","const formatNumber = num => {\n    if (Math.abs(num) >= 1000 && Math.abs(num) < 1000000) {\n        num = (num / 1000).toFixed(1) + 'k';\n    }\n    if (Math.abs(num) >= 1000000 && Math.abs(num) < 1000000000) {\n        num = (num / 1000000).toFixed(1) + 'm';\n    }\n    if (Math.abs(num) >= 1000000000) {\n        num = (num / 1000000000).toFixed(1) + 'b';\n    }\n\n    return num;\n};\n\nexport default formatNumber;","// Convert seconds to string showing amount of time passed since then\nconst getElapsedTime = startTime => {\n    let elapsedTime;\n    const secondsPerYear = 365 * 24 * 60 * 60; // 31536000 sec\n    const secondsPerMonth = 30 * 24 * 60 * 60; // 2592000 sec\n    const secondsPerDay = 24 * 60 * 60; // 86400 sec\n    const secondsPerHour = 60 * 60; // 3600 sec\n    const secondsPerMinute = 60; // 60 sec\n\n    // Get time difference between specified and current time (milliseconds)\n    const delta = Date.now() - (startTime * 1000);\n\n    // Convert seconds to years / months / days / hours / minutes\n    const seconds = delta / 1000;\n    const years = Math.floor(seconds / secondsPerYear);\n    const months = Math.floor((seconds - (years * secondsPerYear)) / secondsPerMonth);\n    const days = Math.floor((seconds - (years * secondsPerYear) - (months * secondsPerMonth)) / secondsPerDay);\n    const hours = Math.floor((seconds - (years * secondsPerYear) - (months * secondsPerMonth) - (days * secondsPerDay)) / secondsPerHour);\n    const minutes = Math.floor((seconds - (years * secondsPerYear) - (months * secondsPerMonth)\n        - (days * secondsPerDay) - (hours * secondsPerHour)) / secondsPerMinute);\n\n    // Set elapsed time output\n    if (years === 1) { elapsedTime = years + ' year'; }\n    else if (years > 1) { elapsedTime = years + ' years'; }\n    else if (months === 1) { elapsedTime = months + ' month'; }\n    else if (months > 1) { elapsedTime = months + ' months'; }\n    else if (days === 1) { elapsedTime = days + ' day'; }\n    else if (days > 1) { elapsedTime = days + ' days'; }\n    else if (hours === 1) { elapsedTime = hours + ' hour'; }\n    else if (hours > 1) { elapsedTime = hours + ' hours'; }\n    else if (minutes === 1) { elapsedTime = minutes + ' minute'; }\n    else if (minutes > 1) { elapsedTime = minutes + ' minutes'; }\n    else if (minutes === 0) { return 'Just now'; }\n\n    return elapsedTime + ' ago';\n};\n\nexport default getElapsedTime;","import React, { useState, useEffect } from \"react\";\nimport { useParams, Navigate, Link } from \"react-router-dom\";\nimport { getFirestore, doc, updateDoc, deleteField, deleteDoc } from \"firebase/firestore\";\nimport formatNumber from \"../functions/formatNumber\";\nimport getElapsedTime from \"../functions/getElapsedTime\";\nimport \"../styles/PostBox.css\";\n\nconst PostBox = ({user, setUser, propSlug, post, setPost, posts, setPosts, activeFlairs, pickFlair, postPage, nightMode}) => {\n    let { slug } = useParams(); // Get subreddit slug from url\n    if (propSlug) { slug = propSlug; } // If propSlug passed from Home component, set slug to propSlug\n    const [upvoted, setUpvoted] = useState(false);\n    const [downvoted, setDownvoted] = useState(false);\n    const [deleted, setDeleted] = useState(false);\n\n    // Set Upvoted & Downvoted on componentDidMount & componentDidUpdate\n    useEffect(() => {\n        if (user && user.upvoted.includes(post.id)) {\n            setUpvoted(true);\n        } else  {\n            setUpvoted(false);\n        }\n\n        if (user && user.downvoted.includes(post.id)) {\n            setDownvoted(true);\n        } else  {\n            setDownvoted(false);\n        }\n    }, [user, post.id]);\n\n    const vote = async (direction) => {\n        const db = getFirestore();\n        const postRef = doc(db, \"posts\", post.id);\n        const userRef = doc(db, \"users\", user.id);\n\n        // Clone user's upvoted/downvoted arrays\n        const upvotedClone = user.upvoted.slice();\n        const downvotedClone = user.downvoted.slice();\n\n        // If not already upvoted/downvoted, add post id to user's upvoted/downvoted array\n        if (direction === 'up' && !upvoted) {\n            upvotedClone.push(post.id);\n        } else if (direction === 'down' && !downvoted) {\n            downvotedClone.push(post.id);\n        }\n\n        // If already upvoted/downvoted, remove post id from user's upvoted/downvoted array\n        if (upvoted) {\n            const index = user.upvoted.indexOf(post.id);\n            upvotedClone.splice(index, 1);\n        } else if (downvoted) {\n            const index = user.downvoted.indexOf(post.id);\n            downvotedClone.splice(index, 1);\n        }\n\n        // Set user's upvoted/downvoted array\n        setUser({\n            ...user,\n            upvoted: upvotedClone,\n            downvoted: downvotedClone\n        });\n\n        // Get new upvotes/downvotes count\n        let newUpvotes = post.upvotes;\n        let newDownvotes = post.downvotes;\n        if (direction === 'up') {\n            upvoted ? newUpvotes-- : newUpvotes++;\n            if (downvoted) {\n                newDownvotes--;\n            }\n        } else {\n            downvoted ? newDownvotes-- : newDownvotes++;\n            if (upvoted) {\n                newUpvotes--;\n            }\n        }\n\n        // Update database\n        await updateDoc(postRef, {\n            upvotes: newUpvotes,\n            downvotes: newDownvotes\n        });\n        await updateDoc(userRef, {\n            upvoted: upvotedClone,\n            downvoted: downvotedClone\n        });\n\n        // Update posts state in Subreddit component\n        const temp = posts.slice();\n        // Find post in temp array, then update post upvotes\n        temp.forEach(p => {\n            if (p.id === post.id) {\n                p.upvotes = newUpvotes;\n                p.downvotes = newDownvotes;\n            }\n        });\n        setPosts(temp);\n\n        // Update post state in Post component\n        if (postPage) {\n            setPost({\n                ...post,\n                upvotes: newUpvotes,\n                downvotes: newDownvotes\n            });\n        }\n    };\n\n    const deletePost = () => {\n\t\tconst db = getFirestore();\n\n\t\t// Delete Fields from Document\n\t\tconst deleteDocFields = async (id) => {\n\t\t\tconst docRef = doc(db, \"posts\", id);\n\t\t\tawait updateDoc(docRef, {\n                author: deleteField(),\n                comments: deleteField(),\n\t\t\t\tdate: deleteField(),\n                downvotes: deleteField(),\n                subreddit: deleteField(),\n                text: deleteField(),\n                title: deleteField(),\n                upvotes: deleteField()\n\t\t\t});\n\t\t};\n\n\t\t// Delete Document\n\t\tconst deleteDocument = async (id) => {\n\t\t\tconst docRef = doc(db, \"posts\", id);\n\t\t\tawait deleteDoc(docRef);\n\t\t};\n\n\t\t// Delete Post\n        deleteDocFields(post.id)\n        .then(() => { deleteDocument(post.id); })\n        .then(() => { setDeleted(true); })\n        .catch(error => {\n            console.log(error);\n        });\n\t};\n\n    return (\n        <div className={!nightMode ? \"post-box-container\" : \"post-box-container-dark\"}>\n            { deleted ?\n\t\t\t\t<Navigate to={`/`} />\n            :\n            <div className=\"post-box\">\n                <div className=\"post-box-votes-container\">\n                    <div className={`post-box-upvote-btn ${user && upvoted ? `post-box-upvoted` : ''}`} onClick={\n                        user ? () => {\n                            vote('up');\n                        } : null\n                    } />\n                    <div className=\"post-box-votes\">{formatNumber(post.upvotes - post.downvotes)}</div>\n                    <div className={`post-box-downvote-btn ${user && downvoted ? `post-box-downvoted` : ''}`} onClick={\n                        user ? () => {\n                            vote('down');\n                        } : null\n                    } />\n                </div>\n                <div className=\"post-box-details\">\n                    <div className=\"post-box-meta\">\n                        {propSlug ?\n                            <Link to={`/r/${propSlug}`} className=\"post-box-subreddit\">r/{propSlug}</Link>\n                        : null}\n                        <span className=\"post-box-author\">Posted by&nbsp;\n                            <span className={user && post.author === user.username ? 'post-box-author-user' : ''}>u/{post.author}</span>\n                        </span>\n                        <span className=\"post-box-date\">{getElapsedTime(post.date.seconds)}</span>\n                    </div>\n                    <div className=\"post-box-title\">\n                        {activeFlairs ? post.flairs.map((flair, i) => {\n                            return (\n                                <div key={i} className={`post-box-flair ${activeFlairs.includes(flair) ? `post-box-flair-active` : null}`}\n                                    onClick={() => {pickFlair(flair)}}>\n                                    {postPage ?\n                                        <Link to={`/r/${slug}`}>{flair}</Link>\n                                    : flair}\n                                </div>\n                            );\n                        })\n                        : null}\n                        <h3>\n                            <Link to={`/r/${slug}/comments/${post.id}/${post.title}`}>{post.title}</Link>\n                        </h3>\n                    </div>\n                    <div className=\"post-box-text\">{post.text}</div>\n                    <div className=\"post-box-btns-container\">\n                        <Link to={`/r/${slug}/comments/${post.id}/${post.title}`} className=\"post-box-btn\">\n                            {post.comments} {post.comments === 1 ? 'comment' : 'comments'}</Link>\n                        {user && post.author === user.username ?\n                            <div className=\"post-box-btn\" onClick={deletePost}>Delete</div>\n                        : null}\n                    </div>\n                </div>\n            </div>\n            }\n        </div>\n    );\n};\n\nexport default PostBox;","import React, { useState, useEffect } from \"react\";\nimport { getFirestore, collection, getDocs } from \"firebase/firestore\";\nimport Sortbar from \"./Sortbar\";\nimport PostBox from \"./PostBox\";\nimport { sortByHot } from \"../functions/sorts\";\nimport \"../styles/Home.css\";\n\nconst Home = ({user, setUser, nightMode}) => {\n\tconst [posts, setPosts] = useState([]);\n\n\tuseEffect(() => {\n\t\tconst getPosts = async () => {\n\t\t\tconst db = getFirestore();\n\t\t\tconst querySnapshot = await getDocs(collection(db, \"posts\"));\n\t\t\tconst postsArray = [];\n\n\t\t\t// Add fetched posts to posts array\n\t\t\tquerySnapshot.forEach(post => {\n\t\t\t\t// Push post data along with post id to array\n\t\t\t\tpostsArray.push({\n\t\t\t\t\t...post.data(),\n\t\t\t\t\tid: post.id\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// Sort posts array by hot (desc)\n\t\t\tsortByHot(postsArray);\n\n\t\t\tsetPosts(postsArray.slice());\n\t\t};\n\n\t\tgetPosts();\n\t}, []);\n\n\treturn (\n\t\t<div className={!nightMode ? \"home\" : \"home home-dark\"}>\n\t\t\t<div className=\"home-header\">\n\t\t\t\tPopular posts\n\t\t\t</div>\n\t\t\t<div className=\"home-body\">\n\t\t\t\t<div className=\"home-posts-container\">\n\t\t\t\t\t<Sortbar posts={posts} setPosts={setPosts} nightMode={nightMode} />\n\t\t\t\t\t{posts.length !== 0 ?\n\t\t\t\t\t\tposts.map((post) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<PostBox key={post.id} user={user} propSlug={post.subreddit} setUser={setUser}\n\t\t\t\t\t\t\t\t\tpost={post} posts={posts} setPosts={setPosts} nightMode={nightMode} />\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})\n\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"home-sidebar\">\n\t\t\t\t\t<div className=\"home-sidebar-section\">\n\t\t\t\t\t\t<div className=\"home-sidebar-section-header\">About</div>\n\t\t\t\t\t\t<div className=\"home-sidebar-section-content\">\n\t\t\t\t\t\t\tFakeddit is a clone of a popular social media website.\n\t\t\t\t\t\t\t<br /><br />\n\t\t\t\t\t\t\tView source code <a href=\"https://github.com/RedRaptor10/fakeddit\" target=\"_blank\" rel=\"noreferrer\">here</a>.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"home-sidebar-section\">\n\t\t\t\t\t\t<div className=\"home-sidebar-section-header\">Features</div>\n\t\t\t\t\t\t<div className=\"home-sidebar-section-content\">\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t<li>Create / delete account</li>\n\t\t\t\t\t\t\t\t<li>Log in / log out account</li>\n\t\t\t\t\t\t\t\t<li>Toggle night mode</li>\n\t\t\t\t\t\t\t\t<li>Browse different subfakeddits</li>\n\t\t\t\t\t\t\t\t<li>Create / delete posts & comments</li>\n\t\t\t\t\t\t\t\t<li>Upvote / downvote posts & comments</li>\n\t\t\t\t\t\t\t\t<li>Collapse comments</li>\n\t\t\t\t\t\t\t\t<li>Sort posts / comments</li>\n\t\t\t\t\t\t\t\t<li>Filter posts by flairs</li>\n\t\t\t\t\t\t\t\t<li>Search posts</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"home-sidebar-section\">\n\t\t\t\t\t\t<div className=\"home-sidebar-section-header\">Technologies</div>\n\t\t\t\t\t\t<div className=\"home-sidebar-section-content\">\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t<li>React</li>\n\t\t\t\t\t\t\t\t<li>Firebase</li>\n\t\t\t\t\t\t\t\t<li>JavaScript</li>\n\t\t\t\t\t\t\t\t<li>HTML</li>\n\t\t\t\t\t\t\t\t<li>CSS</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default Home;","import React, { useState, useEffect } from \"react\";\nimport { useParams, Link } from \"react-router-dom\";\nimport { getFirestore, collection, query, where, getDocs } from \"firebase/firestore\";\nimport getElapsedTime from \"../functions/getElapsedTime\";\nimport formatNumber from \"../functions/formatNumber\";\nimport \"../styles/Search.css\";\n\nconst Search = ({nightMode}) => {\n    const { searchQuery } = useParams(); // Get search query from url\n    const [posts, setPosts] = useState([]);\n\n    // Get posts where title contains search query on componentDidMount & componentDidUpdate\n    useEffect(() => {\n        const getPosts = async () => {\n            const db = getFirestore();\n            /* To search with prefixes, add '\\uf8ff', which is a high code point in Unicode that comes after every character.\n                This allows the query to match all values that start with searchQuery. */\n            const q = query(collection(db, \"posts\"), where(\"title\", \">=\", searchQuery), where (\"title\", \"<=\", searchQuery + \"\\uf8ff\"));\n            const querySnapshot = await getDocs(q);\n            const temp = [];\n\n            querySnapshot.forEach((doc) => {\n                // Push post data along with post id to array\n                temp.push({\n                    ...doc.data(),\n                    id: doc.id\n                });\n            });\n\n            setPosts(temp);\n        };\n\n        getPosts();\n    }, [searchQuery]);\n\n    return (\n        <div className={!nightMode ? \"search\" : \"search search-dark\"}>\n            <div className=\"search-results\">\n                {posts.map((post, i) => {\n                    return (\n                        <div key={i} className=\"search-result\">\n                            <div className=\"search-result-meta\">\n                                <span className=\"search-result-subreddit\"><Link to={`/r/${post.subreddit}`}>r/{post.subreddit}</Link></span>\n                                <span className=\"search-result-author\">Posts by u/{post.author}</span>\n                                <span className=\"search-result-date\">{getElapsedTime(post.date.seconds)}</span>\n                            </div>\n                            <div className=\"search-result-title\">\n                                <Link to={`/r/${post.subreddit}/comments/${post.id}/${post.title}`}>{post.title}</Link>\n                            </div>\n                            <div className=\"search-result-details\">\n                                <span className=\"search-result-upvotes\">{formatNumber(post.upvotes)} upvotes</span>\n                                <span className=\"search-result-comments\">{formatNumber(post.comments)} comments</span>\n                            </div>\n                        </div>\n                    );\n                })}\n            </div>\n        </div>\n    );\n}\n\nexport default Search;","import React from \"react\";\nimport \"../styles/Footer.css\";\n\nconst Footer = ({nightMode}) => {\n\treturn (\n\t\t<div className={!nightMode ? \"footer\" : \"footer footer-dark\"}>\n            <div className=\"footer-content\">\n\t\t\t    <ul>\n                    <li>About</li>\n                    <li>Careers</li>\n                    <li>Press</li>\n                </ul>\n                <ul>\n                    <li>Advertise</li>\n                    <li>Blog</li>\n                    <li>Help</li>\n                </ul>\n                <ul>\n                    <li>Fakeddit Coins</li>\n                    <li>Fakeddit Premium</li>\n                    <li>Fakeddit Gifts</li>\n                </ul>\n                <ul>\n                    <li>Facebook</li>\n                    <li>Twitter</li>\n                    <li>Instagram</li>\n                </ul>\n            </div>\n            <div className=\"footer-bottom\">\n                <ul>\n                    <li>Content Policy</li>\n                    <li>Privacy Policy</li>\n                    <li>User Agreement</li>\n                    <li>Mod Policy</li>\n                </ul>\n            </div>\n\t\t</div>\n\t);\n}\n\nexport default Footer;","// Convert seconds to string showing date\nconst secondsToDate = seconds => {\n    const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',\n        'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n    const date = new Date(seconds * 1000);\n    const year = date.getFullYear();\n    const month = date.getMonth();\n    const day = date.getDate();\n\n    return months[month] + ' ' + day + ', ' + year;\n};\n\nexport default secondsToDate;","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport secondsToDate from \"../functions/secondsToDate\";\nimport formatNumber from \"../functions/formatNumber\";\nimport \"../styles/SubSidebar.css\";\n\nconst SubSidebar = ({ user, slug, subreddit, colors, activeFlairs, pickFlair, postPage, nightMode }) => {\n    const { description, members, color, flairs, created } = subreddit;\n\n    return (\n        <div className={!nightMode ? \"subreddit-sidebar\" : \"subreddit-sidebar subreddit-sidebar-dark\"}>\n            <div className=\"subreddit-sidebar-section\">\n                <div className=\"subreddit-sidebar-section-header\" style={\n                    color ? {\n                        background: colors[color],\n                        color: 'rgb(255, 255, 255)' \n                    } : null\n                }>\n                    About Community\n                </div>\n                <div className=\"subreddit-sidebar-section-content\">\n                    <div className=\"subreddit-sidebar-section-content-description\">\n                        {description}\n                    </div>\n                    <div className=\"subreddit-sidebar-section-content-members\">\n                        <div className=\"subreddit-sidebar-section-content-members-section\">\n                            <span className=\"subreddit-sidebar-section-content-members-number\">{formatNumber(members)}</span><br />Members\n                        </div>\n                        <div className=\"subreddit-sidebar-section-content-members-section\">\n                            <span className=\"subreddit-sidebar-section-content-members-number\">0</span><br />Online\n                        </div>\n                    </div>\n                    <div className=\"subreddit-sidebar-section-content-created\">\n                        Created {secondsToDate(created.seconds)}\n                    </div>\n                    {user ?\n                        <div className=\"subreddit-sidebar-section-create\">\n                            {/* Pass flairs as a state to Submit page */}\n                            <Link to={`/r/${slug}/submit`} state={flairs}>\n                                <div className=\"subreddit-sidebar-section-create-btn\" style={\n                                    color ? {\n                                        background: colors[color],\n                                        color: 'rgb(255, 255, 255)'\n                                    } : null\n                                }>\n                                    Create Post\n                                </div>\n                            </Link>\n                        </div>\n                    : null}\n                </div>\n            </div>\n            <div className=\"subreddit-sidebar-section\">\n                <div className=\"subreddit-sidebar-section-header\" style={\n                    color ? {\n                        background: colors[color],\n                        color: 'rgb(255, 255, 255)' \n                    } : null\n                }>\n                    Filter by Flair\n                </div>\n                <div className=\"subreddit-sidebar-section-flairs\">\n                    {flairs.map((flair, i) => {\n                        return (\n                            <div key={i} className={`subreddit-sidebar-section-flair\n                                ${activeFlairs.includes(flair) ? `subreddit-sidebar-section-flair-active` : null}`}\n                                onClick={() => {pickFlair(flair)}}>\n                                {postPage ?\n                                    <Link to={`/r/${slug}`}>{flair}</Link>\n                                : flair}\n                            </div>\n                        );\n                    })}\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default SubSidebar;","import React from \"react\";\n\nexport const SubredditContext = React.createContext({});","import React, { useState, useEffect } from \"react\";\nimport { useParams, Outlet } from \"react-router-dom\";\nimport { getFirestore, collection, query, where, doc, getDoc, getDocs } from \"firebase/firestore\";\nimport Sortbar from \"./Sortbar\";\nimport PostBox from \"./PostBox\";\nimport SubSidebar from \"./SubSidebar\";\nimport { SubredditContext } from \"./subredditContext\"; // Import Context allows passing of props to child Post component\nimport \"../styles/Subreddit.css\";\n\nconst Subreddit = ({user, setUser, nightMode}) => {\n\tconst { slug } = useParams(); // Get subreddit slug from url\n\tconst [subreddit, setSubreddit] = useState({\n\t\tslug: '',\n\t\ttitle: '',\n\t\tbanner: '',\n\t\ticon: '',\n\t\tmembers: 0,\n\t\tcolor: '',\n\t\tflairs: [],\n\t\tdescription: '',\n\t\tcreated: 0\n\t});\n\tconst [posts, setPosts] = useState([]);\n\tconst [activeFlairs, setActiveFlairs] = useState([]);\n\tconst { title, color } = subreddit;\n\tconst banner = subreddit.banner !== '' ? require(`../assets/${subreddit.banner}`).default : null;\n\tconst icon = subreddit.icon !== '' ? require(`../assets/${subreddit.icon}`).default : null;\n\tconst colors = {\n\t\tLightBlue: 'rgb(0, 121, 211)',\n\t\tDarkBlue: 'rgb(0, 64, 121)'\n\t}\n\n\t// Get Subreddit & posts from database on componentDidMount & componentDidUpdate\n\tuseEffect(() => {\n\t\tconst getSubreddit = async () => {\n\t\t\tconst db = getFirestore();\n\t\t\tconst docRef = doc(db, \"subreddits\", slug);\n\t\t\tconst docSnap = await getDoc(docRef);\n\n\t\t\tif (docSnap.exists()) {\n\t\t\t\tsetSubreddit(docSnap.data());\n\t\t\t}\n\t\t};\n\n\t\tconst getPosts = async () => {\n\t\t\tconst db = getFirestore();\n\t\t\tconst postsRef = collection(db, \"posts\");\n\t\t\tconst q = query(postsRef, where(\"subreddit\", \"==\", slug));\n\t\t\tconst querySnap = await getDocs(q);\n\t\t\tconst postsArray = [];\n\n\t\t\t// Add fetched posts to posts array\n\t\t\tquerySnap.forEach(post => {\n\t\t\t\t// Push post data along with post id to array\n\t\t\t\tpostsArray.push({\n\t\t\t\t\t...post.data(),\n\t\t\t\t\tid: post.id\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// Sort posts array by date (desc)\n\t\t\tpostsArray.sort((a, b) => {\n\t\t\t\treturn b.date - a.date;\n\t\t\t});\n\n\t\t\tsetPosts(postsArray);\n\t\t};\n\n\t\t// Get Subreddit and Posts data\n\t\tgetSubreddit();\n\t\tgetPosts();\n\t}, [slug]);\n\n\t// Add/remove flair to active flairs\n\tconst pickFlair = flair => {\n\t\tconst temp = activeFlairs.slice();\n\n\t\t// If flair already picked, remove flair, otherwise add flair\n\t\tif (activeFlairs.includes(flair)) {\n\t\t\tconst index = activeFlairs.indexOf(flair);\n\t\t\ttemp.splice(index, 1);\n\t\t} else {\n\t\t\ttemp.push(flair);\n\t\t}\n\n\t\tsetActiveFlairs(temp);\n    };\n\n\t// Check if post has an active flair\n\tconst hasActiveFlair = postFlairs => {\n\t\tlet includes = false;\n\t\tpostFlairs.forEach(f => {\n\t\t\tif (activeFlairs.includes(f)) {\n\t\t\t\tincludes = true;\n\t\t\t}\n\t\t});\n\n\t\treturn includes;\n\t};\n\n\treturn (\n\t\t<div className={!nightMode ? \"subreddit\" : \"subreddit-dark\"}>\n\t\t\t<div className=\"subreddit-banner\" style={{\n\t\t\t\tbackgroundImage: 'url(' + banner + ')',\n\t\t\t\tbackgroundColor: colors[color]\n\t\t\t}} />\n\t\t\t<div className=\"subreddit-header\">\n\t\t\t\t<div className=\"subreddit-header-content\">\n\t\t\t\t\t<img className=\"subreddit-icon\" src={icon} alt=\"\" />\n\t\t\t\t\t<div className=\"subreddit-title\">\n\t\t\t\t\t\t<h1>{title}</h1>\n\t\t\t\t\t\t<div className=\"subreddit-name\">r/{slug}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"subreddit-body\">\n\t\t\t\t<div className=\"subreddit-posts-container\">\n\t\t\t\t\t<Sortbar posts={posts} setPosts={setPosts} nightMode={nightMode} />\n\t\t\t\t\t{posts.length !== 0 ?\n\t\t\t\t\t\tposts.map((post) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t/* Render post if there are no active flairs OR post has an active flair */\n\t\t\t\t\t\t\t\tactiveFlairs.length === 0 || hasActiveFlair(post.flairs) ?\n\t\t\t\t\t\t\t\t\t<PostBox key={post.id} user={user} setUser={setUser} post={post} posts={posts} setPosts={setPosts}\n\t\t\t\t\t\t\t\t\t\tactiveFlairs={activeFlairs} pickFlair={pickFlair} nightMode={nightMode} />\n\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})\n\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t\t<SubSidebar user={user} slug={slug} subreddit={subreddit} colors={colors}\n\t\t\t\t\tactiveFlairs={activeFlairs} pickFlair={pickFlair} nightMode={nightMode} />\n\t\t\t</div>\n\t\t\t<SubredditContext.Provider value={{subreddit, colors, posts, setPosts, activeFlairs, pickFlair}}>\n\t\t\t\t<Outlet /> {/* Nested route for Post component */}\n\t\t\t</SubredditContext.Provider>\n\t\t</div>\n\t);\n}\n\nexport default Subreddit;","import React, { useState } from \"react\";\nimport { useParams, useLocation, useNavigate, Link } from \"react-router-dom\";\nimport { getFirestore, collection, addDoc } from \"firebase/firestore\";\nimport \"../styles/Submit.css\";\n\nconst Submit = ({user, nightMode}) => {\n\tconst { slug } = useParams(); // Get subreddit slug from url\n\tconst [title, setTitle] = useState('');\n\tconst [text, setText] = useState('');\n\tconst location = useLocation(); // Get location object to be used for flairs\n\tconst [activeFlairs, setActiveFlairs] = useState([]);\n\tconst [error, setError] = useState('');\n\tconst navigate = useNavigate();\n\n\t// Dynamically change state from title input\n\tconst handleTitle = event => {\n\t\tsetTitle(event.target.value);\n\t};\n\n\t// Dynamically change state from title input\n\tconst handleText = event => {\n\t\tsetText(event.target.value);\n\t};\n\n\tconst pickFlair = event => {\n\t\tconst flair = event.target.innerHTML;\n\t\tconst temp = activeFlairs.slice();\n\n\t\t// If flair already picked, remove flair, otherwise add flair\n\t\tif (activeFlairs.includes(flair)) {\n\t\t\tconst index = activeFlairs.indexOf(flair);\n\t\t\ttemp.splice(index, 1);\n\t\t} else {\n\t\t\ttemp.push(flair);\n\t\t}\n\n\t\tsetActiveFlairs(temp);\n\t};\n\n\tconst submitPost = async () => {\n\t\tif (title !== '' && text !== '') {\n\t\t\tconst db = getFirestore();\n\t\t\tawait addDoc(collection(db, \"posts\"), {\n\t\t\t\tauthor: user.username,\n\t\t\t\tcomments: 0,\n\t\t\t\tdate: new Date(),\n\t\t\t\tdownvotes: 0,\n\t\t\t\tflairs: activeFlairs,\n\t\t\t\tsubreddit: slug,\n\t\t\t\ttext: text,\n\t\t\t\ttitle: title,\n\t\t\t\tupvotes: 1\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\tnavigate(\"/r/\" + slug);\n\t\t\t});\n\t\t} else {\n\t\t\tsetError('All fields required.');\n\t\t}\n\t};\n\n\treturn (\n\t\tuser && location.state ?\n\t\t\t<div className={!nightMode ? \"submit\" : \"submit submit-dark\"}>\n\t\t\t\t<h3>Create a post</h3>\n\t\t\t\t<div className=\"submit-subreddit\">\n\t\t\t\t\tSubfakeddit: <Link to={`/r/${slug}`}>r/{slug}</Link>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"submit-title\">\n\t\t\t\t\t<div className=\"submit-label\">Title</div>\n\t\t\t\t\t<input type=\"text\" placeholder=\"My first post\" onChange={handleTitle} />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"submit-text\">\n\t\t\t\t\t<div className=\"submit-label\">Text</div>\n\t\t\t\t\t<textarea onChange={handleText} />\n\t\t\t\t</div>\n\t\t\t\t{error !== '' ?\n\t\t\t\t\t<div className=\"error-msg\">{error}</div>\n\t\t\t\t: null}\n\t\t\t\t<div className=\"submit-flairs-container\">\n\t\t\t\t\t<div className=\"submit-label\">Flairs</div>\n\t\t\t\t\t<div className=\"submit-flairs\">\n\t\t\t\t\t\t{location.state.map((flair, i) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div key={i} className={`submit-flair ${activeFlairs.includes(flair) ? `submit-flair-active` : null}`}\n\t\t\t\t\t\t\t\tonClick={pickFlair}>{flair}</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<button className=\"submit-btn\" onClick={submitPost}>Post</button>\n\t\t\t</div>\n\t\t: null\n\t);\n}\n\nexport default Submit;","import React, { useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { getFirestore, addDoc, collection, doc, updateDoc } from \"firebase/firestore\";\nimport LogIn from \"./LogIn\";\nimport \"../styles/Reply.css\";\n\nconst Reply = ({user, post, setPost, parent, nightMode}) => {\n    const { slug } = useParams(); // Get subreddit slug from url\n    const [reply, setReply] = useState('');\n    const [error, setError] = useState('');\n    const [logInForm, setLogInForm] = useState(false);\n\tconst [signUpForm, setSignUpForm] = useState(false);\n\n    // Dynamically change state from reply input\n\tconst handleReply = event => {\n\t\tsetReply(event.target.value);\n    };\n\n    const submitReply = async () => {\n        if (reply !== '') {\n\t\t\tconst db = getFirestore();\n\t\t\tawait addDoc(collection(db, \"comments\"), {\n\t\t\t\tauthor: user.username,\n\t\t\t\tdate: new Date(),\n                downvotes: 0,\n                parentId: parent,\n                postId: post.id,\n                replies: [],\n                subreddit: slug,\n\t\t\t\ttext: reply,\n\t\t\t\tupvotes: 1\n\t\t\t})\n\t\t\t.then(() => {\n                // Clear reply input\n                const replyInputs = document.querySelectorAll('.reply-input');\n                replyInputs.forEach(replyInput => {\n                    replyInput.value = '';\n                });\n                setReply('');\n                setError('');\n            })\n            .then(() => {\n                // Increment comment count in database\n                const postRef = doc(db, \"posts\", post.id);\n                (async () => {\n                    await updateDoc(postRef, {\n                        comments: post.comments + 1\n                    })\n                    .catch(error => {\n                        console.log(error);\n                    });\n                })();\n\n                // Increment comment count in post object\n                setPost({\n                    ...post,\n                    comments: post.comments + 1\n                });\n            });\n\t\t} else {\n\t\t\tsetError('All fields required.');\n\t\t}\n    };\n\n    return (\n        <div className={!nightMode ? \"reply\" : \"reply reply-dark\"}>\n            {user ?\n                <div className={`reply-form ${parent === '' ? `reply-form-post` : ''}`}>\n                    <textarea className=\"reply-input\" placeholder=\"Comment on this post\" onChange={handleReply} />\n                    {error !== '' ?\n                        <div className=\"error-msg\">{error}</div>\n                    : null}\n                    <button className=\"reply-submit-btn\" onClick={submitReply}>Reply</button>\n                </div>\n            :\n            <div>\n                <span className=\"reply-prompt\">Log in or Sign up to leave a comment</span>\n                <button className=\"reply-btn login-btn\" onClick={() => {setLogInForm(true)}}>Log In</button>\n\t\t\t\t<button className=\"reply-btn signup-btn\" onClick={() => {setSignUpForm(true)}}>Sign Up</button>\n            </div>}\n            {logInForm ?\n\t\t\t\t<LogIn setLogInForm={setLogInForm} setSignUpForm={setSignUpForm} logIn={true} nightMode={nightMode} />\n\t\t\t: null}\n\t\t\t{signUpForm ?\n\t\t\t\t<LogIn setLogInForm={setLogInForm} setSignUpForm={setSignUpForm} logIn={false} nightMode={nightMode} />\n\t\t\t: null}\n        </div>\n    );\n}\n\nexport default Reply;","import React, { useState, useEffect } from \"react\";\nimport { getFirestore, doc, updateDoc, deleteField, deleteDoc } from \"firebase/firestore\";\nimport Reply from \"./Reply\";\nimport avatarDefault from '../assets/avatar-default.png';\nimport formatNumber from \"../functions/formatNumber\";\nimport getElapsedTime from \"../functions/getElapsedTime\";\n\nconst Comment = ({user, setUser, comment, comments, setComments, post, setPost, nightMode}) => {\n    const [collapsed, setCollapsed] = useState(false);\n    const [showCommentsReply, setShowCommentsReply] = useState(false);\n    const [upvoted, setUpvoted] = useState(false);\n    const [downvoted, setDownvoted] = useState(false);\n\n    // Set Upvoted & Downvoted on componentDidMount & componentDidUpdate\n    useEffect(() => {\n        if (user && user.upvoted.includes(comment.id)) {\n            setUpvoted(true);\n        } else  {\n            setUpvoted(false);\n        }\n\n        if (user && user.downvoted.includes(comment.id)) {\n            setDownvoted(true);\n        } else  {\n            setDownvoted(false);\n        }\n    }, [user, comment.id]);\n\n    const vote = async (direction) => {\n        const db = getFirestore();\n        const commentRef = doc(db, \"comments\", comment.id);\n        const userRef = doc(db, \"users\", user.id);\n\n        // Clone user's upvoted/downvoted arrays\n        const upvotedClone = user.upvoted.slice();\n        const downvotedClone = user.downvoted.slice();\n\n        // If not already upvoted/downvoted, add comment id to user's upvoted/downvoted array\n        if (direction === 'up' && !upvoted) {\n            upvotedClone.push(comment.id);\n        } else if (direction === 'down' && !downvoted) {\n            downvotedClone.push(comment.id);\n        }\n\n        // If already upvoted/downvoted, remove comment id from user's upvoted/downvoted array\n        if (upvoted) {\n            const index = user.upvoted.indexOf(comment.id);\n            upvotedClone.splice(index, 1);\n        } else if (downvoted) {\n            const index = user.downvoted.indexOf(comment.id);\n            downvotedClone.splice(index, 1);\n        }\n\n        // Set user's upvoted/downvoted array\n        setUser({\n            ...user,\n            upvoted: upvotedClone,\n            downvoted: downvotedClone\n        });\n\n        // Get new upvotes/downvotes count\n        let newUpvotes = comment.upvotes;\n        let newDownvotes = comment.downvotes;\n        if (direction === 'up') {\n            upvoted ? newUpvotes-- : newUpvotes++;\n            if (downvoted) {\n                newDownvotes--;\n            }\n        } else {\n            downvoted ? newDownvotes-- : newDownvotes++;\n            if (upvoted) {\n                newUpvotes--;\n            }\n        }\n\n        // Update database\n        await updateDoc(commentRef, {\n            upvotes: newUpvotes,\n            downvotes: newDownvotes\n        });\n        await updateDoc(userRef, {\n            upvoted: upvotedClone,\n            downvoted: downvotedClone\n        });\n\n        // Update comments state in Comments component\n        const temp = comments.slice();\n        // Find comment in temp array, then update comment upvotes\n        temp.forEach(c => {\n            if (c.id === comment.id) {\n                c.upvotes = newUpvotes;\n                c.downvotes = newDownvotes;\n            }\n        });\n\n        setComments(temp);\n    };\n\n    const deleteComment = () => {\n\t\tconst db = getFirestore();\n\n\t\t// Delete Fields from Document\n\t\tconst deleteDocFields = async (id) => {\n\t\t\tconst docRef = doc(db, \"comments\", id);\n\t\t\tawait updateDoc(docRef, {\n\t\t\t\tauthor: deleteField(),\n\t\t\t\tdate: deleteField(),\n                downvotes: deleteField(),\n                parentId: deleteField(),\n                postId: deleteField(),\n                replies: deleteField(),\n                subreddit: deleteField(),\n                text: deleteField(),\n                upvotes: deleteField()\n\t\t\t});\n\t\t};\n\n\t\t// Delete Document\n\t\tconst deleteDocument = async (id) => {\n\t\t\tconst docRef = doc(db, \"comments\", id);\n\t\t\tawait deleteDoc(docRef);\n\t\t};\n\n\t\t// Delete Comment\n        deleteDocFields(comment.id)\n        .then(() => { deleteDocument(comment.id) })\n        .then(() => {\n            // Decrement comment count in database\n            const postRef = doc(db, \"posts\", post.id);\n            (async () => {\n                await updateDoc(postRef, {\n                    comments: post.comments - 1\n                })\n                .catch(error => {\n                    console.log(error);\n                });\n            })();\n\n            // Decrement comment count in post object\n            setPost({\n                ...post,\n                comments: post.comments - 1\n            });\n        })\n        .catch(error => {\n            console.log(error);\n        });\n\t};\n\n    return (\n        <div className={!nightMode ? \"comment-container\" : \"comment-container : comment-container-dark\"} id={comment.id}>\n            <div className={`comment-sidebar ${collapsed ? `comment-collapsed` : ''}`}>\n                {collapsed ?\n                    <div className=\"comment-expand\" onClick={() => { setCollapsed(false) }} />\n                : null}\n                <img className=\"comment-avatar\" src={avatarDefault} alt='' />\n                {!collapsed ?\n                    <div className=\"comment-threadline\" onClick={() => { setCollapsed(true) }} />\n                : null}\n            </div>\n            <div className=\"comment\">\n                <div className=\"comment-details\">\n                    <div className=\"comment-parent\">\n                        <div className=\"comment-meta\">\n                            <span className={`comment-author\n                                ${comment.author === post.author ? `comment-author-poster` : ''}\n                                ${user && comment.author === user.username ? `comment-author-user` : ''}`}>\n                                    {comment.author}\n                            </span>\n                            <span className=\"comment-date\">{getElapsedTime(comment.date.seconds)}</span>\n                        </div>\n                        {!collapsed ?\n                            <div className=\"comment-text\">{comment.text}</div>\n                        : null}\n                    </div>\n                    {!collapsed ?\n                        <div className=\"comment-btns-container\">\n                            <div className=\"comment-votes-container\">\n                                <div className={`comment-upvote-btn ${user && upvoted ? `comment-upvoted` : ''}`} onClick={\n                                    user ? () => {\n                                        vote('up');\n                                    } : null\n                                } />\n                                <div className=\"comment-votes\">\n                                    {formatNumber(comment.upvotes - comment.downvotes)}\n                                </div>\n                                <div className={`comment-downvote-btn ${user && downvoted ? `comment-downvoted` : ''}`} onClick={\n                                    user ? () => {\n                                        vote('down');\n                                    } : null\n                                } />\n                            </div>\n                            {user ?\n                                <div className=\"comment-btn\" onClick={() => {\n                                    !showCommentsReply ? setShowCommentsReply(true) : setShowCommentsReply(false)\n                                }}>Reply</div>\n                            :null}\n                            {user && comment.author === user.username ?\n                                <div className=\"comment-btn\" onClick={deleteComment}>Delete</div>\n                            : null}\n                        </div>\n                    : null}\n                </div>\n                {!collapsed && showCommentsReply ?\n                    <Reply user={user} post={post} setPost={setPost} parent={comment.id} nightMode={nightMode} />\n                : null}\n                {!collapsed && comment.replies.length > 0 ?\n                    <div className=\"replies\">\n                        {comment.replies.map((reply) => {\n                            return (\n                                <Comment user={user} comment={reply} post={post} setPost={setPost} key={reply.id} nightMode={nightMode} />\n                            );\n                        })}\n                    </div>\n                : null}\n            </div>\n        </div>\n    );\n}\n\nexport default Comment;","import React, { useState, useEffect } from \"react\";\nimport { getFirestore, collection, query, where, getDocs } from \"firebase/firestore\";\nimport Sortbar from \"./Sortbar\";\nimport Comment from \"./Comment\";\nimport \"../styles/Comments.css\";\n\nconst Comments = ({user, setUser, post, setPost, nightMode}) => {\n    const [comments, setComments] = useState([]);\n\n\t// Get comments from database on componentDidMount & componentDidUpdate\n\tuseEffect(() => {\n        let allComments = [];\n\n\t\tconst getComments = async () => {\n\t\t\t\tconst db = getFirestore();\n\t\t\t\tconst commentsRef = collection(db, \"comments\");\n\t\t\t\tconst q = query(commentsRef, where(\"postId\", \"==\", post.id));\n\t\t\t\tconst querySnap = await getDocs(q);\n\t\t\t\tconst commentsArray = [];\n\n\t\t\t\t// Add fetched comments to comments array\n\t\t\t\tquerySnap.forEach(comment => {\n\t\t\t\t\t// Push comment data along with comment id to array\n                    commentsArray.push({\n                        ...comment.data(),\n                        id: comment.id\n                    });\n\t\t\t\t});\n\n\t\t\t\t// Sort comments array by votes (desc)\n\t\t\t\tcommentsArray.sort((a, b) => {\n\t\t\t\t\treturn (b.upvotes - b.downvotes) - (a.upvotes - a.downvotes);\n\t\t\t\t});\n\n                allComments = commentsArray.slice();\n        };\n\n        const nestComments = () => {\n            const temp = [];\n\n            // Get parent comments\n            allComments.forEach((comment) => {\n                if (comment.parentId === '') {\n                    temp.push(comment);\n                }\n            });\n\n            // Recursively loop through each comment and add all child comments/replies\n            const addReplies = branch => {\n                branch.forEach(comment => {\n                    // Go through all comments and check if it's a reply to current comment\n                    allComments.forEach(allComment => {\n                        if (allComment.parentId === comment.id) {\n                            // Add reply to replies array\n                            comment.replies.push(allComment);\n                        }\n                    });\n\n                    // If current comment has replies, recursively loop through each reply\n                    if (comment.replies.length > 0) {\n                        addReplies(comment.replies);\n                    }\n                });\n            };\n\n            addReplies(temp);\n            setComments(temp);\n        };\n\n        getComments()\n        .then(nestComments)\n        .catch(error => {\n            console.log(error);\n        });\n    }, [post]);\n\n    return (\n        <div className=\"comments\">\n            <Sortbar comments={comments} setComments={setComments} nightMode={nightMode} />\n            {comments.map((comment) => {\n                return (\n                    <Comment key={comment.id} user={user} setUser={setUser} comment={comment} comments={comments}\n                        setComments={setComments} post={post} setPost={setPost} nightMode={nightMode} />\n                );\n            })}\n        </div>\n    );\n};\n\nexport default Comments;","import React, { useState, useEffect } from \"react\";\nimport { useParams, Link } from \"react-router-dom\";\nimport { getFirestore, doc, getDoc } from \"firebase/firestore\";\nimport PostBox from \"./PostBox\";\nimport Reply from \"./Reply\";\nimport Comments from \"./Comments\";\nimport SubSidebar from \"./SubSidebar\";\nimport { SubredditContext } from \"./subredditContext\";\nimport formatNumber from \"../functions/formatNumber\";\nimport \"../styles/Post.css\";\n\nconst Post = ({user, setUser, nightMode}) => {\n    const { slug, postId } = useParams(); // Get post id from url\n    const [post, setPost] = useState({\n        id: '',\n        author: '',\n        comments: 0,\n        date: '',\n        downvotes: 0,\n        flairs: [],\n        postSubreddit: slug,\n        text: '',\n        title: '',\n        upvotes: 0\n    });\n    const { downvotes, title, upvotes } = post;\n    const { subreddit, colors, posts, setPosts, activeFlairs, pickFlair } = React.useContext(SubredditContext); // Get props from parent Subreddit component\n\n    // Get Post from database on componentDidMount & componentDidUpdate\n    useEffect(() => {\n        const getPost = async () => {\n\t\t\tconst db = getFirestore();\n\t\t\tconst docRef = doc(db, \"posts\", postId);\n\t\t\tconst docSnap = await getDoc(docRef);\n\n\t\t\tif (docSnap.exists()) {\n                // Set post data along with post id\n\t\t\t\tsetPost({\n                    ...docSnap.data(),\n                    id: docSnap.id\n                });\n\t\t\t}\n        };\n\n        getPost();\n\n        // Disable scroll on parent Subreddit\n        document.body.classList.add(\"no-scroll\");\n        // Re-enable scroll on componentDidUnmount\n        return () => {\n            document.body.classList.remove(\"no-scroll\");\n        };\n    }, [slug, postId]);\n\n    return (\n        <div className={!nightMode ? \"post\" : \"post post-dark\"}>\n            <Link to={`/r/${slug}`}>\n                <div className=\"canvas post-canvas\" />\n            </Link>\n            <div className=\"post-main\">\n                <div className=\"post-header\">\n                    <div className=\"post-header-inner\">\n                        <div className=\"post-votes-container\">\n                            <div className=\"post-upvote-btn\" />\n                            {formatNumber(upvotes)}\n                            <div className=\"post-downvote-btn\" />\n                            {formatNumber(downvotes)}\n                        </div>\n                        <div className=\"post-title\">{title}</div>\n                        <Link to={`/r/${slug}`} className=\"post-close-btn-container\">\n                            <div className=\"post-close-btn\">Close</div>\n                        </Link>\n                    </div>\n                </div>\n                <div className=\"post-body\">\n                    <div className=\"post-content-container\">\n                        <PostBox user={user} setUser={setUser} post={post} setPost={setPost} posts={posts} setPosts={setPosts}\n                            activeFlairs={activeFlairs} pickFlair={pickFlair} postPage={true} nightMode={nightMode} />\n                        <Reply user={user} post={post} setPost={setPost} parent='' nightMode={nightMode} />\n                        <Comments user={user} setUser={setUser} post={post} setPost={setPost} nightMode={nightMode} />\n                    </div>\n                    <SubSidebar user={user} slug={slug} subreddit={subreddit} colors={colors}\n                        activeFlairs={activeFlairs} pickFlair={pickFlair} postPage={true} nightMode={nightMode} />\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default Post;","import React, { useState, useEffect } from \"react\";\nimport { initializeApp } from \"firebase/app\";\nimport { getFirebaseConfig } from \"../firebase-config.js\";\nimport { HashRouter, Routes, Route } from \"react-router-dom\";\nimport { getAuth } from \"firebase/auth\";\nimport { getFirestore, collection, query, where, getDocs } from \"firebase/firestore\";\nimport Header from \"./Header\";\nimport Home from \"./Home\";\nimport Search from \"./Search\";\nimport Footer from \"./Footer\";\nimport Subreddit from \"./Subreddit\";\nimport Submit from \"./Submit\";\nimport Post from \"./Post\";\nimport \"../styles/index.css\";\n\nconst App = () => {\n\tconst firebaseAppConfig = getFirebaseConfig();\n\tinitializeApp(firebaseAppConfig);\n\n\tconst [user, setUser] = useState();\n\tconst [nightMode, setNightMode] = useState(false);\n\n\t// Set Logged In observer on componentDidMount\n\tuseEffect(() => {\n\t\tconst auth = getAuth();\n\t\tauth.onAuthStateChanged(userAuth => {\n\t\t\tif (userAuth) {\n\t\t\t\tconst db = getFirestore();\n\n\t\t\t\t// Get user data\n\t\t\t\tconst getUser = async () => {\n\t\t\t\t\tconst q = query(collection(db, \"users\"), where(\"email\", \"==\", auth.currentUser.email));\n\t\t\t\t\tconst querySnapshot = await getDocs(q);\n\t\t\t\t\tquerySnapshot.forEach(doc => {\n\t\t\t\t\t\tsetUser({\n\t\t\t\t\t\t\tid: doc.id, // Add document id to user object\n\t\t\t\t\t\t\temail: doc.data().email,\n\t\t\t\t\t\t\tusername: doc.data().username,\n\t\t\t\t\t\t\tpassword: doc.data().password,\n\t\t\t\t\t\t\tupvoted: doc.data().upvoted,\n\t\t\t\t\t\t\tdownvoted: doc.data().downvoted\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\tgetUser();\n\t\t\t} else {\n\t\t\t\tsetUser(null);\n\t\t\t}\n\t\t});\n\t}, []);\n\n\treturn (\n\t\t<HashRouter>\n\t\t\t<Header user={user} nightMode={nightMode} setNightMode={setNightMode} />\n\t\t\t<Routes>\n\t\t\t\t<Route exact path=\"/\" element={<Home user={user} setUser={setUser} nightMode={nightMode} />} />\n\t\t\t\t<Route path=\"/search/:searchQuery\" element={<Search nightMode={nightMode} />} />\n\t\t\t\t<Route exact path=\"/r/:slug\" element={<Subreddit user={user} setUser={setUser} nightMode={nightMode} />}>\n\t\t\t\t\t{/* Nested route for Post component using relative path */}\n\t\t\t\t\t<Route path=\"comments/:postId/:postTitle\" element={<Post user={user} setUser={setUser} nightMode={nightMode} />} />\n\t\t\t\t</Route>\n\t\t\t\t<Route path=\"/r/:slug/submit\" element={<Submit user={user} nightMode={nightMode} />} />\n\t\t\t</Routes>\n\t\t\t<Footer nightMode={nightMode} />\n\t\t</HashRouter>\n\t);\n};\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport \"./styles/index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}