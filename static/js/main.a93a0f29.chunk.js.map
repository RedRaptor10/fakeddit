{"version":3,"sources":["assets/avatar-default.png","assets sync /^/.//.*$","assets/movies-banner.png","assets/movies-icon.jpg","assets/news-icon.png","assets/preview.jpg","firebase-config.js","components/LogIn.js","components/Header.js","functions/sorts.js","components/Sortbar.js","functions/formatNumber.js","functions/getElapsedTime.js","components/PostBox.js","components/Home.js","components/Search.js","components/Footer.js","functions/secondsToDate.js","components/Sidebar.js","components/subredditContext.js","components/Subreddit.js","components/Submit.js","components/Reply.js","components/Comment.js","components/Comments.js","components/Post.js","components/App.js","index.js"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","LogIn","setLogInForm","setSignUpForm","logIn","useState","email","username","password","confirmPassword","form","setForm","handleChange","event","target","name","value","setError","message","errorMsg","document","querySelector","submitBtn","createElement","classList","add","parentNode","insertBefore","innerHTML","className","onClick","action","type","placeholder","onChange","preventDefault","checkUsername","a","db","getFirestore","q","query","collection","where","getDocs","querySnapshot","empty","forEach","doc","data","auth","getAuth","signInWithEmailAndPassword","then","catch","error","console","log","createAccount","addDoc","upvoted","downvoted","createUserWithEmailAndPassword","Header","user","nightMode","setNightMode","searchInput","setSearchInput","logInForm","signUpForm","dropdown","setDropdown","navigate","useNavigate","sampleAccount","sampleLogIn","to","icon","faMagnifyingGlass","onKeyDown","keyCode","faUser","body","remove","faMoon","signOut","faCircleUser","getDocId","currentUser","docId","deleteDocFields","docRef","updateDoc","deleteField","deleteDocument","deleteDoc","deleteUser","sortByHot","array","sortByDateNew","date","Date","array1","array2","p","getTime","seconds","push","sortByTop","concat","slice","sort","b","upvotes","downvotes","Sortbar","posts","setPosts","comments","setComments","sortTypePosts","setSortTypePosts","sortTypeComments","setSortTypeComments","postsArray","resultA","sortByDateOld","comment","totalReplies","replies","length","loopReplies","branch","reply","sortByControversial","faFire","faArrowUpFromWaterPump","faArrowUpFromGroundWater","faSun","faCloudSun","formatNumber","num","Math","abs","toFixed","getElapsedTime","startTime","elapsedTime","secondsPerYear","secondsPerMonth","secondsPerDay","now","years","floor","months","days","hours","minutes","PostBox","setUser","propSlug","post","setPost","activeFlairs","pickFlair","postPage","slug","useParams","setUpvoted","setDownvoted","deleted","setDeleted","useEffect","includes","vote","direction","postRef","userRef","upvotedClone","downvotedClone","index","indexOf","splice","newUpvotes","newDownvotes","temp","author","flairs","flair","i","title","text","faMessage","subreddit","Home","getPosts","href","rel","Search","searchQuery","Footer","secondsToDate","year","getFullYear","month","getMonth","day","getDate","Sidebar","colors","description","members","color","created","style","background","faCalendar","state","SubredditContext","React","createContext","Subreddit","banner","setSubreddit","setActiveFlairs","require","default","LightBlue","DarkBlue","getSubreddit","getDoc","docSnap","exists","postsRef","querySnap","backgroundImage","backgroundColor","src","alt","postFlairs","f","hasActiveFlair","Provider","Submit","setTitle","setText","location","useLocation","submitPost","Reply","parent","setReply","submitReply","parentId","postId","querySelectorAll","replyInput","Comment","collapsed","setCollapsed","showCommentsReply","setShowCommentsReply","commentRef","c","avatarDefault","Comments","allComments","getComments","commentsRef","commentsArray","addReplies","allComment","Post","postSubreddit","useContext","getPost","App","firebaseAppConfig","getFirebaseConfig","initializeApp","onAuthStateChanged","userAuth","getUser","exact","path","element","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.a93a0f29.chunk.js","sourcesContent":["export default \"data:image/png;base64,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\"","var map = {\n\t\"./avatar-default.png\": 36,\n\t\"./movies-banner.png\": 61,\n\t\"./movies-icon.jpg\": 62,\n\t\"./news-icon.png\": 63,\n\t\"./preview.jpg\": 64\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 39;","export default __webpack_public_path__ + \"static/media/movies-banner.df3d9cd1.png\";","export default __webpack_public_path__ + \"static/media/movies-icon.0c5d95c1.jpg\";","export default __webpack_public_path__ + \"static/media/news-icon.9ab6c1a5.png\";","export default __webpack_public_path__ + \"static/media/preview.1fcc2d6e.jpg\";","// Firebase Configuration\nconst firebaseConfig = {\n\tapiKey: \"AIzaSyDVf2ofyD_gruQEYKvwsTnjF5B55bqtswE\",\n\tauthDomain: \"fakeddit-c2fc2.firebaseapp.com\",\n\tprojectId: \"fakeddit-c2fc2\",\n\tstorageBucket: \"fakeddit-c2fc2.appspot.com\",\n\tmessagingSenderId: \"615056824169\",\n\tappId: \"1:615056824169:web:929502b979e546b2f80ff8\"\n};\n\nexport function getFirebaseConfig() {\n\tif (!firebaseConfig || !firebaseConfig.apiKey) {\n\t\tthrow new Error('No Firebase configuration object provided.');\n\t} else {\n\t\treturn firebaseConfig;\n\t}\n}","import React, { useState } from \"react\";\nimport { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword } from \"firebase/auth\";\nimport { getFirestore, collection, query, where, getDocs, addDoc } from \"firebase/firestore\";\nimport \"../styles/LogIn.css\";\n\nconst LogIn = ({setLogInForm, setSignUpForm, logIn}) => {\n    const [form, setForm] = useState({\n        email: '',\n        username: '',\n        password: '',\n        confirmPassword: '',\n    });\n\n    const handleChange = event => {\n        setForm({\n            ...form,\n            [event.target.name]: event.target.value\n        });\n    };\n\n    const processLogIn = event => {\n        event.preventDefault();\n\n        // Check if username exists\n        const checkUsername = async () => {\n            const db = getFirestore();\n            const q = query(collection(db, \"users\"), where(\"username\", \"==\", form.username));\n            const querySnapshot = await getDocs(q);\n\n            if (!querySnapshot.empty) {\n                let email = '';\n                querySnapshot.forEach((doc) => {\n                    email = doc.data().email;\n                });\n\n                return email;\n            } else {\n                throw new Error('Invalid username');\n            }\n        };\n\n        // Log in\n        const logIn = async (email, password) => {\n            const auth = getAuth();\n            signInWithEmailAndPassword(auth, email, password)\n            .then(() => {\n                setLogInForm(false);\n            })\n            .catch(error => {\n                if (error.code === 'auth/wrong-password') {\n                    setError('Wrong password.');\n                }\n                console.log(error);\n            });\n        };\n\n        // Check if any field is empty\n        if (form.username === '' || form.password === '') {\n            setError('All fields required.');\n        } else {\n            checkUsername()\n            .then(email => {\n                logIn(email, form.password);\n            })\n            .catch((error) => {\n                setError(error.message);\n            });\n        }\n    };\n\n    const processSignUp = event => {\n        event.preventDefault();\n\n        // Check if username exists\n        const checkUsername = async () => {\n            const db = getFirestore();\n            const q = query(collection(db, \"users\"), where(\"username\", \"==\", form.username));\n            const querySnapshot = await getDocs(q);\n\n            if (!querySnapshot.empty) {\n                throw new Error('Username already exists.');\n            }\n        };\n\n        // Create Account\n        const createAccount = async () => {\n            const db = getFirestore();\n            await addDoc(collection(db, \"users\"), {\n                email: form.email,\n                username: form.username,\n                password: form.password,\n                upvoted: [],\n                downvoted: []\n            });\n        };\n\n        // Check if any field is empty and if passwords match\n        if (form.email === '' || form.username === '' || form.password === '' || form.confirmPassword === '') {\n            setError('All fields required.');\n        } else if (form.password !== form.confirmPassword) {\n            setError('Passwords do not match.');\n        } else {\n            checkUsername()\n            .then(() => {\n                // Create Auth Account\n                const auth = getAuth();\n                createUserWithEmailAndPassword(auth, form.email, form.password)\n                .then(createAccount)\n                .then(() => { setSignUpForm(false); })\n                .catch(error => {\n                    if (error.code === 'auth/weak-password') {\n                        setError('Password must have at least 6 characters.');\n                    } else if (error.code === 'auth/invalid-email') {\n                        setError('Invalid email.');\n                    } else if (error.code === 'auth/email-already-in-use') {\n                        setError('Email in use.');\n                    }\n                    console.log(error);\n                });\n            })\n            .catch(error => {\n                setError(error.message);\n                console.log(error);\n            });\n        }\n    };\n\n    const setError = message => {\n        let errorMsg = document.querySelector('.error-msg');\n        if (!errorMsg) {\n            const submitBtn = document.querySelector('.log-in-form-submit-btn');\n            errorMsg = document.createElement('div');\n            errorMsg.classList.add('error-msg');\n            submitBtn.parentNode.insertBefore(errorMsg, submitBtn);\n        }\n\n        errorMsg.innerHTML = message;\n    };\n\n    return (\n        <div className=\"log-in\">\n            <div className=\"canvas log-in-canvas\" />\n            <div className=\"log-in-form-container\">\n                <div className=\"log-in-form-close\">\n                    <div className=\"log-in-form-close-btn\" onClick={() => {\n                        logIn ? setLogInForm(false) : setSignUpForm(false);\n                    }} />\n                </div>\n                {logIn ?\n                <form className=\"log-in-form\" action=\"\">\n                    <h1>Login</h1>\n                    <div>By continuing, you agree to our <span className=\"link\">User Agreement</span> and <span className=\"link\">Privacy Policy</span>.</div>\n                    <input type=\"text\" name=\"username\" value={form.username} placeholder=\"Username\" onChange={handleChange} />\n                    <input type=\"password\" name=\"password\" value={form.password} placeholder=\"Password\" onChange={handleChange} />\n                    <button type=\"submit\" className=\"log-in-form-submit-btn\" onClick={processLogIn}>Log In</button>\n                    <div className=\"log-in-form-bottom\">\n                        <div>Forgot your <span className=\"link\">username</span> or <span className=\"link\">password</span>?</div>\n                        <div>New to Fakeddit? <span className=\"link\" onClick={() => {\n                            setLogInForm(false);\n                            setSignUpForm(true);\n                        }}>SIGN UP</span></div>\n                    </div>\n                </form>\n                :\n                <form className=\"log-in-form\" action=\"\">\n                    <h1>Sign up</h1>\n                    <div>By continuing, you are setting up a Fakeddit account and agree to our <span className=\"link\">User Agreement</span> and <span className=\"link\">Privacy Policy</span>.</div>\n                    <input type=\"email\" name=\"email\" value={form.email} placeholder=\"Email\" onChange={handleChange} />\n                    <input type=\"text\" name=\"username\" value={form.username} placeholder=\"Username\" onChange={handleChange} />\n                    <input type=\"password\" name=\"password\" value={form.password} placeholder=\"Password\" onChange={handleChange} />\n                    <input type=\"password\" name=\"confirmPassword\" value={form.confirmPassword} placeholder=\"Confirm Password\" onChange={handleChange} />\n                    <button type=\"submit\" className=\"log-in-form-submit-btn\" onClick={processSignUp}>Continue</button>\n                    <div className=\"log-in-form-bottom\">\n                        <div>Already a Fakedditor? <span className=\"link\" onClick={() => {\n                            setLogInForm(true);\n                            setSignUpForm(false);\n                        }}>LOG IN</span></div>\n                    </div>\n                </form>\n                }\n            </div>\n        </div>\n    );\n};\n\nexport default LogIn;","import React, { useState } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { getAuth, signInWithEmailAndPassword, signOut, deleteUser } from \"firebase/auth\";\nimport { getFirestore, collection, query, where, getDocs, doc, deleteDoc, updateDoc, deleteField } from \"firebase/firestore\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faMagnifyingGlass, faUser, faCircleUser, faMoon } from \"@fortawesome/free-solid-svg-icons\";\nimport LogIn from \"./LogIn\";\nimport '../styles/Header.css';\n\nconst Header = ({user, nightMode, setNightMode}) => {\n\tconst [searchInput, setSearchInput] = useState('');\n\tconst [logInForm, setLogInForm] = useState(false);\n\tconst [signUpForm, setSignUpForm] = useState(false);\n\tconst [dropdown, setDropdown] = useState(false);\n\tconst navigate = useNavigate();\n\tconst sampleAccount = {\n\t\tusername: 'johndoe',\n\t\temail: 'johndoe@johndoe.com',\n\t\tpassword: 'johndoe'\n\t};\n\n\tconst handleInput = event => {\n\t\tsetSearchInput(event.target.value);\n\t};\n\n\tconst submitSearch = event => {\n\t\tif (event.keyCode === 13) {\n\t\t\tnavigate(\"/search/\" + searchInput);\n\t\t}\n\t};\n\n\tconst sampleLogIn = async () => {\n\t\tconst auth = getAuth();\n\t\tsignInWithEmailAndPassword(auth, sampleAccount.email, sampleAccount.password);\n\t};\n\n\tconst logOut = () => {\n\t\tconst auth = getAuth();\n\t\tsignOut(auth).then(() => {\n\t\t\tsetDropdown(false);\n\t\t}).catch(error => {\n\t\t\tconsole.log(error);\n\t\t});\n\t};\n\n\tconst deleteAccount = () => {\n\t\tconst db = getFirestore();\n\t\tconst auth = getAuth();\n\n\t\t// Get Document id of user\n\t\tconst getDocId = async () => {\n\t\t\tconst q = query(collection(db, \"users\"), where(\"email\", \"==\", auth.currentUser.email));\n\t\t\tconst querySnapshot = await getDocs(q);\n\t\t\tlet docId = '';\n\t\t\tquerySnapshot.forEach(doc => {\n\t\t\t\tdocId = doc.id;\n\t\t\t});\n\n\t\t\treturn docId;\n\t\t}\n\n\t\t// Delete Fields from Document\n\t\tconst deleteDocFields = async (id) => {\n\t\t\tconst docRef = doc(db, \"users\", id);\n\t\t\tawait updateDoc(docRef, {\n\t\t\t\temail: deleteField(),\n\t\t\t\tusername: deleteField(),\n\t\t\t\tpassword: deleteField(),\n\t\t\t\tupvoted: deleteField(),\n\t\t\t\tdownvoted: deleteField()\n\t\t\t});\n\t\t};\n\n\t\t// Delete Document\n\t\tconst deleteDocument = async (id) => {\n\t\t\tconst docRef = doc(db, \"users\", id);\n\t\t\tawait deleteDoc(docRef);\n\t\t};\n\n\t\t// Delete Account\n\t\tgetDocId()\n\t\t.then(id => {\n\t\t\tdeleteDocFields(id)\n\t\t\t.then(() => { deleteDocument(id) })\n\t\t\t.then(() => { deleteUser(auth.currentUser) })\n\t\t\t.then(() => {\n\t\t\t\tsetDropdown(false);\n\t\t\t\tconsole.log('Successfully deleted account');\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tconsole.log(error);\n\t\t\t});\n\t\t});\n\t}\n\n\tconst toggleNightMode = () => {\n\t\tif (!nightMode) {\n\t\t\tdocument.body.classList.add('dark');\n\t\t\tsetNightMode(true);\n\t\t} else {\n\t\t\tdocument.body.classList.remove('dark');\n\t\t\tsetNightMode(false);\n\t\t}\n\t};\n\n\treturn (\n\t\t<header className={!nightMode ? 'header' : 'header dark'}>\n\t\t\t{dropdown ?\n\t\t\t\t<div className=\"canvas\" onClick={() => {setDropdown(false)}} />\n\t\t\t: null}\n\t\t\t<div className=\"header-left\">\n\t\t\t\t<Link to=\"/\">\n\t\t\t\t\t<div className=\"header-title\">fakeddit</div>\n\t\t\t\t</Link>\n\t\t\t</div>\n\t\t\t<div className=\"header-center\">\n\t\t\t\t<div className=\"search-box\">\n\t\t\t\t\t<form>\n\t\t\t\t\t\t<FontAwesomeIcon icon={faMagnifyingGlass} />\n\t\t\t\t\t\t<input className=\"search-field\" type=\"search\" placeholder=\"Search Fakeddit\" onChange={handleInput} onKeyDown={submitSearch}></input>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"header-right\">\n\t\t\t\t{!user ?\n\t\t\t\t\t<div className=\"header-btns-container\">\n\t\t\t\t\t\t<button className=\"header-btn sample-btn\" onClick={sampleLogIn}>Use A Sample Account</button>\n\t\t\t\t\t\t<button className=\"header-btn login-btn\" onClick={() => {setLogInForm(true)}}>Log In</button>\n\t\t\t\t\t\t<button className=\"header-btn signup-btn\" onClick={() => {setSignUpForm(true)}}>Sign Up</button>\n\t\t\t\t\t</div>\n\t\t\t\t:\n\t\t\t\t\t<div className=\"header-username\">{user.username}</div>\n\t\t\t\t}\n\t\t\t\t<div className=\"user-btn\" onClick={() => {setDropdown(true)}}>\n\t\t\t\t\t<div className=\"user-dropdown-btn\">\n\t\t\t\t\t\t<FontAwesomeIcon icon={faUser} />\n\t\t\t\t\t</div>\n\t\t\t\t\t{dropdown ?\n\t\t\t\t\t\t<div className=\"user-dropdown-menu\">\n\t\t\t\t\t\t\t<div className=\"dropdown-header\">VIEW OPTIONS</div>\n\t\t\t\t\t\t\t<div className=\"dropdown-item\" onClick={toggleNightMode}>\n\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={faMoon} />\n\t\t\t\t\t\t\t\t<span>Night Mode</span>\n\t\t\t\t\t\t\t\t<button className=\"night-mode-btn\" type=\"button\">\n\t\t\t\t\t\t\t\t\t<div className=\"night-mode-btn-switch\" />\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"dropdown-header\">MORE STUFF</div>\n\t\t\t\t\t\t\t<div className=\"dropdown-item\"><span>Coins</span></div>\n\t\t\t\t\t\t\t<div className=\"dropdown-item\"><span>Premium</span></div>\n\t\t\t\t\t\t\t<div className=\"dropdown-item\"><span>Powerups</span></div>\n\t\t\t\t\t\t\t<div className=\"dropdown-item\"><span>Talk</span></div>\n\t\t\t\t\t\t\t<div className=\"dropdown-item\"><span>Predictions</span></div>\n\t\t\t\t\t\t\t<div className=\"dropdown-item\"><span>Help Center</span></div>\n\t\t\t\t\t\t\t{user ?\n\t\t\t\t\t\t\t\t<div className=\"dropdown-item\" onClick={logOut}>\n\t\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={faCircleUser} />\n\t\t\t\t\t\t\t\t\t<span>Log Out</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<div className=\"dropdown-item\" onClick={() => {\n\t\t\t\t\t\t\t\t\tsetDropdown(false);\n\t\t\t\t\t\t\t\t\tsetLogInForm(true);\n\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={faCircleUser} />\n\t\t\t\t\t\t\t\t\t<span>Log In / Sign Up</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t{user && user.username !== sampleAccount.username ?\n\t\t\t\t\t\t\t\t<div className=\"dropdown-item\" onClick={deleteAccount}>Delete Account</div>\n\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t: null}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{logInForm ?\n\t\t\t\t<LogIn setLogInForm={setLogInForm} setSignUpForm={setSignUpForm} logIn={true} />\n\t\t\t: null}\n\t\t\t{signUpForm ?\n\t\t\t\t<LogIn setLogInForm={setLogInForm} setSignUpForm={setSignUpForm} logIn={false} />\n\t\t\t: null}\n\t\t</header>\n\t);\n}\n\nexport default Header;","/* Sort by hot\nSort by date (desc), split between recent (last 24 hrs) and old,\nthen sort recent by top (desc) */\nconst sortByHot = array => {\n    sortByDateNew(array);\n\n    const date = new Date();\n    const array1 = [];\n    const array2 = [];\n    array.forEach(p => {\n        const deltaSeconds = (date.getTime() / 1000) - p.date.seconds;\n        const deltaHours = deltaSeconds / 60 / 60;\n        deltaHours <= 24 ? array1.push(p) : array2.push(p);\n    });\n\n    sortByTop(array1);\n    array = (array1.concat(array2)).slice();\n};\n\n// Sort by best (upvotes / downvotes) (desc)\nconst sortByBest = array => {\n    array.sort((a, b) => {\n        // Check for zero divisor\n        let resultA = (a.downvotes === 0) ? a.upvotes : a.upvotes / a.downvotes;\n        let resultB = (b.downvotes === 0) ? b.upvotes : b.upvotes / b.downvotes;\n\n        return resultB - resultA;\n    });\n};\n\n// Sort by top (votes) (desc)\nconst sortByTop = array => {\n    array.sort((a, b) => {\n        return (b.upvotes - b.downvotes) - (a.upvotes - a.downvotes);\n    });\n};\n\n// Sort by date (desc)\nconst sortByDateNew = array => {\n    array.sort((a, b) => {\n        return b.date - a.date;\n    });\n};\n\n// Sort by date (asc)\nconst sortByDateOld = array => {\n    array.sort((a, b) => {\n        return a.date - b.date;\n    });\n};\n\n// Sort by controversial (desc)\nconst sortByControversial = array => {\n    array.forEach(comment => {\n        let totalReplies = comment.replies.length;\n\n        if (comment.replies > 0) {\n            const loopReplies = branch => {\n                branch.forEach(reply => {\n                    totalReplies++;\n\n                    // If current comment has replies, recursively loop through each reply\n                    if (reply.replies.length > 0) {\n                        loopReplies(reply.replies);\n                    }\n                });\n            };\n\n            loopReplies(comment.replies);\n        }\n\n        // Temporarily add totalReplies property to comment\n        comment.totalReplies = totalReplies;\n    });\n\n    // Sort by totalReplies\n    array.sort((a, b) => {\n        return b.totalReplies - a.totalReplies;\n    });\n\n    // Delete totalReplies property from comments\n    array.forEach(comment => {\n        delete comment.totalReplies;\n    });\n};\n\nexport {\n    sortByHot,\n    sortByBest,\n    sortByTop,\n    sortByDateNew,\n    sortByDateOld,\n    sortByControversial\n};","import React, { useState } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faFire, faArrowUpFromWaterPump, faArrowUpFromGroundWater, faSun, faCloudSun } from \"@fortawesome/free-solid-svg-icons\";\nimport { sortByHot, sortByBest, sortByTop, sortByDateNew, sortByDateOld, sortByControversial } from \"../functions/sorts\";\nimport \"../styles/Sortbar.css\";\n\nconst Sortbar = ({posts, setPosts, comments, setComments}) => {\n    const [sortTypePosts, setSortTypePosts] = useState('hot');\n    const [sortTypeComments, setSortTypeComments] = useState('best');\n    const [dropdown, setDropdown] = useState(false);\n\n    const sort = (type) => {\n        let postsArray;\n        postsArray = posts ? posts.slice() : comments.slice();\n\n        if (type === 'hot') {\n            sortByHot(postsArray);\n            posts ? setSortTypePosts('hot') : setSortTypeComments('hot');\n        } else if (type === 'best'){\n            sortByBest(postsArray);\n            posts ? setSortTypePosts('best') : setSortTypeComments('best');\n        } else if (type === 'top') {\n            sortByTop(postsArray);\n            posts ? setSortTypePosts('top') : setSortTypeComments('top');\n        } else if (type === 'new') {\n            sortByDateNew(postsArray);\n            posts ? setSortTypePosts('new') : setSortTypeComments('new');\n        } else if (type === 'old') {\n            sortByDateOld(postsArray);\n            posts ? setSortTypePosts('old') : setSortTypeComments('old');\n        } else if (type === 'controversial') {\n            if (comments) {\n                sortByControversial(postsArray);\n                posts ? setSortTypePosts('controversial') : setSortTypeComments('controversial');\n            }\n        }\n\n        posts ? setPosts(postsArray) : setComments(postsArray);\n    };\n\n    return (\n        <div className=\"sortbar\">\n        { posts ?\n            <div className=\"sortbar-posts\">\n                <div className={`sortbar-btn ${sortTypePosts === 'hot' ? `sortbar-btn-active` : ''}`} onClick={() => {\n                    if (sortTypePosts !== 'hot') {\n                        sort('hot');\n                    }\n                }}><FontAwesomeIcon icon={faFire} />Hot</div>\n                <div className={`sortbar-btn ${sortTypePosts === 'best' ? `sortbar-btn-active` : ''}`} onClick={() => {\n                    if (sortTypePosts !== 'best') {\n                        sort('best');\n                    }\n                }}><FontAwesomeIcon icon={faArrowUpFromWaterPump} />Best</div>\n                <div className={`sortbar-btn ${sortTypePosts === 'top' ? `sortbar-btn-active` : ''}`} onClick={() => {\n                    if (sortTypePosts !== 'top') {\n                        sort('top');\n                    }\n                }}><FontAwesomeIcon icon={faArrowUpFromGroundWater} />Top</div>\n                <div className={`sortbar-btn ${sortTypePosts === 'new' ? `sortbar-btn-active` : ''}`} onClick={() => {\n                    if (sortTypePosts !== 'new') {\n                        sort('new');\n                    }\n                }}><FontAwesomeIcon icon={faSun} />New</div>\n                <div className={`sortbar-btn ${sortTypePosts === 'old' ? `sortbar-btn-active` : ''}`} onClick={() => {\n                    if (sortTypePosts !== 'old') {\n                        sort('old');\n                    }\n                }}><FontAwesomeIcon icon={faCloudSun} />Old</div>\n            </div>\n        :\n            <div className=\"sortbar-comments\">\n                <div className=\"sortbar-comments-btn\" onClick={() => { dropdown ? setDropdown(false) : setDropdown(true) }}>\n                    {sortTypeComments === 'best' ? <div>Sort By: Best</div> : null}\n                    {sortTypeComments === 'hot' ? <div>Sort By: Hot</div> : null}\n                    {sortTypeComments === 'top' ? <div>Sort By: Top</div> : null}\n                    {sortTypeComments === 'new' ? <div>Sort By: New</div> : null}\n                    {sortTypeComments === 'old' ? <div>Sort By: Old</div> : null}\n                    {sortTypeComments === 'controversial' ? <div>Sort By: Controversial</div> : null}\n                    {dropdown ?\n                    <div className=\"sortbar-comments-dropdown\">\n                        <div className=\"sortbar-comments-dropdown-item\" onClick={() => {\n                            if (sortTypeComments !== 'best') {\n                                sort('best');\n                            }\n                        }}>Best</div>\n                        <div className=\"sortbar-comments-dropdown-item\" onClick={() => {\n                            if (sortTypeComments !== 'hot') {\n                                sort('hot');\n                            }\n                        }}>Hot</div>\n                        <div className=\"sortbar-comments-dropdown-item\" onClick={() => {\n                            if (sortTypeComments !== 'top') {\n                                sort('top');\n                            }\n                        }}>Top</div>\n                        <div className=\"sortbar-comments-dropdown-item\" onClick={() => {\n                            if (sortTypeComments !== 'new') {\n                                sort('new');\n                            }\n                        }}>New</div>\n                        <div className=\"sortbar-comments-dropdown-item\" onClick={() => {\n                            if (sortTypeComments !== 'old') {\n                                sort('old');\n                            }\n                        }}>Old</div>\n                        <div className=\"sortbar-comments-dropdown-item\" onClick={() => {\n                            if (sortTypeComments !== 'controversial') {\n                                sort('controversial');\n                            }\n                        }}>Controversial</div>\n                    </div>\n                    : null}\n                </div>\n            </div>\n        }\n        </div>\n    );\n}\n\nexport default Sortbar;","const formatNumber = num => {\n    if (Math.abs(num) >= 1000 && Math.abs(num) < 1000000) {\n        num = (num / 1000).toFixed(1) + 'k';\n    }\n    if (Math.abs(num) >= 1000000 && Math.abs(num) < 1000000000) {\n        num = (num / 1000000).toFixed(1) + 'm';\n    }\n    if (Math.abs(num) >= 1000000000) {\n        num = (num / 1000000000).toFixed(1) + 'b';\n    }\n\n    return num;\n};\n\nexport default formatNumber;","// Convert seconds to string showing amount of time passed since then\nconst getElapsedTime = startTime => {\n    let elapsedTime;\n    const secondsPerYear = 365 * 24 * 60 * 60; // 31536000 sec\n    const secondsPerMonth = 30 * 24 * 60 * 60; // 2592000 sec\n    const secondsPerDay = 24 * 60 * 60; // 86400 sec\n    const secondsPerHour = 60 * 60; // 3600 sec\n    const secondsPerMinute = 60; // 60 sec\n\n    // Get time difference between specified and current time (milliseconds)\n    const delta = Date.now() - (startTime * 1000);\n\n    // Convert seconds to years / months / days / hours / minutes\n    const seconds = delta / 1000;\n    const years = Math.floor(seconds / secondsPerYear);\n    const months = Math.floor((seconds - (years * secondsPerYear)) / secondsPerMonth);\n    const days = Math.floor((seconds - (years * secondsPerYear) - (months * secondsPerMonth)) / secondsPerDay);\n    const hours = Math.floor((seconds - (years * secondsPerYear) - (months * secondsPerMonth) - (days * secondsPerDay)) / secondsPerHour);\n    const minutes = Math.floor((seconds - (years * secondsPerYear) - (months * secondsPerMonth)\n        - (days * secondsPerDay) - (hours * secondsPerHour)) / secondsPerMinute);\n\n    // Set elapsed time output\n    if (years === 1) { elapsedTime = years + ' year'; }\n    else if (years > 1) { elapsedTime = years + ' years'; }\n    else if (months === 1) { elapsedTime = months + ' month'; }\n    else if (months > 1) { elapsedTime = months + ' months'; }\n    else if (days === 1) { elapsedTime = days + ' day'; }\n    else if (days > 1) { elapsedTime = days + ' days'; }\n    else if (hours === 1) { elapsedTime = hours + ' hour'; }\n    else if (hours > 1) { elapsedTime = hours + ' hours'; }\n    else if (minutes === 1) { elapsedTime = minutes + ' minute'; }\n    else if (minutes > 1) { elapsedTime = minutes + ' minutes'; }\n    else if (minutes === 0) { return 'Just now'; }\n\n    return elapsedTime + ' ago';\n};\n\nexport default getElapsedTime;","import React, { useState, useEffect } from \"react\";\nimport { useParams, Navigate, Link } from \"react-router-dom\";\nimport { getFirestore, doc, updateDoc, deleteField, deleteDoc } from \"firebase/firestore\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faMessage } from \"@fortawesome/free-solid-svg-icons\";\nimport formatNumber from \"../functions/formatNumber\";\nimport getElapsedTime from \"../functions/getElapsedTime\";\nimport \"../styles/PostBox.css\";\n\nconst PostBox = ({user, setUser, propSlug, post, setPost, posts, setPosts, activeFlairs, pickFlair, postPage}) => {\n    let { slug } = useParams(); // Get subreddit slug from url\n    if (propSlug) { slug = propSlug; } // If propSlug passed from Home component, set slug to propSlug\n    const [upvoted, setUpvoted] = useState(false);\n    const [downvoted, setDownvoted] = useState(false);\n    const [deleted, setDeleted] = useState(false);\n\n    // Set Upvoted & Downvoted on componentDidMount & componentDidUpdate\n    useEffect(() => {\n        if (user && user.upvoted.includes(post.id)) {\n            setUpvoted(true);\n        } else  {\n            setUpvoted(false);\n        }\n\n        if (user && user.downvoted.includes(post.id)) {\n            setDownvoted(true);\n        } else  {\n            setDownvoted(false);\n        }\n    }, [user, post.id]);\n\n    const vote = async (direction) => {\n        const db = getFirestore();\n        const postRef = doc(db, \"posts\", post.id);\n        const userRef = doc(db, \"users\", user.id);\n\n        // Clone user's upvoted/downvoted arrays\n        const upvotedClone = user.upvoted.slice();\n        const downvotedClone = user.downvoted.slice();\n\n        // If not already upvoted/downvoted, add post id to user's upvoted/downvoted array\n        if (direction === 'up' && !upvoted) {\n            upvotedClone.push(post.id);\n        } else if (direction === 'down' && !downvoted) {\n            downvotedClone.push(post.id);\n        }\n\n        // If already upvoted/downvoted, remove post id from user's upvoted/downvoted array\n        if (upvoted) {\n            const index = user.upvoted.indexOf(post.id);\n            upvotedClone.splice(index, 1);\n        } else if (downvoted) {\n            const index = user.downvoted.indexOf(post.id);\n            downvotedClone.splice(index, 1);\n        }\n\n        // Set user's upvoted/downvoted array\n        setUser({\n            ...user,\n            upvoted: upvotedClone,\n            downvoted: downvotedClone\n        });\n\n        // Get new upvotes/downvotes count\n        let newUpvotes = post.upvotes;\n        let newDownvotes = post.downvotes;\n        if (direction === 'up') {\n            upvoted ? newUpvotes-- : newUpvotes++;\n            if (downvoted) {\n                newDownvotes--;\n            }\n        } else {\n            downvoted ? newDownvotes-- : newDownvotes++;\n            if (upvoted) {\n                newUpvotes--;\n            }\n        }\n\n        // Update database\n        await updateDoc(postRef, {\n            upvotes: newUpvotes,\n            downvotes: newDownvotes\n        });\n        await updateDoc(userRef, {\n            upvoted: upvotedClone,\n            downvoted: downvotedClone\n        });\n\n        // Update posts state in Subreddit component\n        const temp = posts.slice();\n        // Find post in temp array, then update post upvotes\n        temp.forEach(p => {\n            if (p.id === post.id) {\n                p.upvotes = newUpvotes;\n                p.downvotes = newDownvotes;\n            }\n        });\n        setPosts(temp);\n\n        // Update post state in Post component\n        if (postPage) {\n            setPost({\n                ...post,\n                upvotes: newUpvotes,\n                downvotes: newDownvotes\n            });\n        }\n    };\n\n    const deletePost = () => {\n\t\tconst db = getFirestore();\n\n\t\t// Delete Fields from Document\n\t\tconst deleteDocFields = async (id) => {\n\t\t\tconst docRef = doc(db, \"posts\", id);\n\t\t\tawait updateDoc(docRef, {\n                author: deleteField(),\n                comments: deleteField(),\n\t\t\t\tdate: deleteField(),\n                downvotes: deleteField(),\n                subreddit: deleteField(),\n                text: deleteField(),\n                title: deleteField(),\n                upvotes: deleteField()\n\t\t\t});\n\t\t};\n\n\t\t// Delete Document\n\t\tconst deleteDocument = async (id) => {\n\t\t\tconst docRef = doc(db, \"posts\", id);\n\t\t\tawait deleteDoc(docRef);\n\t\t};\n\n\t\t// Delete Post\n        deleteDocFields(post.id)\n        .then(() => { deleteDocument(post.id); })\n        .then(() => { setDeleted(true); })\n        .catch(error => {\n            console.log(error);\n        });\n\t};\n\n    return (\n        <div className=\"post-box-container\">\n            { deleted ?\n\t\t\t\t<Navigate to={`/`} />\n            :\n            <div className=\"post-box\">\n                <div className=\"post-box-votes-container\">\n                    <div className={`post-box-upvote-btn ${user && upvoted ? `post-box-upvoted` : ''}`} onClick={\n                        user ? () => {\n                            vote('up');\n                        } : null\n                    } />\n                    <div className=\"post-box-votes\">{formatNumber(post.upvotes - post.downvotes)}</div>\n                    <div className={`post-box-downvote-btn ${user && downvoted ? `post-box-downvoted` : ''}`} onClick={\n                        user ? () => {\n                            vote('down');\n                        } : null\n                    } />\n                </div>\n                <div className=\"post-box-details\">\n                    <div className=\"post-box-meta\">\n                        {propSlug ?\n                            <Link to={`/r/${propSlug}`} className=\"post-box-subreddit\">r/{propSlug}</Link>\n                        : null}\n                        <span className=\"post-box-author\">Posted by&nbsp;\n                            <span className={user && post.author === user.username ? 'post-box-author-user' : ''}>u/{post.author}</span>\n                        </span>\n                        <span className=\"post-box-date\">{getElapsedTime(post.date.seconds)}</span>\n                    </div>\n                    <div className=\"post-box-title\">\n                        {activeFlairs ? post.flairs.map((flair, i) => {\n                            return (\n                                <div key={i} className={`post-box-flair ${activeFlairs.includes(flair) ? `post-box-flair-active` : null}`}\n                                    onClick={() => {pickFlair(flair)}}>\n                                    {postPage ?\n                                        <Link to={`/r/${slug}`}>{flair}</Link>\n                                    : flair}\n                                </div>\n                            );\n                        })\n                        : null}\n                        <h3>\n                            <Link to={`/r/${slug}/comments/${post.id}/${post.title}`}>{post.title}</Link>\n                        </h3>\n                    </div>\n                    <div className=\"post-box-text\">{post.text}</div>\n                    <div className=\"post-box-btns-container\">\n                        <Link to={`/r/${slug}/comments/${post.id}/${post.title}`} className=\"post-box-btn\">\n                            <FontAwesomeIcon icon={faMessage} />\n                            {post.comments} {post.comments === 1 ? 'comment' : 'comments'}</Link>\n                        {user && post.author === user.username ?\n                            <div className=\"post-box-btn\" onClick={deletePost}>Delete</div>\n                        : null}\n                    </div>\n                </div>\n            </div>\n            }\n        </div>\n    );\n};\n\nexport default PostBox;","import React, { useState, useEffect } from \"react\";\nimport { getFirestore, collection, getDocs } from \"firebase/firestore\";\nimport Sortbar from \"./Sortbar\";\nimport PostBox from \"./PostBox\";\nimport { sortByHot } from \"../functions/sorts\";\nimport \"../styles/Home.css\";\n\nconst Home = ({user, setUser, nightMode}) => {\n\tconst [posts, setPosts] = useState([]);\n\n\tuseEffect(() => {\n\t\tconst getPosts = async () => {\n\t\t\tconst db = getFirestore();\n\t\t\tconst querySnapshot = await getDocs(collection(db, \"posts\"));\n\t\t\tconst postsArray = [];\n\n\t\t\t// Add fetched posts to posts array\n\t\t\tquerySnapshot.forEach(post => {\n\t\t\t\t// Push post data along with post id to array\n\t\t\t\tpostsArray.push({\n\t\t\t\t\t...post.data(),\n\t\t\t\t\tid: post.id\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// Sort posts array by hot (desc)\n\t\t\tsortByHot(postsArray);\n\n\t\t\tsetPosts(postsArray.slice());\n\t\t};\n\n\t\tgetPosts();\n\t}, []);\n\n\treturn (\n\t\t<main className={!nightMode ? 'home' : 'home dark'}>\n\t\t\t<div className=\"home-header\">\n\t\t\t\tPopular posts\n\t\t\t</div>\n\t\t\t<div className=\"home-body\">\n\t\t\t\t<div className=\"home-posts-container\">\n\t\t\t\t\t<Sortbar posts={posts} setPosts={setPosts} />\n\t\t\t\t\t{posts.length !== 0 ?\n\t\t\t\t\t\tposts.map((post) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<PostBox key={post.id} user={user} propSlug={post.subreddit} setUser={setUser}\n\t\t\t\t\t\t\t\t\tpost={post} posts={posts} setPosts={setPosts} />\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})\n\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"home-sidebar\">\n\t\t\t\t\t<div className=\"home-sidebar-section\">\n\t\t\t\t\t\t<div className=\"home-sidebar-section-header\">About</div>\n\t\t\t\t\t\t<div className=\"home-sidebar-section-content\">\n\t\t\t\t\t\t\tFakeddit is a clone of a popular social media website.\n\t\t\t\t\t\t\t<br /><br />\n\t\t\t\t\t\t\tView source code <a href=\"https://github.com/RedRaptor10/fakeddit\" target=\"_blank\" rel=\"noreferrer\">here</a>.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"home-sidebar-section\">\n\t\t\t\t\t\t<div className=\"home-sidebar-section-header\">Features</div>\n\t\t\t\t\t\t<div className=\"home-sidebar-section-content\">\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t<li>Create / delete account</li>\n\t\t\t\t\t\t\t\t<li>Log in / log out account</li>\n\t\t\t\t\t\t\t\t<li>Toggle night mode</li>\n\t\t\t\t\t\t\t\t<li>Browse different subfakeddits</li>\n\t\t\t\t\t\t\t\t<li>Create / delete posts & comments</li>\n\t\t\t\t\t\t\t\t<li>Upvote / downvote posts & comments</li>\n\t\t\t\t\t\t\t\t<li>Collapse comments</li>\n\t\t\t\t\t\t\t\t<li>Sort posts / comments</li>\n\t\t\t\t\t\t\t\t<li>Filter posts by flairs</li>\n\t\t\t\t\t\t\t\t<li>Search posts</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"home-sidebar-section\">\n\t\t\t\t\t\t<div className=\"home-sidebar-section-header\">Technologies</div>\n\t\t\t\t\t\t<div className=\"home-sidebar-section-content\">\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t<li>React</li>\n\t\t\t\t\t\t\t\t<li>Firebase</li>\n\t\t\t\t\t\t\t\t<li>JavaScript</li>\n\t\t\t\t\t\t\t\t<li>HTML</li>\n\t\t\t\t\t\t\t\t<li>CSS</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</main>\n\t);\n}\n\nexport default Home;","import React, { useState, useEffect } from \"react\";\nimport { useParams, Link } from \"react-router-dom\";\nimport { getFirestore, collection, query, where, getDocs } from \"firebase/firestore\";\nimport getElapsedTime from \"../functions/getElapsedTime\";\nimport formatNumber from \"../functions/formatNumber\";\nimport \"../styles/Search.css\";\n\nconst Search = ({nightMode}) => {\n    const { searchQuery } = useParams(); // Get search query from url\n    const [posts, setPosts] = useState([]);\n\n    // Get posts where title contains search query on componentDidMount & componentDidUpdate\n    useEffect(() => {\n        const getPosts = async () => {\n            const db = getFirestore();\n            // To search with prefixes, add '\\uf8ff', which is a high code point in Unicode that comes after every character.\n            // This allows the query to match all values that start with searchQuery.\n            // NOTE: Firebase has a limitation that prevents case-insensitive querying.\n            const q = query(collection(db, \"posts\"), where(\"title\", \">=\", searchQuery), where (\"title\", \"<=\", searchQuery + \"\\uf8ff\"));\n            const querySnapshot = await getDocs(q);\n            const temp = [];\n\n            querySnapshot.forEach((doc) => {\n                // Push post data along with post id to array\n                temp.push({\n                    ...doc.data(),\n                    id: doc.id\n                });\n            });\n\n            setPosts(temp);\n        };\n\n        getPosts();\n    }, [searchQuery]);\n\n    return (\n        <main className={!nightMode ? 'search' : 'search dark'}>\n            <div className=\"search-results\">\n                {posts.map((post, i) => {\n                    return (\n                        <div key={i} className=\"search-result\">\n                            <div className=\"search-result-meta\">\n                                <span className=\"search-result-subreddit\"><Link to={`/r/${post.subreddit}`}>r/{post.subreddit}</Link></span>\n                                <span className=\"search-result-author\">Posts by u/{post.author}</span>\n                                <span className=\"search-result-date\">{getElapsedTime(post.date.seconds)}</span>\n                            </div>\n                            <div className=\"search-result-title\">\n                                <Link to={`/r/${post.subreddit}/comments/${post.id}/${post.title}`}>{post.title}</Link>\n                            </div>\n                            <div className=\"search-result-details\">\n                                <span className=\"search-result-upvotes\">{formatNumber(post.upvotes)} upvotes</span>\n                                <span className=\"search-result-comments\">{formatNumber(post.comments)} comments</span>\n                            </div>\n                        </div>\n                    );\n                })}\n            </div>\n            <div>No more results.</div>\n        </main>\n    );\n}\n\nexport default Search;","import React from \"react\";\nimport \"../styles/Footer.css\";\n\nconst Footer = ({nightMode}) => {\n\treturn (\n\t\t<footer className={!nightMode ? 'footer' : 'footer dark'}>\n            <div className=\"footer-content\">\n\t\t\t    <ul>\n                    <li>About</li>\n                    <li>Careers</li>\n                    <li>Press</li>\n                </ul>\n                <ul>\n                    <li>Advertise</li>\n                    <li>Blog</li>\n                    <li>Help</li>\n                </ul>\n                <ul>\n                    <li>Fakeddit Coins</li>\n                    <li>Fakeddit Premium</li>\n                    <li>Fakeddit Gifts</li>\n                </ul>\n                <ul>\n                    <li>Facebook</li>\n                    <li>Twitter</li>\n                    <li>Instagram</li>\n                </ul>\n            </div>\n            <div className=\"footer-bottom\">\n                <ul>\n                    <li>Content Policy</li>\n                    <li>Privacy Policy</li>\n                    <li>User Agreement</li>\n                    <li>Mod Policy</li>\n                </ul>\n            </div>\n\t\t</footer>\n\t);\n}\n\nexport default Footer;","// Convert seconds to string showing date\nconst secondsToDate = seconds => {\n    const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',\n        'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n    const date = new Date(seconds * 1000);\n    const year = date.getFullYear();\n    const month = date.getMonth();\n    const day = date.getDate();\n\n    return months[month] + ' ' + day + ', ' + year;\n};\n\nexport default secondsToDate;","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faCalendar } from \"@fortawesome/free-solid-svg-icons\";\nimport secondsToDate from \"../functions/secondsToDate\";\nimport formatNumber from \"../functions/formatNumber\";\nimport \"../styles/Sidebar.css\";\n\nconst Sidebar = ({ user, slug, subreddit, colors, activeFlairs, pickFlair, postPage }) => {\n    const { description, members, color, flairs, created } = subreddit;\n\n    return (\n        <div className=\"sidebar\">\n            <div className=\"sidebar-section\">\n                <div className=\"sidebar-section-header\" style={\n                    color ? {\n                        background: colors[color],\n                        color: 'rgb(255, 255, 255)' \n                    } : null\n                }>\n                    About Community\n                </div>\n                <div className=\"sidebar-section-content\">\n                    <div className=\"sidebar-section-content-description\">\n                        {description}\n                    </div>\n                    <div className=\"sidebar-section-content-members\">\n                        <div className=\"sidebar-section-content-members-section\">\n                            <span className=\"sidebar-section-content-members-number\">{formatNumber(members)}</span><br />Members\n                        </div>\n                        <div className=\"sidebar-section-content-members-section\">\n                            <span className=\"sidebar-section-content-members-number\">0</span><br />Online\n                        </div>\n                    </div>\n                    <div className=\"sidebar-section-content-created\">\n                        <FontAwesomeIcon icon={faCalendar} />\n                        Created {secondsToDate(created.seconds)}\n                    </div>\n                    {user ?\n                        <div className=\"sidebar-section-create\">\n                            {/* Pass flairs as a state to Submit page */}\n                            <Link to={`/r/${slug}/submit`} state={flairs}>\n                                <div className=\"sidebar-section-create-btn\" style={\n                                    color ? {\n                                        background: colors[color],\n                                        color: 'rgb(255, 255, 255)'\n                                    } : null\n                                }>\n                                    Create Post\n                                </div>\n                            </Link>\n                        </div>\n                    : null}\n                </div>\n            </div>\n            <div className=\"sidebar-section\">\n                <div className=\"sidebar-section-header\" style={\n                    color ? {\n                        background: colors[color],\n                        color: 'rgb(255, 255, 255)' \n                    } : null\n                }>\n                    Filter by Flair\n                </div>\n                <div className=\"sidebar-section-flairs\">\n                    {flairs.map((flair, i) => {\n                        return (\n                            <div key={i} className={`sidebar-section-flair\n                                ${activeFlairs.includes(flair) ? `sidebar-section-flair-active` : null}`}\n                                onClick={() => {pickFlair(flair)}}>\n                                {postPage ?\n                                    <Link to={`/r/${slug}`}>{flair}</Link>\n                                : flair}\n                            </div>\n                        );\n                    })}\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default Sidebar;","import React from \"react\";\n\nexport const SubredditContext = React.createContext({});","import React, { useState, useEffect } from \"react\";\nimport { useParams, Outlet } from \"react-router-dom\";\nimport { getFirestore, collection, query, where, doc, getDoc, getDocs } from \"firebase/firestore\";\nimport Sortbar from \"./Sortbar\";\nimport PostBox from \"./PostBox\";\nimport Sidebar from \"./Sidebar\";\nimport { SubredditContext } from \"./subredditContext\"; // Import Context allows passing of props to child Post component\nimport \"../styles/Subreddit.css\";\n\nconst Subreddit = ({user, setUser, nightMode}) => {\n\tconst { slug } = useParams(); // Get subreddit slug from url\n\tconst [subreddit, setSubreddit] = useState({\n\t\tslug: '',\n\t\ttitle: '',\n\t\tbanner: '',\n\t\ticon: '',\n\t\tmembers: 0,\n\t\tcolor: '',\n\t\tflairs: [],\n\t\tdescription: '',\n\t\tcreated: 0\n\t});\n\tconst [posts, setPosts] = useState([]);\n\tconst [activeFlairs, setActiveFlairs] = useState([]);\n\tconst { title, color } = subreddit;\n\tconst banner = subreddit.banner !== '' ? require(`../assets/${subreddit.banner}`).default : null;\n\tconst icon = subreddit.icon !== '' ? require(`../assets/${subreddit.icon}`).default : null;\n\tconst colors = {\n\t\tLightBlue: 'rgb(0, 121, 211)',\n\t\tDarkBlue: 'rgb(0, 64, 121)'\n\t}\n\n\t// Get Subreddit & posts from database on componentDidMount & componentDidUpdate\n\tuseEffect(() => {\n\t\tconst getSubreddit = async () => {\n\t\t\tconst db = getFirestore();\n\t\t\tconst docRef = doc(db, \"subreddits\", slug);\n\t\t\tconst docSnap = await getDoc(docRef);\n\n\t\t\tif (docSnap.exists()) {\n\t\t\t\tsetSubreddit(docSnap.data());\n\t\t\t}\n\t\t};\n\n\t\tconst getPosts = async () => {\n\t\t\tconst db = getFirestore();\n\t\t\tconst postsRef = collection(db, \"posts\");\n\t\t\tconst q = query(postsRef, where(\"subreddit\", \"==\", slug));\n\t\t\tconst querySnap = await getDocs(q);\n\t\t\tconst postsArray = [];\n\n\t\t\t// Add fetched posts to posts array\n\t\t\tquerySnap.forEach(post => {\n\t\t\t\t// Push post data along with post id to array\n\t\t\t\tpostsArray.push({\n\t\t\t\t\t...post.data(),\n\t\t\t\t\tid: post.id\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// Sort posts array by date (desc)\n\t\t\tpostsArray.sort((a, b) => {\n\t\t\t\treturn b.date - a.date;\n\t\t\t});\n\n\t\t\tsetPosts(postsArray);\n\t\t};\n\n\t\t// Get Subreddit and Posts data\n\t\tgetSubreddit();\n\t\tgetPosts();\n\t}, [slug]);\n\n\t// Add/remove flair to active flairs\n\tconst pickFlair = flair => {\n\t\tconst temp = activeFlairs.slice();\n\n\t\t// If flair already picked, remove flair, otherwise add flair\n\t\tif (activeFlairs.includes(flair)) {\n\t\t\tconst index = activeFlairs.indexOf(flair);\n\t\t\ttemp.splice(index, 1);\n\t\t} else {\n\t\t\ttemp.push(flair);\n\t\t}\n\n\t\tsetActiveFlairs(temp);\n    };\n\n\t// Check if post has an active flair\n\tconst hasActiveFlair = postFlairs => {\n\t\tlet includes = false;\n\t\tpostFlairs.forEach(f => {\n\t\t\tif (activeFlairs.includes(f)) {\n\t\t\t\tincludes = true;\n\t\t\t}\n\t\t});\n\n\t\treturn includes;\n\t};\n\n\treturn (\n\t\t<main className={!nightMode ? 'subreddit' : 'subreddit dark'}>\n\t\t\t<div className=\"subreddit-banner\" style={{\n\t\t\t\tbackgroundImage: 'url(' + banner + ')',\n\t\t\t\tbackgroundColor: colors[color]\n\t\t\t}} />\n\t\t\t<div className=\"subreddit-header\">\n\t\t\t\t<div className=\"subreddit-header-content\">\n\t\t\t\t\t<img className=\"subreddit-icon\" src={icon} alt=\"\" />\n\t\t\t\t\t<div className=\"subreddit-title\">\n\t\t\t\t\t\t<h1>{title}</h1>\n\t\t\t\t\t\t<div className=\"subreddit-name\">r/{slug}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"subreddit-body\">\n\t\t\t\t<div className=\"subreddit-posts-container\">\n\t\t\t\t\t<Sortbar posts={posts} setPosts={setPosts} />\n\t\t\t\t\t{posts.length !== 0 ?\n\t\t\t\t\t\tposts.map((post) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t/* Render post if there are no active flairs OR post has an active flair */\n\t\t\t\t\t\t\t\tactiveFlairs.length === 0 || hasActiveFlair(post.flairs) ?\n\t\t\t\t\t\t\t\t\t<PostBox key={post.id} user={user} setUser={setUser} post={post} posts={posts} setPosts={setPosts}\n\t\t\t\t\t\t\t\t\t\tactiveFlairs={activeFlairs} pickFlair={pickFlair} />\n\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})\n\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t\t<Sidebar user={user} slug={slug} subreddit={subreddit} colors={colors}\n\t\t\t\t\tactiveFlairs={activeFlairs} pickFlair={pickFlair} />\n\t\t\t</div>\n\t\t\t<SubredditContext.Provider value={{subreddit, colors, posts, setPosts, activeFlairs, pickFlair}}>\n\t\t\t\t<Outlet /> {/* Nested route for Post component */}\n\t\t\t</SubredditContext.Provider>\n\t\t</main>\n\t);\n}\n\nexport default Subreddit;","import React, { useState } from \"react\";\nimport { useParams, useLocation, useNavigate, Link } from \"react-router-dom\";\nimport { getFirestore, collection, addDoc } from \"firebase/firestore\";\nimport \"../styles/Submit.css\";\n\nconst Submit = ({user, nightMode}) => {\n\tconst { slug } = useParams(); // Get subreddit slug from url\n\tconst [title, setTitle] = useState('');\n\tconst [text, setText] = useState('');\n\tconst location = useLocation(); // Get location object to be used for flairs\n\tconst [activeFlairs, setActiveFlairs] = useState([]);\n\tconst [error, setError] = useState('');\n\tconst navigate = useNavigate();\n\n\t// Dynamically change state from title input\n\tconst handleTitle = event => {\n\t\tsetTitle(event.target.value);\n\t};\n\n\t// Dynamically change state from title input\n\tconst handleText = event => {\n\t\tsetText(event.target.value);\n\t};\n\n\tconst pickFlair = event => {\n\t\tconst flair = event.target.innerHTML;\n\t\tconst temp = activeFlairs.slice();\n\n\t\t// If flair already picked, remove flair, otherwise add flair\n\t\tif (activeFlairs.includes(flair)) {\n\t\t\tconst index = activeFlairs.indexOf(flair);\n\t\t\ttemp.splice(index, 1);\n\t\t} else {\n\t\t\ttemp.push(flair);\n\t\t}\n\n\t\tsetActiveFlairs(temp);\n\t};\n\n\tconst submitPost = async () => {\n\t\tif (title !== '' && text !== '') {\n\t\t\tconst db = getFirestore();\n\t\t\tawait addDoc(collection(db, \"posts\"), {\n\t\t\t\tauthor: user.username,\n\t\t\t\tcomments: 0,\n\t\t\t\tdate: new Date(),\n\t\t\t\tdownvotes: 0,\n\t\t\t\tflairs: activeFlairs,\n\t\t\t\tsubreddit: slug,\n\t\t\t\ttext: text,\n\t\t\t\ttitle: title,\n\t\t\t\tupvotes: 1\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\tnavigate(\"/r/\" + slug);\n\t\t\t});\n\t\t} else {\n\t\t\tsetError('All fields required.');\n\t\t}\n\t};\n\n\treturn (\n\t\tuser && location.state ?\n\t\t\t<main className={!nightMode ? 'submit' : 'submit dark'}>\n\t\t\t\t<h3>Create a post</h3>\n\t\t\t\t<div className=\"submit-subreddit\">\n\t\t\t\t\tSubfakeddit: <Link to={`/r/${slug}`}>r/{slug}</Link>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"submit-title\">\n\t\t\t\t\t<div className=\"submit-label\">Title</div>\n\t\t\t\t\t<input type=\"text\" placeholder=\"My first post\" onChange={handleTitle} />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"submit-text\">\n\t\t\t\t\t<div className=\"submit-label\">Text</div>\n\t\t\t\t\t<textarea onChange={handleText} />\n\t\t\t\t</div>\n\t\t\t\t{error !== '' ?\n\t\t\t\t\t<div className=\"error-msg\">{error}</div>\n\t\t\t\t: null}\n\t\t\t\t<div className=\"submit-flairs-container\">\n\t\t\t\t\t<div className=\"submit-label\">Flairs</div>\n\t\t\t\t\t<div className=\"submit-flairs\">\n\t\t\t\t\t\t{location.state.map((flair, i) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div key={i} className={`submit-flair ${activeFlairs.includes(flair) ? `submit-flair-active` : null}`}\n\t\t\t\t\t\t\t\tonClick={pickFlair}>{flair}</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<button className=\"submit-btn\" onClick={submitPost}>Post</button>\n\t\t\t</main>\n\t\t: null\n\t);\n}\n\nexport default Submit;","import React, { useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { getFirestore, addDoc, collection, doc, updateDoc } from \"firebase/firestore\";\nimport LogIn from \"./LogIn\";\nimport \"../styles/Reply.css\";\n\nconst Reply = ({user, post, setPost, parent}) => {\n    const { slug } = useParams(); // Get subreddit slug from url\n    const [reply, setReply] = useState('');\n    const [error, setError] = useState('');\n    const [logInForm, setLogInForm] = useState(false);\n\tconst [signUpForm, setSignUpForm] = useState(false);\n\n    // Dynamically change state from reply input\n\tconst handleReply = event => {\n\t\tsetReply(event.target.value);\n    };\n\n    const submitReply = async () => {\n        if (reply !== '') {\n\t\t\tconst db = getFirestore();\n\t\t\tawait addDoc(collection(db, \"comments\"), {\n\t\t\t\tauthor: user.username,\n\t\t\t\tdate: new Date(),\n                downvotes: 0,\n                parentId: parent,\n                postId: post.id,\n                replies: [],\n                subreddit: slug,\n\t\t\t\ttext: reply,\n\t\t\t\tupvotes: 1\n\t\t\t})\n\t\t\t.then(() => {\n                // Clear reply input\n                const replyInputs = document.querySelectorAll('.reply-input');\n                replyInputs.forEach(replyInput => {\n                    replyInput.value = '';\n                });\n                setReply('');\n                setError('');\n            })\n            .then(() => {\n                // Increment comment count in database\n                const postRef = doc(db, \"posts\", post.id);\n                (async () => {\n                    await updateDoc(postRef, {\n                        comments: post.comments + 1\n                    })\n                    .catch(error => {\n                        console.log(error);\n                    });\n                })();\n\n                // Increment comment count in post object\n                setPost({\n                    ...post,\n                    comments: post.comments + 1\n                });\n            });\n\t\t} else {\n\t\t\tsetError('All fields required.');\n\t\t}\n    };\n\n    return (\n        <div className=\"reply\">\n            {user ?\n                <div className={`reply-form ${parent === '' ? `reply-form-post` : ''}`}>\n                    <textarea className=\"reply-input\" placeholder=\"Comment on this post\" onChange={handleReply} />\n                    {error !== '' ?\n                        <div className=\"error-msg\">{error}</div>\n                    : null}\n                    <button className=\"reply-submit-btn\" onClick={submitReply}>Reply</button>\n                </div>\n            :\n            <div>\n                <span className=\"reply-prompt\">Log in or Sign up to leave a comment</span>\n                <button className=\"reply-btn login-btn\" onClick={() => {setLogInForm(true)}}>Log In</button>\n\t\t\t\t<button className=\"reply-btn signup-btn\" onClick={() => {setSignUpForm(true)}}>Sign Up</button>\n            </div>}\n            {logInForm ?\n\t\t\t\t<LogIn setLogInForm={setLogInForm} setSignUpForm={setSignUpForm} logIn={true} />\n\t\t\t: null}\n\t\t\t{signUpForm ?\n\t\t\t\t<LogIn setLogInForm={setLogInForm} setSignUpForm={setSignUpForm} logIn={false} />\n\t\t\t: null}\n        </div>\n    );\n}\n\nexport default Reply;","import React, { useState, useEffect } from \"react\";\nimport { getFirestore, doc, updateDoc, deleteField, deleteDoc } from \"firebase/firestore\";\nimport Reply from \"./Reply\";\nimport avatarDefault from '../assets/avatar-default.png';\nimport formatNumber from \"../functions/formatNumber\";\nimport getElapsedTime from \"../functions/getElapsedTime\";\n\nconst Comment = ({user, setUser, comment, comments, setComments, post, setPost}) => {\n    const [collapsed, setCollapsed] = useState(false);\n    const [showCommentsReply, setShowCommentsReply] = useState(false);\n    const [upvoted, setUpvoted] = useState(false);\n    const [downvoted, setDownvoted] = useState(false);\n\n    // Set Upvoted & Downvoted on componentDidMount & componentDidUpdate\n    useEffect(() => {\n        if (user && user.upvoted.includes(comment.id)) {\n            setUpvoted(true);\n        } else  {\n            setUpvoted(false);\n        }\n\n        if (user && user.downvoted.includes(comment.id)) {\n            setDownvoted(true);\n        } else  {\n            setDownvoted(false);\n        }\n    }, [user, comment.id]);\n\n    const vote = async (direction) => {\n        const db = getFirestore();\n        const commentRef = doc(db, \"comments\", comment.id);\n        const userRef = doc(db, \"users\", user.id);\n\n        // Clone user's upvoted/downvoted arrays\n        const upvotedClone = user.upvoted.slice();\n        const downvotedClone = user.downvoted.slice();\n\n        // If not already upvoted/downvoted, add comment id to user's upvoted/downvoted array\n        if (direction === 'up' && !upvoted) {\n            upvotedClone.push(comment.id);\n        } else if (direction === 'down' && !downvoted) {\n            downvotedClone.push(comment.id);\n        }\n\n        // If already upvoted/downvoted, remove comment id from user's upvoted/downvoted array\n        if (upvoted) {\n            const index = user.upvoted.indexOf(comment.id);\n            upvotedClone.splice(index, 1);\n        } else if (downvoted) {\n            const index = user.downvoted.indexOf(comment.id);\n            downvotedClone.splice(index, 1);\n        }\n\n        // Set user's upvoted/downvoted array\n        setUser({\n            ...user,\n            upvoted: upvotedClone,\n            downvoted: downvotedClone\n        });\n\n        // Get new upvotes/downvotes count\n        let newUpvotes = comment.upvotes;\n        let newDownvotes = comment.downvotes;\n        if (direction === 'up') {\n            upvoted ? newUpvotes-- : newUpvotes++;\n            if (downvoted) {\n                newDownvotes--;\n            }\n        } else {\n            downvoted ? newDownvotes-- : newDownvotes++;\n            if (upvoted) {\n                newUpvotes--;\n            }\n        }\n\n        // Update database\n        await updateDoc(commentRef, {\n            upvotes: newUpvotes,\n            downvotes: newDownvotes\n        });\n        await updateDoc(userRef, {\n            upvoted: upvotedClone,\n            downvoted: downvotedClone\n        });\n\n        // Update comments state in Comments component\n        const temp = comments.slice();\n        // Find comment in temp array, then update comment upvotes\n        temp.forEach(c => {\n            if (c.id === comment.id) {\n                c.upvotes = newUpvotes;\n                c.downvotes = newDownvotes;\n            }\n        });\n\n        setComments(temp);\n    };\n\n    const deleteComment = () => {\n\t\tconst db = getFirestore();\n\n\t\t// Delete Fields from Document\n\t\tconst deleteDocFields = async (id) => {\n\t\t\tconst docRef = doc(db, \"comments\", id);\n\t\t\tawait updateDoc(docRef, {\n\t\t\t\tauthor: deleteField(),\n\t\t\t\tdate: deleteField(),\n                downvotes: deleteField(),\n                parentId: deleteField(),\n                postId: deleteField(),\n                replies: deleteField(),\n                subreddit: deleteField(),\n                text: deleteField(),\n                upvotes: deleteField()\n\t\t\t});\n\t\t};\n\n\t\t// Delete Document\n\t\tconst deleteDocument = async (id) => {\n\t\t\tconst docRef = doc(db, \"comments\", id);\n\t\t\tawait deleteDoc(docRef);\n\t\t};\n\n\t\t// Delete Comment\n        deleteDocFields(comment.id)\n        .then(() => { deleteDocument(comment.id) })\n        .then(() => {\n            // Decrement comment count in database\n            const postRef = doc(db, \"posts\", post.id);\n            (async () => {\n                await updateDoc(postRef, {\n                    comments: post.comments - 1\n                })\n                .catch(error => {\n                    console.log(error);\n                });\n            })();\n\n            // Decrement comment count in post object\n            setPost({\n                ...post,\n                comments: post.comments - 1\n            });\n        })\n        .catch(error => {\n            console.log(error);\n        });\n\t};\n\n    return (\n        <div className=\"comment-container\" id={comment.id}>\n            <div className={`comment-sidebar ${collapsed ? `comment-collapsed` : ''}`}>\n                {collapsed ?\n                    <div className=\"comment-expand\" onClick={() => { setCollapsed(false) }} />\n                : null}\n                <img className=\"comment-avatar\" src={avatarDefault} alt='' />\n                {!collapsed ?\n                    <div className=\"comment-threadline\" onClick={() => { setCollapsed(true) }} />\n                : null}\n            </div>\n            <div className=\"comment\">\n                <div className=\"comment-details\">\n                    <div className=\"comment-parent\">\n                        <div className=\"comment-meta\">\n                            <span className={`comment-author\n                                ${comment.author === post.author ? `comment-author-poster` : ''}\n                                ${user && comment.author === user.username ? `comment-author-user` : ''}`}>\n                                    {comment.author}\n                            </span>\n                            <span className=\"comment-date\">{getElapsedTime(comment.date.seconds)}</span>\n                        </div>\n                        {!collapsed ?\n                            <div className=\"comment-text\">{comment.text}</div>\n                        : null}\n                    </div>\n                    {!collapsed ?\n                        <div className=\"comment-btns-container\">\n                            <div className=\"comment-votes-container\">\n                                <div className={`comment-upvote-btn ${user && upvoted ? `comment-upvoted` : ''}`} onClick={\n                                    user ? () => {\n                                        vote('up');\n                                    } : null\n                                } />\n                                <div className=\"comment-votes\">\n                                    {formatNumber(comment.upvotes - comment.downvotes)}\n                                </div>\n                                <div className={`comment-downvote-btn ${user && downvoted ? `comment-downvoted` : ''}`} onClick={\n                                    user ? () => {\n                                        vote('down');\n                                    } : null\n                                } />\n                            </div>\n                            {user ?\n                                <div className=\"comment-btn\" onClick={() => {\n                                    !showCommentsReply ? setShowCommentsReply(true) : setShowCommentsReply(false)\n                                }}>Reply</div>\n                            :null}\n                            {user && comment.author === user.username ?\n                                <div className=\"comment-btn\" onClick={deleteComment}>Delete</div>\n                            : null}\n                        </div>\n                    : null}\n                </div>\n                {!collapsed && showCommentsReply ?\n                    <Reply user={user} post={post} setPost={setPost} parent={comment.id} />\n                : null}\n                {!collapsed && comment.replies.length > 0 ?\n                    <div className=\"replies\">\n                        {comment.replies.map((reply) => {\n                            return (\n                                <Comment user={user} comment={reply} post={post} setPost={setPost} key={reply.id} />\n                            );\n                        })}\n                    </div>\n                : null}\n            </div>\n        </div>\n    );\n}\n\nexport default Comment;","import React, { useState, useEffect } from \"react\";\nimport { getFirestore, collection, query, where, getDocs } from \"firebase/firestore\";\nimport Sortbar from \"./Sortbar\";\nimport Comment from \"./Comment\";\nimport \"../styles/Comments.css\";\n\nconst Comments = ({user, setUser, post, setPost}) => {\n    const [comments, setComments] = useState([]);\n\n\t// Get comments from database on componentDidMount & componentDidUpdate\n\tuseEffect(() => {\n        let allComments = [];\n\n\t\tconst getComments = async () => {\n\t\t\t\tconst db = getFirestore();\n\t\t\t\tconst commentsRef = collection(db, \"comments\");\n\t\t\t\tconst q = query(commentsRef, where(\"postId\", \"==\", post.id));\n\t\t\t\tconst querySnap = await getDocs(q);\n\t\t\t\tconst commentsArray = [];\n\n\t\t\t\t// Add fetched comments to comments array\n\t\t\t\tquerySnap.forEach(comment => {\n\t\t\t\t\t// Push comment data along with comment id to array\n                    commentsArray.push({\n                        ...comment.data(),\n                        id: comment.id\n                    });\n\t\t\t\t});\n\n\t\t\t\t// Sort comments array by votes (desc)\n\t\t\t\tcommentsArray.sort((a, b) => {\n\t\t\t\t\treturn (b.upvotes - b.downvotes) - (a.upvotes - a.downvotes);\n\t\t\t\t});\n\n                allComments = commentsArray.slice();\n        };\n\n        const nestComments = () => {\n            const temp = [];\n\n            // Get parent comments\n            allComments.forEach((comment) => {\n                if (comment.parentId === '') {\n                    temp.push(comment);\n                }\n            });\n\n            // Recursively loop through each comment and add all child comments/replies\n            const addReplies = branch => {\n                branch.forEach(comment => {\n                    // Go through all comments and check if it's a reply to current comment\n                    allComments.forEach(allComment => {\n                        if (allComment.parentId === comment.id) {\n                            // Add reply to replies array\n                            comment.replies.push(allComment);\n                        }\n                    });\n\n                    // If current comment has replies, recursively loop through each reply\n                    if (comment.replies.length > 0) {\n                        addReplies(comment.replies);\n                    }\n                });\n            };\n\n            addReplies(temp);\n            setComments(temp);\n        };\n\n        getComments()\n        .then(nestComments)\n        .catch(error => {\n            console.log(error);\n        });\n    }, [post]);\n\n    return (\n        <div className=\"comments\">\n            <Sortbar comments={comments} setComments={setComments} />\n            {comments.map((comment) => {\n                return (\n                    <Comment key={comment.id} user={user} setUser={setUser} comment={comment} comments={comments}\n                        setComments={setComments} post={post} setPost={setPost} />\n                );\n            })}\n        </div>\n    );\n};\n\nexport default Comments;","import React, { useState, useEffect } from \"react\";\nimport { useParams, Link } from \"react-router-dom\";\nimport { getFirestore, doc, getDoc } from \"firebase/firestore\";\nimport PostBox from \"./PostBox\";\nimport Reply from \"./Reply\";\nimport Comments from \"./Comments\";\nimport Sidebar from \"./Sidebar\";\nimport { SubredditContext } from \"./subredditContext\";\nimport formatNumber from \"../functions/formatNumber\";\nimport \"../styles/Post.css\";\n\nconst Post = ({user, setUser}) => {\n    const { slug, postId } = useParams(); // Get post id from url\n    const [post, setPost] = useState({\n        id: '',\n        author: '',\n        comments: 0,\n        date: '',\n        downvotes: 0,\n        flairs: [],\n        postSubreddit: slug,\n        text: '',\n        title: '',\n        upvotes: 0\n    });\n    const { downvotes, title, upvotes } = post;\n    const { subreddit, colors, posts, setPosts, activeFlairs, pickFlair } = React.useContext(SubredditContext); // Get props from parent Subreddit component\n\n    // Get Post from database on componentDidMount & componentDidUpdate\n    useEffect(() => {\n        const getPost = async () => {\n\t\t\tconst db = getFirestore();\n\t\t\tconst docRef = doc(db, \"posts\", postId);\n\t\t\tconst docSnap = await getDoc(docRef);\n\n\t\t\tif (docSnap.exists()) {\n                // Set post data along with post id\n\t\t\t\tsetPost({\n                    ...docSnap.data(),\n                    id: docSnap.id\n                });\n\t\t\t}\n        };\n\n        getPost();\n\n        // Disable scroll on parent Subreddit\n        document.body.classList.add(\"no-scroll\");\n        // Re-enable scroll on componentDidUnmount\n        return () => {\n            document.body.classList.remove(\"no-scroll\");\n        };\n    }, [slug, postId]);\n\n    return (\n        <div className=\"post\">\n            <Link to={`/r/${slug}`}>\n                <div className=\"canvas post-canvas\" />\n            </Link>\n            <div className=\"post-main\">\n                <div className=\"post-header\">\n                    <div className=\"post-header-inner\">\n                        <div className=\"post-votes-container\">\n                            <div className=\"post-upvote-btn\" />\n                            {formatNumber(upvotes)}\n                            <div className=\"post-downvote-btn\" />\n                            {formatNumber(downvotes)}\n                        </div>\n                        <div className=\"post-title\">{title}</div>\n                        <Link to={`/r/${slug}`} className=\"post-close-btn-container\">\n                            <div className=\"post-close-btn\">Close</div>\n                        </Link>\n                    </div>\n                </div>\n                <div className=\"post-body\">\n                    <div className=\"post-content-container\">\n                        <PostBox user={user} setUser={setUser} post={post} setPost={setPost} posts={posts} setPosts={setPosts}\n                            activeFlairs={activeFlairs} pickFlair={pickFlair} postPage={true} />\n                        <Reply user={user} post={post} setPost={setPost} parent='' />\n                        <Comments user={user} setUser={setUser} post={post} setPost={setPost} />\n                    </div>\n                    <Sidebar user={user} slug={slug} subreddit={subreddit} colors={colors}\n                        activeFlairs={activeFlairs} pickFlair={pickFlair} postPage={true} />\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default Post;","import React, { useState, useEffect } from \"react\";\nimport { initializeApp } from \"firebase/app\";\nimport { getFirebaseConfig } from \"../firebase-config.js\";\nimport { HashRouter, Routes, Route } from \"react-router-dom\";\nimport { getAuth } from \"firebase/auth\";\nimport { getFirestore, collection, query, where, getDocs } from \"firebase/firestore\";\nimport Header from \"./Header\";\nimport Home from \"./Home\";\nimport Search from \"./Search\";\nimport Footer from \"./Footer\";\nimport Subreddit from \"./Subreddit\";\nimport Submit from \"./Submit\";\nimport Post from \"./Post\";\nimport \"../styles/index.css\";\n\nconst App = () => {\n\tconst firebaseAppConfig = getFirebaseConfig();\n\tinitializeApp(firebaseAppConfig);\n\n\tconst [user, setUser] = useState();\n\tconst [nightMode, setNightMode] = useState(false);\n\n\t// Set Logged In observer on componentDidMount\n\tuseEffect(() => {\n\t\tconst auth = getAuth();\n\t\tauth.onAuthStateChanged(userAuth => {\n\t\t\tif (userAuth) {\n\t\t\t\tconst db = getFirestore();\n\n\t\t\t\t// Get user data\n\t\t\t\tconst getUser = async () => {\n\t\t\t\t\tconst q = query(collection(db, \"users\"), where(\"email\", \"==\", auth.currentUser.email));\n\t\t\t\t\tconst querySnapshot = await getDocs(q);\n\t\t\t\t\tquerySnapshot.forEach(doc => {\n\t\t\t\t\t\tsetUser({\n\t\t\t\t\t\t\tid: doc.id, // Add document id to user object\n\t\t\t\t\t\t\temail: doc.data().email,\n\t\t\t\t\t\t\tusername: doc.data().username,\n\t\t\t\t\t\t\tpassword: doc.data().password,\n\t\t\t\t\t\t\tupvoted: doc.data().upvoted,\n\t\t\t\t\t\t\tdownvoted: doc.data().downvoted\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\tgetUser();\n\t\t\t} else {\n\t\t\t\tsetUser(null);\n\t\t\t}\n\t\t});\n\t}, []);\n\n\treturn (\n\t\t<HashRouter>\n\t\t\t<Header user={user} nightMode={nightMode} setNightMode={setNightMode} />\n\t\t\t<Routes>\n\t\t\t\t<Route exact path=\"/\" element={<Home user={user} setUser={setUser} nightMode={nightMode} />} />\n\t\t\t\t<Route path=\"/search/:searchQuery\" element={<Search nightMode={nightMode} />} />\n\t\t\t\t<Route exact path=\"/r/:slug\" element={<Subreddit user={user} setUser={setUser} nightMode={nightMode} />}>\n\t\t\t\t\t{/* Nested route for Post component using relative path */}\n\t\t\t\t\t<Route path=\"comments/:postId/:postTitle\" element={<Post user={user} setUser={setUser} nightMode={nightMode} />} />\n\t\t\t\t</Route>\n\t\t\t\t<Route path=\"/r/:slug/submit\" element={<Submit user={user} nightMode={nightMode} />} />\n\t\t\t</Routes>\n\t\t\t<Footer nightMode={nightMode} />\n\t\t</HashRouter>\n\t);\n};\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport \"./styles/index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}