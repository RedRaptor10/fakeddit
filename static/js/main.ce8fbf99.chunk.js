(this.webpackJsonpfakeddit=this.webpackJsonpfakeddit||[]).push([[0],{35:function(e,t,s){},44:function(e,t,s){},46:function(e,t,s){},47:function(e,t,s){},48:function(e,t,s){},49:function(e,t,s){},50:function(e,t,s){},51:function(e,t,s){},52:function(e,t,s){},53:function(e,t,s){},54:function(e,t,s){},55:function(e,t,s){},56:function(e,t,s){},57:function(e,t,s){"use strict";s.r(t);var c=s(8),n=s.n(c),r=s(36),o=s.n(r),a=s(0),i=s.n(a),d=s(2),l=s(10),u=s(37),b={apiKey:"AIzaSyDVf2ofyD_gruQEYKvwsTnjF5B55bqtswE",authDomain:"fakeddit-c2fc2.firebaseapp.com",projectId:"fakeddit-c2fc2",storageBucket:"fakeddit-c2fc2.appspot.com",messagingSenderId:"615056824169",appId:"1:615056824169:web:929502b979e546b2f80ff8"};var j=s(17),m=s(13),h=s(23),O=s(7),p=s(5),v=s(14),x=(s(44),s(1)),f=function(e){var t=e.setLogInForm,s=e.setSignUpForm,n=e.logIn,r=Object(c.useState)({email:"",username:"",password:"",confirmPassword:""}),o=Object(l.a)(r,2),a=o[0],u=o[1],b=function(e){u(Object(v.a)(Object(v.a)({},a),{},Object(p.a)({},e.target.name,e.target.value)))},j=function(e){var t=document.querySelector(".error-msg");if(!t){var s=document.querySelector(".log-in-form-submit-btn");(t=document.createElement("div")).classList.add("error-msg"),s.parentNode.insertBefore(t,s)}t.innerHTML=e};return Object(x.jsxs)("div",{className:"log-in",children:[Object(x.jsx)("div",{className:"canvas log-in-canvas"}),Object(x.jsxs)("div",{className:"log-in-form-container",children:[Object(x.jsx)("div",{className:"log-in-form-close",children:Object(x.jsx)("div",{className:"log-in-form-close-btn",onClick:function(){n?t(!1):s(!1)}})}),n?Object(x.jsxs)("div",{className:"log-in-form",children:[Object(x.jsx)("h1",{children:"Login"}),Object(x.jsxs)("div",{children:["By continuing, you agree to our ",Object(x.jsx)("span",{className:"link",children:"User Agreement"})," and ",Object(x.jsx)("span",{className:"link",children:"Privacy Policy"}),"."]}),Object(x.jsx)("input",{type:"text",name:"username",value:a.username,placeholder:"Username",onChange:b}),Object(x.jsx)("input",{type:"text",name:"password",value:a.password,placeholder:"Password",onChange:b}),Object(x.jsx)("button",{className:"log-in-form-submit-btn",onClick:function(){var e=function(){var e=Object(d.a)(i.a.mark((function e(){var t,s,c,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(O.h)(),s=Object(O.i)(Object(O.b)(t,"users"),Object(O.k)("username","==",a.username)),e.next=4,Object(O.g)(s);case 4:if((c=e.sent).empty){e.next=11;break}return n="",c.forEach((function(e){n=e.data().email})),e.abrupt("return",n);case 11:throw new Error("Invalid username");case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(d.a)(i.a.mark((function e(s,c){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(h.c)(),Object(h.d)(n,s,c).then((function(){t(!1)})).catch((function(e){"auth/wrong-password"===e.code&&j("Wrong password."),console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}();""===a.username||""===a.password?j("All fields required."):e().then((function(e){s(e,a.password)})).catch((function(e){j(e.message)}))},children:"Log In"}),Object(x.jsxs)("div",{className:"log-in-form-bottom",children:[Object(x.jsxs)("div",{children:["Forgot your ",Object(x.jsx)("span",{className:"link",children:"username"})," or ",Object(x.jsx)("span",{className:"link",children:"password"}),"?"]}),Object(x.jsxs)("div",{children:["New to Fakeddit? ",Object(x.jsx)("span",{className:"link",onClick:function(){t(!1),s(!0)},children:"SIGN UP"})]})]})]}):Object(x.jsxs)("div",{className:"log-in-form",children:[Object(x.jsx)("h1",{children:"Sign up"}),Object(x.jsxs)("div",{children:["By continuing, you are setting up a Fakeddit account and agree to our ",Object(x.jsx)("span",{className:"link",children:"User Agreement"})," and ",Object(x.jsx)("span",{className:"link",children:"Privacy Policy"}),"."]}),Object(x.jsx)("input",{type:"text",name:"email",value:a.email,placeholder:"Email",onChange:b}),Object(x.jsx)("input",{type:"text",name:"username",value:a.username,placeholder:"Username",onChange:b}),Object(x.jsx)("input",{type:"text",name:"password",value:a.password,placeholder:"Password",onChange:b}),Object(x.jsx)("input",{type:"text",name:"confirmPassword",value:a.confirmPassword,placeholder:"Confirm Password",onChange:b}),Object(x.jsx)("button",{className:"log-in-form-submit-btn",onClick:function(){var e=function(){var e=Object(d.a)(i.a.mark((function e(){var t,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(O.h)(),s=Object(O.i)(Object(O.b)(t,"users"),Object(O.k)("username","==",a.username)),e.next=4,Object(O.g)(s);case 4:if(e.sent.empty){e.next=7;break}throw new Error("Username already exists.");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(d.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(O.h)(),e.next=3,Object(O.a)(Object(O.b)(t,"users"),{email:a.email,username:a.username,password:a.password,upvoted:[],downvoted:[]});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();""===a.email||""===a.username||""===a.password||""===a.confirmPassword?j("All fields required."):a.password!==a.confirmPassword?j("Passwords do not match."):e().then((function(){var e=Object(h.c)();Object(h.a)(e,a.email,a.password).then(t).then((function(){s(!1)})).catch((function(e){"auth/weak-password"===e.code?j("Password must have at least 6 characters."):"auth/invalid-email"===e.code?j("Invalid email."):"auth/email-already-in-use"===e.code&&j("Email in use."),console.log(e)}))})).catch((function(e){j(e.message),console.log(e)}))},children:"Continue"}),Object(x.jsx)("div",{className:"log-in-form-bottom",children:Object(x.jsxs)("div",{children:["Already a Fakedditor? ",Object(x.jsx)("span",{className:"link",onClick:function(){t(!0),s(!1)},children:"LOG IN"})]})})]})]})]})},g=(s(46),function(e,t){var s=document.body,c=document.querySelector(".night-mode-btn"),n=document.querySelector(".night-mode-btn-switch"),r=document.querySelector(".header"),o=document.querySelector(".header-title"),a=document.querySelector(".search-field"),i=document.querySelector(".login-btn"),d=document.querySelector(".signup-btn"),l=document.querySelector(".user-btn"),u=document.querySelector(".user-dropdown-menu"),b=document.querySelectorAll(".dropdown-item");e?(t(!1),s.style.background="rgb(218, 224, 230)",c.style.background="rgba(26, 26, 27, 0.1)",n.style.left="0",r.style.background="rgb(255, 255, 255)",r.style.borderBottom="1px solid rgb(237, 239, 241)",o.style.color="rgb(0, 0, 0)",a.style.background="rgb(246, 247, 248)",a.style.color="rgb(0, 0, 0)",a.style.border="1px solid rgb(237, 239, 241)",i&&(i.style.background="rgb(255, 255, 255)",i.style.color="rgb(0, 121, 211)",i.style.border="1px solid rgb(0, 121, 211)"),d&&(d.style.background="rgb(0, 121, 211)",d.style.color="rgb(255, 255, 255)",d.style.border="1px solid rgb(0, 121, 211)"),l.style.color="rgb(0, 0, 0)",u.style.background="rgb(255, 255, 255)",b.forEach((function(e){e.style.color="rgb(0, 0, 0)"}))):(t(!0),s.style.background="rgb(0, 0, 0)",c.style.background="rgb(0, 121, 211)",n.style.left="12px",r.style.background="rgb(26, 26, 27)",r.style.borderBottom="1px solid rgb(52, 53, 54)",o.style.color="rgb(215, 218, 220)",a.style.background="rgb(39, 39, 41)",a.style.color="rgb(215, 218, 220)",a.style.border="1px solid rgb(52, 53, 54)",i&&(i.style.background="rgb(26, 26, 27)",i.style.color="rgb(215, 218, 220)",i.style.border="1px solid rgb(215, 218, 220)"),d&&(d.style.background="rgb(215, 218, 220)",d.style.color="rgb(26, 26, 27)",d.style.border="1px solid rgb(215, 218, 220)"),l.style.color="rgb(215, 218, 220)",u.style.background="rgb(26, 26, 27)",b.forEach((function(e){e.style.color="rgb(215, 218, 220)"})))}),w=function(e){var t=e.user,s=Object(c.useState)(""),n=Object(l.a)(s,2),r=n[0],o=n[1],a=Object(c.useState)(!1),u=Object(l.a)(a,2),b=u[0],p=u[1],v=Object(c.useState)(!1),w=Object(l.a)(v,2),N=w[0],y=w[1],k=Object(c.useState)(!1),C=Object(l.a)(k,2),S=C[0],F=C[1],P=Object(c.useState)(!1),E=Object(l.a)(P,2),I=E[0],U=E[1],M=Object(m.h)();return Object(x.jsxs)("div",{className:"header",children:[S?Object(x.jsx)("div",{className:"canvas",onClick:function(){F(!1)}}):null,Object(x.jsxs)("div",{className:"header-left",children:[Object(x.jsx)(j.b,{to:"/",children:Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",className:"logo",children:Object(x.jsxs)("g",{children:[Object(x.jsx)("circle",{fill:"#FF4500",cx:"10",cy:"10",r:"10"}),Object(x.jsx)("path",{fill:"#FFFFFF",d:"M6.83 8.24h1.64V6.65A4.26 4.26 0 0 1 9 4.19 2.92 2.92 0 0 1 11.54 3a10.31 10.31 0 0 1 2.94.29l-.41 2.43a5.54 5.54 0 0 0-1.32-.2 1 1 0 0 0-1.21.87v1.85h2.62L14 10.61h-2.46v8.24H8.47v-8.24H6.83V8.24z"})]})})}),Object(x.jsx)(j.b,{to:"/",children:Object(x.jsx)("div",{className:"header-title",children:"fakeddit"})})]}),Object(x.jsx)("div",{className:"header-center",children:Object(x.jsx)("div",{className:"search-box",children:Object(x.jsx)("form",{children:Object(x.jsx)("input",{className:"search-field",type:"search",placeholder:"Search Fakeddit",onChange:function(e){o(e.target.value)},onKeyDown:function(e){13===e.keyCode&&M("/search/"+r)}})})})}),Object(x.jsxs)("div",{className:"header-right",children:[t?null:Object(x.jsxs)("div",{className:"header-btns-container",children:[Object(x.jsx)("button",{className:"header-btn login-btn",onClick:function(){p(!0)},children:"Log In"}),Object(x.jsx)("button",{className:"header-btn signup-btn",onClick:function(){y(!0)},children:"Sign Up"})]}),Object(x.jsxs)("div",{className:"user-btn",children:[Object(x.jsx)("div",{className:"user-dropdown-btn",onClick:function(){F(!0)}}),S?Object(x.jsxs)("div",{className:I?"user-dropdown-menu user-dropdown-menu-night":"user-dropdown-menu",children:[Object(x.jsx)("div",{className:"dropdown-header",children:"VIEW OPTIONS"}),Object(x.jsxs)("div",{className:I?"dropdown-item dropdown-item-night":"dropdown-item",onClick:function(){g(I,U)},children:["Night Mode",Object(x.jsx)("button",{className:I?"night-mode-btn night-mode-btn-night":"night-mode-btn",type:"button",children:Object(x.jsx)("div",{className:I?"night-mode-btn-switch night-mode-btn-switch-night":"night-mode-btn-switch"})})]}),Object(x.jsx)("div",{className:"dropdown-header",children:"MORE STUFF"}),Object(x.jsx)("div",{className:I?"dropdown-item dropdown-item-night":"dropdown-item",children:"Coins"}),Object(x.jsx)("div",{className:I?"dropdown-item dropdown-item-night":"dropdown-item",children:"Premium"}),Object(x.jsx)("div",{className:I?"dropdown-item dropdown-item-night":"dropdown-item",children:"Powerups"}),Object(x.jsx)("div",{className:I?"dropdown-item dropdown-item-night":"dropdown-item",children:"Talk"}),Object(x.jsx)("div",{className:I?"dropdown-item dropdown-item-night":"dropdown-item",children:"Predictions"}),Object(x.jsx)("div",{className:I?"dropdown-item dropdown-item-night":"dropdown-item",children:"Help Center"}),t?Object(x.jsx)("div",{className:I?"dropdown-item dropdown-item-night":"dropdown-item",onClick:function(){var e=Object(h.c)();Object(h.e)(e).then((function(){F(!1)})).catch((function(e){console.log(e)}))},children:"Log Out"}):Object(x.jsx)("div",{className:I?"dropdown-item dropdown-item-night":"dropdown-item",onClick:function(){F(!1),p(!0)},children:"Log In / Sign Up"}),t?Object(x.jsx)("div",{className:I?"dropdown-item dropdown-item-night":"dropdown-item",onClick:function(){var e=Object(O.h)(),t=Object(h.c)(),s=function(){var s=Object(d.a)(i.a.mark((function s(){var c,n,r;return i.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return c=Object(O.i)(Object(O.b)(e,"users"),Object(O.k)("email","==",t.currentUser.email)),s.next=3,Object(O.g)(c);case 3:return n=s.sent,r="",n.forEach((function(e){r=e.id})),s.abrupt("return",r);case 7:case"end":return s.stop()}}),s)})));return function(){return s.apply(this,arguments)}}(),c=function(){var t=Object(d.a)(i.a.mark((function t(s){var c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=Object(O.e)(e,"users",s),t.next=3,Object(O.j)(c,{email:Object(O.d)(),username:Object(O.d)(),password:Object(O.d)(),upvoted:Object(O.d)(),downvoted:Object(O.d)()});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n=function(){var t=Object(d.a)(i.a.mark((function t(s){var c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=Object(O.e)(e,"users",s),t.next=3,Object(O.c)(c);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();s().then((function(e){c(e).then((function(){n(e)})).then((function(){Object(h.b)(t.currentUser)})).then((function(){F(!1),console.log("Successfully deleted account")})).catch((function(e){console.log(e)}))}))},children:"Delete Account"}):null]}):null]})]}),b?Object(x.jsx)(f,{setLogInForm:p,setSignUpForm:y,logIn:!0}):null,N?Object(x.jsx)(f,{setLogInForm:p,setSignUpForm:y,logIn:!1}):null]})},N=function(e){k(e);var t=new Date,s=[],c=[];e.forEach((function(e){(t.getTime()/1e3-e.date.seconds)/60/60<=24?s.push(e):c.push(e)})),y(s),e=s.concat(c).slice()},y=function(e){e.sort((function(e,t){return t.upvotes-t.downvotes-(e.upvotes-e.downvotes)}))},k=function(e){e.sort((function(e,t){return t.date-e.date}))},C=(s(47),function(e){var t=e.posts,s=e.setPosts,n=e.comments,r=e.setComments,o=Object(c.useState)("hot"),a=Object(l.a)(o,2),i=a[0],d=a[1],u=Object(c.useState)("best"),b=Object(l.a)(u,2),j=b[0],m=b[1],h=Object(c.useState)(!1),O=Object(l.a)(h,2),p=O[0],v=O[1],f=function(e){var c;c=t?t.slice():n.slice(),"hot"===e?(N(c),t?d("hot"):m("hot")):"best"===e?(c.sort((function(e,t){var s=0===e.downvotes?e.upvotes:e.upvotes/e.downvotes;return(0===t.downvotes?t.upvotes:t.upvotes/t.downvotes)-s})),t?d("best"):m("best")):"top"===e?(y(c),t?d("top"):m("top")):"new"===e?(k(c),t?d("new"):m("new")):"old"===e?(!function(e){e.sort((function(e,t){return e.date-t.date}))}(c),t?d("old"):m("old")):"controversial"===e&&n&&(!function(e){e.forEach((function(e){var t=e.replies.length;e.replies>0&&function e(s){s.forEach((function(s){t++,s.replies.length>0&&e(s.replies)}))}(e.replies),e.totalReplies=t})),e.sort((function(e,t){return t.totalReplies-e.totalReplies})),e.forEach((function(e){delete e.totalReplies}))}(c),t?d("controversial"):m("controversial")),t?s(c):r(c)};return Object(x.jsx)("div",{className:"sortbar",children:t?Object(x.jsxs)("div",{className:"sortbar-posts",children:[Object(x.jsx)("div",{className:"sortbar-btn ".concat("hot"===i?"sortbar-btn-active":""),onClick:function(){"hot"!==i&&f("hot")},children:"Hot"}),Object(x.jsx)("div",{className:"sortbar-btn ".concat("best"===i?"sortbar-btn-active":""),onClick:function(){"best"!==i&&f("best")},children:"Best"}),Object(x.jsx)("div",{className:"sortbar-btn ".concat("top"===i?"sortbar-btn-active":""),onClick:function(){"top"!==i&&f("top")},children:"Top"}),Object(x.jsx)("div",{className:"sortbar-btn ".concat("new"===i?"sortbar-btn-active":""),onClick:function(){"new"!==i&&f("new")},children:"New"}),Object(x.jsx)("div",{className:"sortbar-btn ".concat("old"===i?"sortbar-btn-active":""),onClick:function(){"old"!==i&&f("old")},children:"Old"})]}):Object(x.jsx)("div",{className:"sortbar-comments",children:Object(x.jsxs)("div",{className:"sortbar-comments-btn",onClick:function(){v(!p)},children:["best"===j?Object(x.jsx)("div",{children:"Sort By: Best"}):null,"hot"===j?Object(x.jsx)("div",{children:"Sort By: Hot"}):null,"top"===j?Object(x.jsx)("div",{children:"Sort By: Top"}):null,"new"===j?Object(x.jsx)("div",{children:"Sort By: New"}):null,"old"===j?Object(x.jsx)("div",{children:"Sort By: Old"}):null,"controversial"===j?Object(x.jsx)("div",{children:"Sort By: Controversial"}):null,p?Object(x.jsxs)("div",{className:"sortbar-comments-dropdown",children:[Object(x.jsx)("div",{className:"sortbar-comments-dropdown-item",onClick:function(){"best"!==j&&f("best")},children:"Best"}),Object(x.jsx)("div",{className:"sortbar-comments-dropdown-item",onClick:function(){"hot"!==j&&f("hot")},children:"Hot"}),Object(x.jsx)("div",{className:"sortbar-comments-dropdown-item",onClick:function(){"top"!==j&&f("top")},children:"Top"}),Object(x.jsx)("div",{className:"sortbar-comments-dropdown-item",onClick:function(){"new"!==j&&f("new")},children:"New"}),Object(x.jsx)("div",{className:"sortbar-comments-dropdown-item",onClick:function(){"old"!==j&&f("old")},children:"Old"}),Object(x.jsx)("div",{className:"sortbar-comments-dropdown-item",onClick:function(){"controversial"!==j&&f("controversial")},children:"Controversial"})]}):null]})})})}),S=function(e){return Math.abs(e)>=1e3&&Math.abs(e)<1e6&&(e=(e/1e3).toFixed(1)+"k"),Math.abs(e)>=1e6&&Math.abs(e)<1e9&&(e=(e/1e6).toFixed(1)+"m"),Math.abs(e)>=1e9&&(e=(e/1e9).toFixed(1)+"b"),e},F=function(e){var t,s=31536e3,c=2592e3,n=86400,r=(Date.now()-1e3*e)/1e3,o=Math.floor(r/s),a=Math.floor((r-o*s)/c),i=Math.floor((r-o*s-a*c)/n),d=Math.floor((r-o*s-a*c-i*n)/3600),l=Math.floor((r-o*s-a*c-i*n-3600*d)/60);if(1===o)t=o+" year";else if(o>1)t=o+" years";else if(1===a)t=a+" month";else if(a>1)t=a+" months";else if(1===i)t=i+" day";else if(i>1)t=i+" days";else if(1===d)t=d+" hour";else if(d>1)t=d+" hours";else if(1===l)t=l+" minute";else if(l>1)t=l+" minutes";else if(0===l)return"Just now";return t+" ago"},P=(s(48),function(e){var t=e.user,s=e.setUser,n=e.propSlug,r=e.post,o=e.setPost,a=e.posts,u=e.setPosts,b=e.activeFlairs,h=e.pickFlair,p=e.postPage,f=Object(m.i)().slug;n&&(f=n);var g=Object(c.useState)(!1),w=Object(l.a)(g,2),N=w[0],y=w[1],k=Object(c.useState)(!1),C=Object(l.a)(k,2),P=C[0],E=C[1],I=Object(c.useState)(!1),U=Object(l.a)(I,2),M=U[0],B=U[1];Object(c.useEffect)((function(){t&&t.upvoted.includes(r.id)?y(!0):y(!1),t&&t.downvoted.includes(r.id)?E(!0):E(!1)}),[t,r.id]);var L=function(){var e=Object(d.a)(i.a.mark((function e(c){var n,d,l,b,j,m,h,x,f,g;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(O.h)(),d=Object(O.e)(n,"posts",r.id),l=Object(O.e)(n,"users",t.id),b=t.upvoted.slice(),j=t.downvoted.slice(),"up"!==c||N?"down"!==c||P||j.push(r.id):b.push(r.id),N?(m=t.upvoted.indexOf(r.id),b.splice(m,1)):P&&(h=t.downvoted.indexOf(r.id),j.splice(h,1)),s(Object(v.a)(Object(v.a)({},t),{},{upvoted:b,downvoted:j})),x=r.upvotes,f=r.downvotes,"up"===c?(N?x--:x++,P&&f--):(P?f--:f++,N&&x--),e.next=13,Object(O.j)(d,{upvotes:x,downvotes:f});case 13:return e.next=15,Object(O.j)(l,{upvoted:b,downvoted:j});case 15:(g=a.slice()).forEach((function(e){e.id===r.id&&(e.upvotes=x,e.downvotes=f)})),u(g),p&&o(Object(v.a)(Object(v.a)({},r),{},{upvotes:x,downvotes:f}));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsx)("div",{className:"post-box-container",children:M?Object(x.jsx)(m.a,{to:"/"}):Object(x.jsxs)("div",{className:"post-box",children:[Object(x.jsxs)("div",{className:"post-box-votes-container",children:[Object(x.jsx)("div",{className:"post-box-upvote-btn ".concat(t&&N?"post-box-upvoted":""),onClick:t?function(){L("up")}:null}),Object(x.jsx)("div",{className:"post-box-votes",children:S(r.upvotes-r.downvotes)}),Object(x.jsx)("div",{className:"post-box-downvote-btn ".concat(t&&P?"post-box-downvoted":""),onClick:t?function(){L("down")}:null})]}),Object(x.jsxs)("div",{className:"post-box-details",children:[Object(x.jsxs)("div",{className:"post-box-meta",children:[n?Object(x.jsxs)(j.b,{to:"/r/".concat(n),className:"post-box-subreddit",children:["r/",n]}):null,Object(x.jsxs)("span",{className:"post-box-author",children:["Posted by u/",r.author]}),Object(x.jsx)("span",{className:"post-box-date",children:F(r.date.seconds)})]}),Object(x.jsxs)("div",{className:"post-box-title",children:[b?r.flairs.map((function(e,t){return Object(x.jsx)("div",{className:"post-box-flair ".concat(b.includes(e)?"post-box-flair-active":null),onClick:function(){h(e)},children:p?Object(x.jsx)(j.b,{to:"/r/".concat(f),children:e}):e},t)})):null,Object(x.jsx)("h3",{children:r.title})]}),Object(x.jsx)("div",{className:"post-box-text",children:r.text}),Object(x.jsxs)("div",{className:"post-box-btns-container",children:[Object(x.jsxs)(j.b,{to:"/r/".concat(f,"/comments/").concat(r.id,"/").concat(r.title),className:"post-box-btn",children:[r.comments," comments"]}),t&&r.author===t.username?Object(x.jsx)("div",{className:"post-box-btn",onClick:function(){var e=Object(O.h)(),t=function(){var t=Object(d.a)(i.a.mark((function t(s){var c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=Object(O.e)(e,"posts",s),t.next=3,Object(O.j)(c,{author:Object(O.d)(),comments:Object(O.d)(),date:Object(O.d)(),downvotes:Object(O.d)(),subreddit:Object(O.d)(),text:Object(O.d)(),title:Object(O.d)(),upvotes:Object(O.d)()});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s=function(){var t=Object(d.a)(i.a.mark((function t(s){var c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=Object(O.e)(e,"posts",s),t.next=3,Object(O.c)(c);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();t(r.id).then((function(){s(r.id)})).then((function(){B(!0)})).catch((function(e){console.log(e)}))},children:"Delete"}):null]})]})]})})}),E=(s(49),function(e){var t=e.user,s=e.setUser,n=Object(c.useState)([]),r=Object(l.a)(n,2),o=r[0],a=r[1];return Object(c.useEffect)((function(){var e=function(){var e=Object(d.a)(i.a.mark((function e(){var t,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(O.h)(),e.next=3,Object(O.g)(Object(O.b)(t,"posts"));case 3:s=e.sent,c=[],s.forEach((function(e){c.push(Object(v.a)(Object(v.a)({},e.data()),{},{id:e.id}))})),N(c),a(c.slice());case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(x.jsxs)("div",{className:"home",children:[Object(x.jsx)("div",{className:"home-header",children:"Popular posts"}),Object(x.jsxs)("div",{className:"home-body",children:[Object(x.jsxs)("div",{className:"home-posts-container",children:[Object(x.jsx)(C,{posts:o,setPosts:a}),0!==o.length?o.map((function(e){return Object(x.jsx)(P,{user:t,propSlug:e.subreddit,setUser:s,post:e,posts:o,setPosts:a},e.id)})):null]}),Object(x.jsxs)("div",{className:"home-sidebar",children:[Object(x.jsxs)("div",{className:"home-sidebar-section",children:[Object(x.jsx)("div",{className:"home-sidebar-section-header",children:"About"}),Object(x.jsxs)("div",{className:"home-sidebar-section-content",children:["Fakeddit is a project made to simulate a popular website. Created through\xa0",Object(x.jsx)("a",{href:"https://www.theodinproject.com",children:"TheOdinProject"})," online course.",Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),"View source code ",Object(x.jsx)("a",{href:"https://github.com/RedRaptor10/fakeddit",children:"here"}),".",Object(x.jsx)("div",{className:"home-sidebar-section-content-created",children:"Created Dec 17, 2021"})]})]}),Object(x.jsxs)("div",{className:"home-sidebar-section",children:[Object(x.jsx)("div",{className:"home-sidebar-section-header",children:"Features"}),Object(x.jsx)("div",{className:"home-sidebar-section-content",children:Object(x.jsxs)("ul",{children:[Object(x.jsx)("li",{children:"Create / delete account"}),Object(x.jsx)("li",{children:"Log in / log out account"}),Object(x.jsx)("li",{children:"Browse different subfakeddits"}),Object(x.jsx)("li",{children:"Create / delete posts & comments"}),Object(x.jsx)("li",{children:"Upvote / downvote posts & comments"}),Object(x.jsx)("li",{children:"Collapse comments"}),Object(x.jsx)("li",{children:"Sort posts / comments"}),Object(x.jsx)("li",{children:"Filter posts by flairs"}),Object(x.jsx)("li",{children:"Search posts"})]})})]}),Object(x.jsxs)("div",{className:"home-sidebar-section",children:[Object(x.jsx)("div",{className:"home-sidebar-section-header",children:"Technologies"}),Object(x.jsx)("div",{className:"home-sidebar-section-content",children:Object(x.jsxs)("ul",{children:[Object(x.jsx)("li",{children:"React"}),Object(x.jsx)("li",{children:"Firebase"}),Object(x.jsx)("li",{children:"JavaScript"}),Object(x.jsx)("li",{children:"HTML"}),Object(x.jsx)("li",{children:"CSS"})]})})]})]})]})]})}),I=(s(50),function(){var e=Object(m.i)().searchQuery,t=Object(c.useState)([]),s=Object(l.a)(t,2),n=s[0],r=s[1];return Object(c.useEffect)((function(){var t=function(){var t=Object(d.a)(i.a.mark((function t(){var s,c,n,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=Object(O.h)(),c=Object(O.i)(Object(O.b)(s,"posts"),Object(O.k)("title",">=",e),Object(O.k)("title","<=",e+"\uf8ff")),t.next=4,Object(O.g)(c);case 4:n=t.sent,o=[],n.forEach((function(e){o.push(Object(v.a)(Object(v.a)({},e.data()),{},{id:e.id}))})),r(o);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e]),Object(x.jsx)("div",{className:"search",children:Object(x.jsx)("div",{className:"search-results",children:n.map((function(e,t){return Object(x.jsxs)("div",{className:"search-result",children:[Object(x.jsxs)("div",{className:"search-result-meta",children:[Object(x.jsx)("span",{className:"search-result-subreddit",children:Object(x.jsxs)(j.b,{to:"/r/".concat(e.subreddit),children:["r/",e.subreddit]})}),Object(x.jsxs)("span",{className:"search-result-author",children:["Posts by u/",e.author]}),Object(x.jsx)("span",{className:"search-result-date",children:F(e.date.seconds)})]}),Object(x.jsx)("div",{className:"search-result-title",children:Object(x.jsx)(j.b,{to:"/r/".concat(e.subreddit,"/comments/").concat(e.id,"/").concat(e.title),children:e.title})}),Object(x.jsxs)("div",{className:"search-result-details",children:[Object(x.jsxs)("span",{className:"search-result-upvotes",children:[S(e.upvotes)," upvotes"]}),Object(x.jsxs)("span",{className:"search-result-comments",children:[S(e.comments)," comments"]})]})]},t)}))})})}),U=(s(51),function(){return Object(x.jsxs)("div",{className:"footer",children:[Object(x.jsxs)("div",{className:"footer-content",children:[Object(x.jsxs)("ul",{children:[Object(x.jsx)("li",{children:"About"}),Object(x.jsx)("li",{children:"Careers"}),Object(x.jsx)("li",{children:"Press"})]}),Object(x.jsxs)("ul",{children:[Object(x.jsx)("li",{children:"Advertise"}),Object(x.jsx)("li",{children:"Blog"}),Object(x.jsx)("li",{children:"Help"})]}),Object(x.jsxs)("ul",{children:[Object(x.jsx)("li",{children:"Fakeddit Coins"}),Object(x.jsx)("li",{children:"Fakeddit Premium"}),Object(x.jsx)("li",{children:"Fakeddit Gifts"})]}),Object(x.jsxs)("ul",{children:[Object(x.jsx)("li",{children:"Facebook"}),Object(x.jsx)("li",{children:"Twitter"}),Object(x.jsx)("li",{children:"Instagram"})]})]}),Object(x.jsx)("div",{className:"footer-bottom",children:Object(x.jsxs)("ul",{children:[Object(x.jsx)("li",{children:"Content Policy"}),Object(x.jsx)("li",{children:"Privacy Policy"}),Object(x.jsx)("li",{children:"User Agreement"}),Object(x.jsx)("li",{children:"Mod Policy"}),Object(x.jsxs)("li",{children:["Fakeddit created through ",Object(x.jsx)("a",{href:"https://www.theodinproject.com/",children:"TheOdinProject"})," online course."]})]})})]})}),M=function(e){var t=new Date(1e3*e),s=t.getFullYear(),c=t.getMonth(),n=t.getDate();return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][c]+" "+n+", "+s},B=(s(52),function(e){var t=e.user,s=e.slug,c=e.subreddit,n=e.colors,r=e.activeFlairs,o=e.pickFlair,a=e.postPage,i=c.description,d=c.members,l=c.color,u=c.flairs,b=c.created;return Object(x.jsxs)("div",{className:"subreddit-sidebar",children:[Object(x.jsxs)("div",{className:"subreddit-sidebar-section",children:[Object(x.jsx)("div",{className:"subreddit-sidebar-section-header",style:l?{background:n[l],color:"rgb(255, 255, 255)"}:null,children:"About Community"}),Object(x.jsxs)("div",{className:"subreddit-sidebar-section-content",children:[Object(x.jsx)("div",{className:"subreddit-sidebar-section-content-description",children:i}),Object(x.jsxs)("div",{className:"subreddit-sidebar-section-content-members",children:[Object(x.jsxs)("div",{className:"subreddit-sidebar-section-content-members-section",children:[Object(x.jsx)("span",{className:"subreddit-sidebar-section-content-members-number",children:S(d)}),Object(x.jsx)("br",{}),"Members"]}),Object(x.jsxs)("div",{className:"subreddit-sidebar-section-content-members-section",children:[Object(x.jsx)("span",{className:"subreddit-sidebar-section-content-members-number",children:"0"}),Object(x.jsx)("br",{}),"Online"]})]}),Object(x.jsxs)("div",{className:"subreddit-sidebar-section-content-created",children:["Created ",M(b.seconds)]}),t?Object(x.jsx)("div",{className:"subreddit-sidebar-section-create",children:Object(x.jsx)(j.b,{to:"submit",state:{flairs:u},children:Object(x.jsx)("div",{className:"subreddit-sidebar-section-create-btn",style:l?{background:n[l],color:"rgb(255, 255, 255)"}:null,children:"Create Post"})})}):null]})]}),Object(x.jsxs)("div",{className:"subreddit-sidebar-section",children:[Object(x.jsx)("div",{className:"subreddit-sidebar-section-header",style:l?{background:n[l],color:"rgb(255, 255, 255)"}:null,children:"Filter by Flair"}),Object(x.jsx)("div",{className:"subreddit-sidebar-section-flairs",children:u.map((function(e,t){return Object(x.jsx)("div",{className:"subreddit-sidebar-section-flair\n                                ".concat(r.includes(e)?"subreddit-sidebar-section-flair-active":null),onClick:function(){o(e)},children:a?Object(x.jsx)(j.b,{to:"/r/".concat(s),children:e}):e},t)}))})]})]})}),L=n.a.createContext({}),A=(s(53),function(e){var t=e.user,s=e.setUser,n=Object(m.i)().slug,r=Object(c.useState)({slug:"",title:"",banner:"",icon:"",members:0,color:"",flairs:[],description:"",created:0}),o=Object(l.a)(r,2),a=o[0],u=o[1],b=Object(c.useState)([]),j=Object(l.a)(b,2),h=j[0],p=j[1],f=Object(c.useState)([]),g=Object(l.a)(f,2),w=g[0],N=g[1],y=a.title,k=a.banner,S=a.icon,F=a.color,E={LightBlue:"rgb(0, 121, 211)",DarkBlue:"rgb(0, 64, 121)"};Object(c.useEffect)((function(){var e=function(){var e=Object(d.a)(i.a.mark((function e(){var t,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(O.h)(),s=Object(O.e)(t,"subreddits",n),e.next=4,Object(O.f)(s);case 4:if(!(c=e.sent).exists()){e.next=9;break}return e.abrupt("return",c.data());case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(d.a)(i.a.mark((function e(){var t,s,c,r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(O.h)(),s=Object(O.b)(t,"posts"),c=Object(O.i)(s,Object(O.k)("subreddit","==",n)),e.next=5,Object(O.g)(c);case 5:r=e.sent,o=[],r.forEach((function(e){o.push(Object(v.a)(Object(v.a)({},e.data()),{},{id:e.id}))})),o.sort((function(e,t){return t.date-e.date})),p(o.slice());case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e().then((function(e){u(e)})).catch((function(e){console.log(e)})),t()}),[n]);var I=function(e){var t=w.slice();if(w.includes(e)){var s=w.indexOf(e);t.splice(s,1)}else t.push(e);N(t)};return Object(x.jsxs)("div",{className:"subreddit",children:[Object(x.jsx)("div",{className:"subreddit-banner",style:{backgroundImage:"url("+k+")",backgroundColor:E[F]}}),Object(x.jsx)("div",{className:"subreddit-header",children:Object(x.jsxs)("div",{className:"subreddit-header-content",children:[Object(x.jsx)("img",{className:"subreddit-icon",url:S,alt:""}),Object(x.jsxs)("div",{className:"subreddit-title",children:[Object(x.jsx)("h1",{children:y}),Object(x.jsxs)("div",{className:"subreddit-name",children:["r/",n]})]})]})}),Object(x.jsxs)("div",{className:"subreddit-body",children:[Object(x.jsxs)("div",{className:"subreddit-posts-container",children:[Object(x.jsx)(C,{posts:h,setPosts:p}),0!==h.length?h.map((function(e){return 0===w.length||function(e){var t=!1;return e.forEach((function(e){w.includes(e)&&(t=!0)})),t}(e.flairs)?Object(x.jsx)(P,{user:t,setUser:s,post:e,posts:h,setPosts:p,activeFlairs:w,pickFlair:I},e.id):null})):null]}),Object(x.jsx)(B,{user:t,slug:n,subreddit:a,colors:E,activeFlairs:w,pickFlair:I})]}),Object(x.jsxs)(L.Provider,{value:{subreddit:a,colors:E,posts:h,setPosts:p,activeFlairs:w,pickFlair:I},children:[Object(x.jsx)(m.b,{})," "]})]})}),q=function(e){var t=e.user,s=Object(m.i)().slug,n=Object(c.useState)(""),r=Object(l.a)(n,2),o=r[0],a=r[1],u=Object(c.useState)(""),b=Object(l.a)(u,2),j=b[0],h=b[1],p=Object(m.g)().state.flairs,v=Object(c.useState)([]),f=Object(l.a)(v,2),g=f[0],w=f[1],N=Object(c.useState)(""),y=Object(l.a)(N,2),k=y[0],C=y[1],S=Object(m.h)(),F=function(e){var t=e.target.innerHTML,s=g.slice();if(g.includes(t)){var c=g.indexOf(t);s.splice(c,1)}else s.push(t);w(s)},P=function(){var e=Object(d.a)(i.a.mark((function e(){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===o||""===j){e.next=6;break}return c=Object(O.h)(),e.next=4,Object(O.a)(Object(O.b)(c,"posts"),{author:t.username,comments:0,date:new Date,downvotes:0,flairs:g,subreddit:s,text:j,title:o,upvotes:1}).then((function(){S("/r/"+s)}));case 4:e.next=7;break;case 6:C("All fields required.");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsx)("div",{className:"submit",children:t?Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{children:"Create a post"}),Object(x.jsxs)("div",{children:["r/",s]}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{type:"text",placeholder:"My first post",onChange:function(e){a(e.target.value)}})}),Object(x.jsx)("div",{children:Object(x.jsx)("textarea",{onChange:function(e){h(e.target.value)}})}),""!==k?Object(x.jsx)("div",{className:"error-msg",children:k}):null,p.map((function(e,t){return Object(x.jsx)("div",{className:"flair",onClick:F,children:e},t)})),Object(x.jsx)("button",{className:"post-submit-btn",onClick:P,children:"Post"})]}):null})},D=(s(54),function(e){var t=e.user,s=e.post,n=e.setPost,r=e.parent,o=Object(m.i)().slug,a=Object(c.useState)(""),u=Object(l.a)(a,2),b=u[0],j=u[1],h=Object(c.useState)(""),p=Object(l.a)(h,2),g=p[0],w=p[1],N=Object(c.useState)(!1),y=Object(l.a)(N,2),k=y[0],C=y[1],S=Object(c.useState)(!1),F=Object(l.a)(S,2),P=F[0],E=F[1],I=function(){var e=Object(d.a)(i.a.mark((function e(){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===b){e.next=6;break}return c=Object(O.h)(),e.next=4,Object(O.a)(Object(O.b)(c,"comments"),{author:t.username,date:new Date,downvotes:0,parentId:r,postId:s.id,replies:[],subreddit:o,text:b,upvotes:1}).then((function(){document.querySelectorAll(".reply-input").forEach((function(e){e.value=""})),j(""),w("")})).then((function(){var e=Object(O.e)(c,"posts",s.id);Object(d.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(O.j)(e,{comments:s.comments+1}).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})))(),n(Object(v.a)(Object(v.a)({},s),{},{comments:s.comments+1}))}));case 4:e.next=7;break;case 6:w("All fields required.");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"reply",children:[t?Object(x.jsxs)("div",{className:"reply-form ".concat(""===r?"reply-form-post":""),children:[Object(x.jsx)("textarea",{className:"reply-input",placeholder:"Comment on this post",onChange:function(e){j(e.target.value)}}),""!==g?Object(x.jsx)("div",{className:"error-msg",children:g}):null,Object(x.jsx)("button",{className:"reply-submit-btn",onClick:I,children:"Reply"})]}):Object(x.jsxs)("div",{children:[Object(x.jsx)("span",{children:"Log in or Sign up to leave a comment"}),Object(x.jsx)("button",{className:"login-btn",onClick:function(){C(!0)},children:"Log In"}),Object(x.jsx)("button",{className:"signup-btn",onClick:function(){E(!0)},children:"Sign Up"})]}),k?Object(x.jsx)(f,{setLogInForm:C,setSignUpForm:E,logIn:!0}):null,P?Object(x.jsx)(f,{setLogInForm:C,setSignUpForm:E,logIn:!1}):null]})}),T=function e(t){var s=t.user,n=t.setUser,r=t.comment,o=t.comments,a=t.setComments,u=t.post,b=t.setPost,j=Object(c.useState)(!1),m=Object(l.a)(j,2),h=m[0],p=m[1],f=Object(c.useState)(!1),g=Object(l.a)(f,2),w=g[0],N=g[1],y=Object(c.useState)(!1),k=Object(l.a)(y,2),C=k[0],P=k[1],E=Object(c.useState)(!1),I=Object(l.a)(E,2),U=I[0],M=I[1];Object(c.useEffect)((function(){s&&s.upvoted.includes(r.id)?P(!0):P(!1),s&&s.downvoted.includes(r.id)?M(!0):M(!1)}),[s,r.id]);var B=function(){var e=Object(d.a)(i.a.mark((function e(t){var c,d,l,u,b,j,m,h,p,x;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(O.h)(),d=Object(O.e)(c,"comments",r.id),l=Object(O.e)(c,"users",s.id),u=s.upvoted.slice(),b=s.downvoted.slice(),"up"!==t||C?"down"!==t||U||b.push(r.id):u.push(r.id),C?(j=s.upvoted.indexOf(r.id),u.splice(j,1)):U&&(m=s.downvoted.indexOf(r.id),b.splice(m,1)),n(Object(v.a)(Object(v.a)({},s),{},{upvoted:u,downvoted:b})),h=r.upvotes,p=r.downvotes,"up"===t?(C?h--:h++,U&&p--):(U?p--:p++,C&&h--),e.next=13,Object(O.j)(d,{upvotes:h,downvotes:p});case 13:return e.next=15,Object(O.j)(l,{upvoted:u,downvoted:b});case 15:(x=o.slice()).forEach((function(e){e.id===r.id&&(e.upvotes=h,e.downvotes=p)})),a(x);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"comment-container",id:r.id,children:[Object(x.jsxs)("div",{className:"comment-sidebar ".concat(h?"comment-collapsed":""),children:[h?Object(x.jsx)("div",{className:"comment-expand",onClick:function(){p(!1)}}):null,Object(x.jsx)("div",{className:"comment-avatar"}),h?null:Object(x.jsx)("div",{className:"comment-threadline",onClick:function(){p(!0)}})]}),Object(x.jsxs)("div",{className:"comment",children:[Object(x.jsxs)("div",{className:"comment-details",children:[Object(x.jsxs)("div",{className:"comment-parent",children:[Object(x.jsxs)("div",{className:"comment-meta",children:[Object(x.jsx)("span",{className:"comment-author\n                                ".concat(r.author===u.author?"comment-author-poster":"","\n                                ").concat(s&&r.author===s.username?"comment-author-user":""),children:r.author}),Object(x.jsx)("span",{className:"comment-date",children:F(r.date.seconds)})]}),h?null:Object(x.jsx)("div",{className:"comment-text",children:r.text})]}),h?null:Object(x.jsxs)("div",{className:"comment-btns-container",children:[Object(x.jsxs)("div",{className:"comment-votes-container",children:[Object(x.jsx)("div",{className:"comment-upvote-btn ".concat(s&&C?"comment-upvoted":""),onClick:s?function(){B("up")}:null}),Object(x.jsx)("div",{className:"comment-votes",children:S(r.upvotes-r.downvotes)}),Object(x.jsx)("div",{className:"comment-downvote-btn ".concat(s&&U?"comment-downvoted":""),onClick:s?function(){B("down")}:null})]}),s?Object(x.jsx)("div",{className:"comment-btn",onClick:function(){N(!w)},children:"Reply"}):null,s&&r.author===s.username?Object(x.jsx)("div",{className:"comment-btn",onClick:function(){var e=Object(O.h)(),t=function(){var t=Object(d.a)(i.a.mark((function t(s){var c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=Object(O.e)(e,"comments",s),t.next=3,Object(O.j)(c,{author:Object(O.d)(),date:Object(O.d)(),downvotes:Object(O.d)(),parentId:Object(O.d)(),postId:Object(O.d)(),replies:Object(O.d)(),subreddit:Object(O.d)(),text:Object(O.d)(),upvotes:Object(O.d)()});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s=function(){var t=Object(d.a)(i.a.mark((function t(s){var c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=Object(O.e)(e,"comments",s),t.next=3,Object(O.c)(c);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();t(r.id).then((function(){s(r.id)})).then((function(){var t=Object(O.e)(e,"posts",u.id);Object(d.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.j)(t,{comments:u.comments-1}).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})))(),b(Object(v.a)(Object(v.a)({},u),{},{comments:u.comments-1}))})).catch((function(e){console.log(e)}))},children:"Delete"}):null]})]}),!h&&w?Object(x.jsx)(D,{user:s,post:u,setPost:b,parent:r.id}):null,!h&&r.replies.length>0?Object(x.jsx)("div",{className:"replies",children:r.replies.map((function(t){return Object(x.jsx)(e,{user:s,comment:t,post:u,setPost:b},t.id)}))}):null]})]})},H=(s(55),function(e){var t=e.user,s=e.setUser,n=e.post,r=e.setPost,o=Object(c.useState)([]),a=Object(l.a)(o,2),u=a[0],b=a[1];return Object(c.useEffect)((function(){var e=[],t=function(){var t=Object(d.a)(i.a.mark((function t(){var s,c,r,o,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=Object(O.h)(),c=Object(O.b)(s,"comments"),r=Object(O.i)(c,Object(O.k)("postId","==",n.id)),t.next=5,Object(O.g)(r);case 5:o=t.sent,a=[],o.forEach((function(e){a.push(Object(v.a)(Object(v.a)({},e.data()),{},{id:e.id}))})),a.sort((function(e,t){return t.upvotes-t.downvotes-(e.upvotes-e.downvotes)})),e=a.slice();case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t().then((function(){var t=[];e.forEach((function(e){""===e.parentId&&t.push(e)}));!function t(s){s.forEach((function(s){e.forEach((function(e){e.parentId===s.id&&s.replies.push(e)})),s.replies.length>0&&t(s.replies)}))}(t),b(t)})).catch((function(e){console.log(e)}))}),[n]),Object(x.jsxs)("div",{className:"comments",children:[Object(x.jsx)(C,{comments:u,setComments:b}),u.map((function(e){return Object(x.jsx)(T,{user:t,setUser:s,comment:e,comments:u,setComments:b,post:n,setPost:r},e.id)}))]})}),R=(s(56),function(e){var t=e.user,s=e.setUser,r=Object(m.i)(),o=r.slug,a=r.postId,u=Object(c.useState)({id:"",author:"",comments:0,date:"",downvotes:0,flairs:[],postSubreddit:o,text:"",title:"",upvotes:0}),b=Object(l.a)(u,2),h=b[0],p=b[1],f=h.downvotes,g=h.title,w=h.upvotes,N=n.a.useContext(L),y=N.subreddit,k=N.colors,C=N.posts,F=N.setPosts,E=N.activeFlairs,I=N.pickFlair;return Object(c.useEffect)((function(){var e=function(){var e=Object(d.a)(i.a.mark((function e(){var t,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(O.h)(),s=Object(O.e)(t,"posts",a),e.next=4,Object(O.f)(s);case 4:if(!(c=e.sent).exists()){e.next=9;break}return e.abrupt("return",Object(v.a)(Object(v.a)({},c.data()),{},{id:c.id}));case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e().then((function(e){p(e)})).catch((function(e){console.log(e)})),document.body.classList.add("no-scroll"),function(){document.body.classList.remove("no-scroll")}}),[o,a]),Object(x.jsxs)("div",{className:"post",children:[Object(x.jsx)(j.b,{to:"/r/".concat(o),children:Object(x.jsx)("div",{className:"canvas post-canvas"})}),Object(x.jsxs)("div",{className:"post-main",children:[Object(x.jsx)("div",{className:"post-header",children:Object(x.jsxs)("div",{className:"post-header-inner",children:[Object(x.jsxs)("div",{className:"post-votes-container",children:[Object(x.jsx)("div",{className:"post-upvote-btn"}),S(w),Object(x.jsx)("div",{className:"post-downvote-btn"}),S(f)]}),Object(x.jsx)("div",{className:"post-title",children:g}),Object(x.jsx)(j.b,{to:"/r/".concat(o),className:"post-close-btn-container",children:Object(x.jsx)("div",{className:"post-close-btn",children:"Close"})})]})}),Object(x.jsxs)("div",{className:"post-body",children:[Object(x.jsxs)("div",{className:"post-content-container",children:[Object(x.jsx)(P,{user:t,setUser:s,post:h,setPost:p,posts:C,setPosts:F,activeFlairs:E,pickFlair:I,postPage:!0}),Object(x.jsx)(D,{user:t,post:h,setPost:p,parent:""}),Object(x.jsx)(H,{user:t,setUser:s,post:h,setPost:p})]}),Object(x.jsx)(B,{user:t,slug:o,subreddit:y,colors:k,activeFlairs:E,pickFlair:I,postPage:!0})]})]})]})}),J=(s(35),function(){var e=function(){if(b&&b.apiKey)return b;throw new Error("No Firebase configuration object provided.")}();Object(u.a)(e);var t=Object(c.useState)(),s=Object(l.a)(t,2),n=s[0],r=s[1];return Object(c.useEffect)((function(){var e=Object(h.c)();e.onAuthStateChanged((function(t){if(t){var s=Object(O.h)(),c=function(){var t=Object(d.a)(i.a.mark((function t(){var c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=Object(O.i)(Object(O.b)(s,"users"),Object(O.k)("email","==",e.currentUser.email)),t.next=3,Object(O.g)(c);case 3:t.sent.forEach((function(e){r({id:e.id,email:e.data().email,username:e.data().username,password:e.data().password,upvoted:e.data().upvoted,downvoted:e.data().downvoted})}));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();c()}else r(null)}))}),[]),Object(x.jsxs)(j.a,{children:[Object(x.jsx)(w,{user:n}),Object(x.jsxs)(m.e,{children:[Object(x.jsx)(m.c,{exact:!0,path:"/",element:Object(x.jsx)(E,{user:n,setUser:r})}),Object(x.jsx)(m.c,{exact:!0,path:"/search/:searchQuery",element:Object(x.jsx)(I,{})}),Object(x.jsx)(m.c,{path:"/r/:slug",element:Object(x.jsx)(A,{user:n,setUser:r}),children:Object(x.jsx)(m.c,{exact:!0,path:"comments/:postId/:postTitle",element:Object(x.jsx)(R,{user:n,setUser:r})})}),Object(x.jsx)(m.c,{exact:!0,path:"/r/:slug/submit",element:Object(x.jsx)(q,{user:n})})]}),Object(x.jsx)(U,{})]})});o.a.render(Object(x.jsx)(n.a.StrictMode,{children:Object(x.jsx)(J,{})}),document.getElementById("root"))}},[[57,1,2]]]);
//# sourceMappingURL=main.ce8fbf99.chunk.js.map