(this.webpackJsonpfakeddit=this.webpackJsonpfakeddit||[]).push([[0],{35:function(e,t,s){},44:function(e,t,s){},46:function(e,t,s){},47:function(e,t,s){},48:function(e,t,s){},49:function(e,t,s){},50:function(e,t,s){},51:function(e,t,s){},52:function(e,t,s){},53:function(e,t,s){},54:function(e,t,s){},55:function(e,t,s){},56:function(e,t,s){},57:function(e,t,s){},58:function(e,t,s){"use strict";s.r(t);var c=s(8),n=s.n(c),r=s(36),a=s.n(r),i=s(0),o=s.n(i),d=s(2),l=s(10),u=s(37),j={apiKey:"AIzaSyDVf2ofyD_gruQEYKvwsTnjF5B55bqtswE",authDomain:"fakeddit-c2fc2.firebaseapp.com",projectId:"fakeddit-c2fc2",storageBucket:"fakeddit-c2fc2.appspot.com",messagingSenderId:"615056824169",appId:"1:615056824169:web:929502b979e546b2f80ff8"};var b=s(17),h=s(13),m=s(23),O=s(7),p=s(5),v=s(14),x=(s(44),s(1)),f=function(e){var t=e.setLogInForm,s=e.setSignUpForm,n=e.logIn,r=e.nightMode,a=Object(c.useState)({email:"",username:"",password:"",confirmPassword:""}),i=Object(l.a)(a,2),u=i[0],j=i[1],b=function(e){j(Object(v.a)(Object(v.a)({},u),{},Object(p.a)({},e.target.name,e.target.value)))},h=function(e){var t=document.querySelector(".error-msg");if(!t){var s=document.querySelector(".log-in-form-submit-btn");(t=document.createElement("div")).classList.add("error-msg"),s.parentNode.insertBefore(t,s)}t.innerHTML=e};return Object(x.jsxs)("div",{className:r?"log-in log-in-dark":"log-in",children:[Object(x.jsx)("div",{className:"canvas log-in-canvas"}),Object(x.jsxs)("div",{className:"log-in-form-container",children:[Object(x.jsx)("div",{className:"log-in-form-close",children:Object(x.jsx)("div",{className:"log-in-form-close-btn",onClick:function(){n?t(!1):s(!1)}})}),n?Object(x.jsxs)("div",{className:"log-in-form",children:[Object(x.jsx)("h1",{children:"Login"}),Object(x.jsxs)("div",{children:["By continuing, you agree to our ",Object(x.jsx)("span",{className:"link",children:"User Agreement"})," and ",Object(x.jsx)("span",{className:"link",children:"Privacy Policy"}),"."]}),Object(x.jsx)("input",{type:"text",name:"username",value:u.username,placeholder:"Username",onChange:b}),Object(x.jsx)("input",{type:"text",name:"password",value:u.password,placeholder:"Password",onChange:b}),Object(x.jsx)("button",{className:"log-in-form-submit-btn",onClick:function(){var e=function(){var e=Object(d.a)(o.a.mark((function e(){var t,s,c,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(O.h)(),s=Object(O.i)(Object(O.b)(t,"users"),Object(O.k)("username","==",u.username)),e.next=4,Object(O.g)(s);case 4:if((c=e.sent).empty){e.next=11;break}return n="",c.forEach((function(e){n=e.data().email})),e.abrupt("return",n);case 11:throw new Error("Invalid username");case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(d.a)(o.a.mark((function e(s,c){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(m.c)(),Object(m.d)(n,s,c).then((function(){t(!1)})).catch((function(e){"auth/wrong-password"===e.code&&h("Wrong password."),console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}();""===u.username||""===u.password?h("All fields required."):e().then((function(e){s(e,u.password)})).catch((function(e){h(e.message)}))},children:"Log In"}),Object(x.jsxs)("div",{className:"log-in-form-bottom",children:[Object(x.jsxs)("div",{children:["Forgot your ",Object(x.jsx)("span",{className:"link",children:"username"})," or ",Object(x.jsx)("span",{className:"link",children:"password"}),"?"]}),Object(x.jsxs)("div",{children:["New to Fakeddit? ",Object(x.jsx)("span",{className:"link",onClick:function(){t(!1),s(!0)},children:"SIGN UP"})]})]})]}):Object(x.jsxs)("div",{className:"log-in-form",children:[Object(x.jsx)("h1",{children:"Sign up"}),Object(x.jsxs)("div",{children:["By continuing, you are setting up a Fakeddit account and agree to our ",Object(x.jsx)("span",{className:"link",children:"User Agreement"})," and ",Object(x.jsx)("span",{className:"link",children:"Privacy Policy"}),"."]}),Object(x.jsx)("input",{type:"text",name:"email",value:u.email,placeholder:"Email",onChange:b}),Object(x.jsx)("input",{type:"text",name:"username",value:u.username,placeholder:"Username",onChange:b}),Object(x.jsx)("input",{type:"text",name:"password",value:u.password,placeholder:"Password",onChange:b}),Object(x.jsx)("input",{type:"text",name:"confirmPassword",value:u.confirmPassword,placeholder:"Confirm Password",onChange:b}),Object(x.jsx)("button",{className:"log-in-form-submit-btn",onClick:function(){var e=function(){var e=Object(d.a)(o.a.mark((function e(){var t,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(O.h)(),s=Object(O.i)(Object(O.b)(t,"users"),Object(O.k)("username","==",u.username)),e.next=4,Object(O.g)(s);case 4:if(e.sent.empty){e.next=7;break}throw new Error("Username already exists.");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(d.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(O.h)(),e.next=3,Object(O.a)(Object(O.b)(t,"users"),{email:u.email,username:u.username,password:u.password,upvoted:[],downvoted:[]});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();""===u.email||""===u.username||""===u.password||""===u.confirmPassword?h("All fields required."):u.password!==u.confirmPassword?h("Passwords do not match."):e().then((function(){var e=Object(m.c)();Object(m.a)(e,u.email,u.password).then(t).then((function(){s(!1)})).catch((function(e){"auth/weak-password"===e.code?h("Password must have at least 6 characters."):"auth/invalid-email"===e.code?h("Invalid email."):"auth/email-already-in-use"===e.code&&h("Email in use."),console.log(e)}))})).catch((function(e){h(e.message),console.log(e)}))},children:"Continue"}),Object(x.jsx)("div",{className:"log-in-form-bottom",children:Object(x.jsxs)("div",{children:["Already a Fakedditor? ",Object(x.jsx)("span",{className:"link",onClick:function(){t(!0),s(!1)},children:"LOG IN"})]})})]})]})]})},g=(s(46),function(e){var t=e.user,s=e.nightMode,n=e.setNightMode,r=Object(c.useState)(""),a=Object(l.a)(r,2),i=a[0],u=a[1],j=Object(c.useState)(!1),p=Object(l.a)(j,2),v=p[0],g=p[1],N=Object(c.useState)(!1),w=Object(l.a)(N,2),k=w[0],y=w[1],C=Object(c.useState)(!1),S=Object(l.a)(C,2),M=S[0],F=S[1],P=Object(h.h)();return Object(x.jsxs)("div",{className:s?"header header-dark":"header",children:[M?Object(x.jsx)("div",{className:"canvas",onClick:function(){F(!1)}}):null,Object(x.jsxs)("div",{className:"header-left",children:[Object(x.jsx)(b.b,{to:"/",children:Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",className:"logo",children:Object(x.jsxs)("g",{children:[Object(x.jsx)("circle",{fill:"#FF4500",cx:"10",cy:"10",r:"10"}),Object(x.jsx)("path",{fill:"#FFFFFF",d:"M6.83 8.24h1.64V6.65A4.26 4.26 0 0 1 9 4.19 2.92 2.92 0 0 1 11.54 3a10.31 10.31 0 0 1 2.94.29l-.41 2.43a5.54 5.54 0 0 0-1.32-.2 1 1 0 0 0-1.21.87v1.85h2.62L14 10.61h-2.46v8.24H8.47v-8.24H6.83V8.24z"})]})})}),Object(x.jsx)(b.b,{to:"/",children:Object(x.jsx)("div",{className:"header-title",children:"fakeddit"})})]}),Object(x.jsx)("div",{className:"header-center",children:Object(x.jsx)("div",{className:"search-box",children:Object(x.jsx)("form",{children:Object(x.jsx)("input",{className:"search-field",type:"search",placeholder:"Search Fakeddit",onChange:function(e){u(e.target.value)},onKeyDown:function(e){13===e.keyCode&&P("/search/"+i)}})})})}),Object(x.jsxs)("div",{className:"header-right",children:[t?null:Object(x.jsxs)("div",{className:"header-btns-container",children:[Object(x.jsx)("button",{className:"header-btn login-btn",onClick:function(){g(!0)},children:"Log In"}),Object(x.jsx)("button",{className:"header-btn signup-btn",onClick:function(){y(!0)},children:"Sign Up"})]}),Object(x.jsxs)("div",{className:"user-btn",children:[Object(x.jsx)("div",{className:"user-dropdown-btn",onClick:function(){F(!0)}}),M?Object(x.jsxs)("div",{className:"user-dropdown-menu",children:[Object(x.jsx)("div",{className:"dropdown-header",children:"VIEW OPTIONS"}),Object(x.jsxs)("div",{className:"dropdown-item",onClick:function(){s?(document.body.classList.remove("body-dark"),n(!1)):(document.body.classList.add("body-dark"),n(!0))},children:["Night Mode",Object(x.jsx)("button",{className:"night-mode-btn",type:"button",children:Object(x.jsx)("div",{className:"night-mode-btn-switch"})})]}),Object(x.jsx)("div",{className:"dropdown-header",children:"MORE STUFF"}),Object(x.jsx)("div",{className:"dropdown-item",children:"Coins"}),Object(x.jsx)("div",{className:"dropdown-item",children:"Premium"}),Object(x.jsx)("div",{className:"dropdown-item",children:"Powerups"}),Object(x.jsx)("div",{className:"dropdown-item",children:"Talk"}),Object(x.jsx)("div",{className:"dropdown-item",children:"Predictions"}),Object(x.jsx)("div",{className:"dropdown-item",children:"Help Center"}),t?Object(x.jsx)("div",{className:"dropdown-item",onClick:function(){var e=Object(m.c)();Object(m.e)(e).then((function(){F(!1)})).catch((function(e){console.log(e)}))},children:"Log Out"}):Object(x.jsx)("div",{className:"dropdown-item",onClick:function(){F(!1),g(!0)},children:"Log In / Sign Up"}),t?Object(x.jsx)("div",{className:"dropdown-item",onClick:function(){var e=Object(O.h)(),t=Object(m.c)(),s=function(){var s=Object(d.a)(o.a.mark((function s(){var c,n,r;return o.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return c=Object(O.i)(Object(O.b)(e,"users"),Object(O.k)("email","==",t.currentUser.email)),s.next=3,Object(O.g)(c);case 3:return n=s.sent,r="",n.forEach((function(e){r=e.id})),s.abrupt("return",r);case 7:case"end":return s.stop()}}),s)})));return function(){return s.apply(this,arguments)}}(),c=function(){var t=Object(d.a)(o.a.mark((function t(s){var c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=Object(O.e)(e,"users",s),t.next=3,Object(O.j)(c,{email:Object(O.d)(),username:Object(O.d)(),password:Object(O.d)(),upvoted:Object(O.d)(),downvoted:Object(O.d)()});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n=function(){var t=Object(d.a)(o.a.mark((function t(s){var c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=Object(O.e)(e,"users",s),t.next=3,Object(O.c)(c);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();s().then((function(e){c(e).then((function(){n(e)})).then((function(){Object(m.b)(t.currentUser)})).then((function(){F(!1),console.log("Successfully deleted account")})).catch((function(e){console.log(e)}))}))},children:"Delete Account"}):null]}):null]})]}),v?Object(x.jsx)(f,{setLogInForm:g,setSignUpForm:y,logIn:!0,nightMode:s}):null,k?Object(x.jsx)(f,{setLogInForm:g,setSignUpForm:y,logIn:!1,nightMode:s}):null]})}),N=function(e){k(e);var t=new Date,s=[],c=[];e.forEach((function(e){(t.getTime()/1e3-e.date.seconds)/60/60<=24?s.push(e):c.push(e)})),w(s),e=s.concat(c).slice()},w=function(e){e.sort((function(e,t){return t.upvotes-t.downvotes-(e.upvotes-e.downvotes)}))},k=function(e){e.sort((function(e,t){return t.date-e.date}))},y=(s(47),function(e){var t=e.posts,s=e.setPosts,n=e.comments,r=e.setComments,a=e.nightMode,i=Object(c.useState)("hot"),o=Object(l.a)(i,2),d=o[0],u=o[1],j=Object(c.useState)("best"),b=Object(l.a)(j,2),h=b[0],m=b[1],O=Object(c.useState)(!1),p=Object(l.a)(O,2),v=p[0],f=p[1],g=function(e){var c;c=t?t.slice():n.slice(),"hot"===e?(N(c),t?u("hot"):m("hot")):"best"===e?(c.sort((function(e,t){var s=0===e.downvotes?e.upvotes:e.upvotes/e.downvotes;return(0===t.downvotes?t.upvotes:t.upvotes/t.downvotes)-s})),t?u("best"):m("best")):"top"===e?(w(c),t?u("top"):m("top")):"new"===e?(k(c),t?u("new"):m("new")):"old"===e?(!function(e){e.sort((function(e,t){return e.date-t.date}))}(c),t?u("old"):m("old")):"controversial"===e&&n&&(!function(e){e.forEach((function(e){var t=e.replies.length;e.replies>0&&function e(s){s.forEach((function(s){t++,s.replies.length>0&&e(s.replies)}))}(e.replies),e.totalReplies=t})),e.sort((function(e,t){return t.totalReplies-e.totalReplies})),e.forEach((function(e){delete e.totalReplies}))}(c),t?u("controversial"):m("controversial")),t?s(c):r(c)};return Object(x.jsx)("div",{className:a?"sortbar sortbar-dark":"sortbar",children:t?Object(x.jsxs)("div",{className:"sortbar-posts",children:[Object(x.jsx)("div",{className:"sortbar-btn ".concat("hot"===d?"sortbar-btn-active":""),onClick:function(){"hot"!==d&&g("hot")},children:"Hot"}),Object(x.jsx)("div",{className:"sortbar-btn ".concat("best"===d?"sortbar-btn-active":""),onClick:function(){"best"!==d&&g("best")},children:"Best"}),Object(x.jsx)("div",{className:"sortbar-btn ".concat("top"===d?"sortbar-btn-active":""),onClick:function(){"top"!==d&&g("top")},children:"Top"}),Object(x.jsx)("div",{className:"sortbar-btn ".concat("new"===d?"sortbar-btn-active":""),onClick:function(){"new"!==d&&g("new")},children:"New"}),Object(x.jsx)("div",{className:"sortbar-btn ".concat("old"===d?"sortbar-btn-active":""),onClick:function(){"old"!==d&&g("old")},children:"Old"})]}):Object(x.jsx)("div",{className:"sortbar-comments",children:Object(x.jsxs)("div",{className:"sortbar-comments-btn",onClick:function(){f(!v)},children:["best"===h?Object(x.jsx)("div",{children:"Sort By: Best"}):null,"hot"===h?Object(x.jsx)("div",{children:"Sort By: Hot"}):null,"top"===h?Object(x.jsx)("div",{children:"Sort By: Top"}):null,"new"===h?Object(x.jsx)("div",{children:"Sort By: New"}):null,"old"===h?Object(x.jsx)("div",{children:"Sort By: Old"}):null,"controversial"===h?Object(x.jsx)("div",{children:"Sort By: Controversial"}):null,v?Object(x.jsxs)("div",{className:"sortbar-comments-dropdown",children:[Object(x.jsx)("div",{className:"sortbar-comments-dropdown-item",onClick:function(){"best"!==h&&g("best")},children:"Best"}),Object(x.jsx)("div",{className:"sortbar-comments-dropdown-item",onClick:function(){"hot"!==h&&g("hot")},children:"Hot"}),Object(x.jsx)("div",{className:"sortbar-comments-dropdown-item",onClick:function(){"top"!==h&&g("top")},children:"Top"}),Object(x.jsx)("div",{className:"sortbar-comments-dropdown-item",onClick:function(){"new"!==h&&g("new")},children:"New"}),Object(x.jsx)("div",{className:"sortbar-comments-dropdown-item",onClick:function(){"old"!==h&&g("old")},children:"Old"}),Object(x.jsx)("div",{className:"sortbar-comments-dropdown-item",onClick:function(){"controversial"!==h&&g("controversial")},children:"Controversial"})]}):null]})})})}),C=function(e){return Math.abs(e)>=1e3&&Math.abs(e)<1e6&&(e=(e/1e3).toFixed(1)+"k"),Math.abs(e)>=1e6&&Math.abs(e)<1e9&&(e=(e/1e6).toFixed(1)+"m"),Math.abs(e)>=1e9&&(e=(e/1e9).toFixed(1)+"b"),e},S=function(e){var t,s=31536e3,c=2592e3,n=86400,r=(Date.now()-1e3*e)/1e3,a=Math.floor(r/s),i=Math.floor((r-a*s)/c),o=Math.floor((r-a*s-i*c)/n),d=Math.floor((r-a*s-i*c-o*n)/3600),l=Math.floor((r-a*s-i*c-o*n-3600*d)/60);if(1===a)t=a+" year";else if(a>1)t=a+" years";else if(1===i)t=i+" month";else if(i>1)t=i+" months";else if(1===o)t=o+" day";else if(o>1)t=o+" days";else if(1===d)t=d+" hour";else if(d>1)t=d+" hours";else if(1===l)t=l+" minute";else if(l>1)t=l+" minutes";else if(0===l)return"Just now";return t+" ago"},M=(s(48),function(e){var t=e.user,s=e.setUser,n=e.propSlug,r=e.post,a=e.setPost,i=e.posts,u=e.setPosts,j=e.activeFlairs,m=e.pickFlair,p=e.postPage,f=e.nightMode,g=Object(h.i)().slug;n&&(g=n);var N=Object(c.useState)(!1),w=Object(l.a)(N,2),k=w[0],y=w[1],M=Object(c.useState)(!1),F=Object(l.a)(M,2),P=F[0],E=F[1],I=Object(c.useState)(!1),U=Object(l.a)(I,2),L=U[0],B=U[1];Object(c.useEffect)((function(){t&&t.upvoted.includes(r.id)?y(!0):y(!1),t&&t.downvoted.includes(r.id)?E(!0):E(!1)}),[t,r.id]);var A=function(){var e=Object(d.a)(o.a.mark((function e(c){var n,d,l,j,b,h,m,x,f,g;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(O.h)(),d=Object(O.e)(n,"posts",r.id),l=Object(O.e)(n,"users",t.id),j=t.upvoted.slice(),b=t.downvoted.slice(),"up"!==c||k?"down"!==c||P||b.push(r.id):j.push(r.id),k?(h=t.upvoted.indexOf(r.id),j.splice(h,1)):P&&(m=t.downvoted.indexOf(r.id),b.splice(m,1)),s(Object(v.a)(Object(v.a)({},t),{},{upvoted:j,downvoted:b})),x=r.upvotes,f=r.downvotes,"up"===c?(k?x--:x++,P&&f--):(P?f--:f++,k&&x--),e.next=13,Object(O.j)(d,{upvotes:x,downvotes:f});case 13:return e.next=15,Object(O.j)(l,{upvoted:j,downvoted:b});case 15:(g=i.slice()).forEach((function(e){e.id===r.id&&(e.upvotes=x,e.downvotes=f)})),u(g),p&&a(Object(v.a)(Object(v.a)({},r),{},{upvotes:x,downvotes:f}));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsx)("div",{className:f?"post-box-container-dark":"post-box-container",children:L?Object(x.jsx)(h.a,{to:"/"}):Object(x.jsxs)("div",{className:"post-box",children:[Object(x.jsxs)("div",{className:"post-box-votes-container",children:[Object(x.jsx)("div",{className:"post-box-upvote-btn ".concat(t&&k?"post-box-upvoted":""),onClick:t?function(){A("up")}:null}),Object(x.jsx)("div",{className:"post-box-votes",children:C(r.upvotes-r.downvotes)}),Object(x.jsx)("div",{className:"post-box-downvote-btn ".concat(t&&P?"post-box-downvoted":""),onClick:t?function(){A("down")}:null})]}),Object(x.jsxs)("div",{className:"post-box-details",children:[Object(x.jsxs)("div",{className:"post-box-meta",children:[n?Object(x.jsxs)(b.b,{to:"/r/".concat(n),className:"post-box-subreddit",children:["r/",n]}):null,Object(x.jsxs)("span",{className:"post-box-author",children:["Posted by u/",r.author]}),Object(x.jsx)("span",{className:"post-box-date",children:S(r.date.seconds)})]}),Object(x.jsxs)("div",{className:"post-box-title",children:[j?r.flairs.map((function(e,t){return Object(x.jsx)("div",{className:"post-box-flair ".concat(j.includes(e)?"post-box-flair-active":null),onClick:function(){m(e)},children:p?Object(x.jsx)(b.b,{to:"/r/".concat(g),children:e}):e},t)})):null,Object(x.jsx)("h3",{children:r.title})]}),Object(x.jsx)("div",{className:"post-box-text",children:r.text}),Object(x.jsxs)("div",{className:"post-box-btns-container",children:[Object(x.jsxs)(b.b,{to:"/r/".concat(g,"/comments/").concat(r.id,"/").concat(r.title),className:"post-box-btn",children:[r.comments," comments"]}),t&&r.author===t.username?Object(x.jsx)("div",{className:"post-box-btn",onClick:function(){var e=Object(O.h)(),t=function(){var t=Object(d.a)(o.a.mark((function t(s){var c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=Object(O.e)(e,"posts",s),t.next=3,Object(O.j)(c,{author:Object(O.d)(),comments:Object(O.d)(),date:Object(O.d)(),downvotes:Object(O.d)(),subreddit:Object(O.d)(),text:Object(O.d)(),title:Object(O.d)(),upvotes:Object(O.d)()});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s=function(){var t=Object(d.a)(o.a.mark((function t(s){var c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=Object(O.e)(e,"posts",s),t.next=3,Object(O.c)(c);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();t(r.id).then((function(){s(r.id)})).then((function(){B(!0)})).catch((function(e){console.log(e)}))},children:"Delete"}):null]})]})]})})}),F=(s(49),function(e){var t=e.user,s=e.setUser,n=e.nightMode,r=Object(c.useState)([]),a=Object(l.a)(r,2),i=a[0],u=a[1];return Object(c.useEffect)((function(){var e=function(){var e=Object(d.a)(o.a.mark((function e(){var t,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(O.h)(),e.next=3,Object(O.g)(Object(O.b)(t,"posts"));case 3:s=e.sent,c=[],s.forEach((function(e){c.push(Object(v.a)(Object(v.a)({},e.data()),{},{id:e.id}))})),N(c),u(c.slice());case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(x.jsxs)("div",{className:n?"home home-dark":"home",children:[Object(x.jsx)("div",{className:"home-header",children:"Popular posts"}),Object(x.jsxs)("div",{className:"home-body",children:[Object(x.jsxs)("div",{className:"home-posts-container",children:[Object(x.jsx)(y,{posts:i,setPosts:u,nightMode:n}),0!==i.length?i.map((function(e){return Object(x.jsx)(M,{user:t,propSlug:e.subreddit,setUser:s,post:e,posts:i,setPosts:u,nightMode:n},e.id)})):null]}),Object(x.jsxs)("div",{className:"home-sidebar",children:[Object(x.jsxs)("div",{className:"home-sidebar-section",children:[Object(x.jsx)("div",{className:"home-sidebar-section-header",children:"About"}),Object(x.jsxs)("div",{className:"home-sidebar-section-content",children:["Fakeddit is a project made to simulate a popular website. Created through\xa0",Object(x.jsx)("a",{href:"https://www.theodinproject.com",children:"TheOdinProject"})," online course.",Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),"View source code ",Object(x.jsx)("a",{href:"https://github.com/RedRaptor10/fakeddit",children:"here"}),".",Object(x.jsx)("div",{className:"home-sidebar-section-content-created",children:"Created Dec 17, 2021"})]})]}),Object(x.jsxs)("div",{className:"home-sidebar-section",children:[Object(x.jsx)("div",{className:"home-sidebar-section-header",children:"Features"}),Object(x.jsx)("div",{className:"home-sidebar-section-content",children:Object(x.jsxs)("ul",{children:[Object(x.jsx)("li",{children:"Create / delete account"}),Object(x.jsx)("li",{children:"Log in / log out account"}),Object(x.jsx)("li",{children:"Browse different subfakeddits"}),Object(x.jsx)("li",{children:"Create / delete posts & comments"}),Object(x.jsx)("li",{children:"Upvote / downvote posts & comments"}),Object(x.jsx)("li",{children:"Collapse comments"}),Object(x.jsx)("li",{children:"Sort posts / comments"}),Object(x.jsx)("li",{children:"Filter posts by flairs"}),Object(x.jsx)("li",{children:"Search posts"})]})})]}),Object(x.jsxs)("div",{className:"home-sidebar-section",children:[Object(x.jsx)("div",{className:"home-sidebar-section-header",children:"Technologies"}),Object(x.jsx)("div",{className:"home-sidebar-section-content",children:Object(x.jsxs)("ul",{children:[Object(x.jsx)("li",{children:"React"}),Object(x.jsx)("li",{children:"Firebase"}),Object(x.jsx)("li",{children:"JavaScript"}),Object(x.jsx)("li",{children:"HTML"}),Object(x.jsx)("li",{children:"CSS"})]})})]})]})]})]})}),P=(s(50),function(e){var t=e.nightMode,s=Object(h.i)().searchQuery,n=Object(c.useState)([]),r=Object(l.a)(n,2),a=r[0],i=r[1];return Object(c.useEffect)((function(){var e=function(){var e=Object(d.a)(o.a.mark((function e(){var t,c,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(O.h)(),c=Object(O.i)(Object(O.b)(t,"posts"),Object(O.k)("title",">=",s),Object(O.k)("title","<=",s+"\uf8ff")),e.next=4,Object(O.g)(c);case 4:n=e.sent,r=[],n.forEach((function(e){r.push(Object(v.a)(Object(v.a)({},e.data()),{},{id:e.id}))})),i(r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[s]),Object(x.jsx)("div",{className:t?"search search-dark":"search",children:Object(x.jsx)("div",{className:"search-results",children:a.map((function(e,t){return Object(x.jsxs)("div",{className:"search-result",children:[Object(x.jsxs)("div",{className:"search-result-meta",children:[Object(x.jsx)("span",{className:"search-result-subreddit",children:Object(x.jsxs)(b.b,{to:"/r/".concat(e.subreddit),children:["r/",e.subreddit]})}),Object(x.jsxs)("span",{className:"search-result-author",children:["Posts by u/",e.author]}),Object(x.jsx)("span",{className:"search-result-date",children:S(e.date.seconds)})]}),Object(x.jsx)("div",{className:"search-result-title",children:Object(x.jsx)(b.b,{to:"/r/".concat(e.subreddit,"/comments/").concat(e.id,"/").concat(e.title),children:e.title})}),Object(x.jsxs)("div",{className:"search-result-details",children:[Object(x.jsxs)("span",{className:"search-result-upvotes",children:[C(e.upvotes)," upvotes"]}),Object(x.jsxs)("span",{className:"search-result-comments",children:[C(e.comments)," comments"]})]})]},t)}))})})}),E=(s(51),function(e){var t=e.nightMode;return Object(x.jsxs)("div",{className:t?"footer footer-dark":"footer",children:[Object(x.jsxs)("div",{className:"footer-content",children:[Object(x.jsxs)("ul",{children:[Object(x.jsx)("li",{children:"About"}),Object(x.jsx)("li",{children:"Careers"}),Object(x.jsx)("li",{children:"Press"})]}),Object(x.jsxs)("ul",{children:[Object(x.jsx)("li",{children:"Advertise"}),Object(x.jsx)("li",{children:"Blog"}),Object(x.jsx)("li",{children:"Help"})]}),Object(x.jsxs)("ul",{children:[Object(x.jsx)("li",{children:"Fakeddit Coins"}),Object(x.jsx)("li",{children:"Fakeddit Premium"}),Object(x.jsx)("li",{children:"Fakeddit Gifts"})]}),Object(x.jsxs)("ul",{children:[Object(x.jsx)("li",{children:"Facebook"}),Object(x.jsx)("li",{children:"Twitter"}),Object(x.jsx)("li",{children:"Instagram"})]})]}),Object(x.jsx)("div",{className:"footer-bottom",children:Object(x.jsxs)("ul",{children:[Object(x.jsx)("li",{children:"Content Policy"}),Object(x.jsx)("li",{children:"Privacy Policy"}),Object(x.jsx)("li",{children:"User Agreement"}),Object(x.jsx)("li",{children:"Mod Policy"}),Object(x.jsxs)("li",{children:["Fakeddit created through ",Object(x.jsx)("a",{href:"https://www.theodinproject.com/",children:"TheOdinProject"})," online course."]})]})})]})}),I=function(e){var t=new Date(1e3*e),s=t.getFullYear(),c=t.getMonth(),n=t.getDate();return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][c]+" "+n+", "+s},U=(s(52),function(e){var t=e.user,s=e.slug,c=e.subreddit,n=e.colors,r=e.activeFlairs,a=e.pickFlair,i=e.postPage,o=e.nightMode,d=c.description,l=c.members,u=c.color,j=c.flairs,h=c.created;return Object(x.jsxs)("div",{className:o?"subreddit-sidebar subreddit-sidebar-dark":"subreddit-sidebar",children:[Object(x.jsxs)("div",{className:"subreddit-sidebar-section",children:[Object(x.jsx)("div",{className:"subreddit-sidebar-section-header",style:u?{background:n[u],color:"rgb(255, 255, 255)"}:null,children:"About Community"}),Object(x.jsxs)("div",{className:"subreddit-sidebar-section-content",children:[Object(x.jsx)("div",{className:"subreddit-sidebar-section-content-description",children:d}),Object(x.jsxs)("div",{className:"subreddit-sidebar-section-content-members",children:[Object(x.jsxs)("div",{className:"subreddit-sidebar-section-content-members-section",children:[Object(x.jsx)("span",{className:"subreddit-sidebar-section-content-members-number",children:C(l)}),Object(x.jsx)("br",{}),"Members"]}),Object(x.jsxs)("div",{className:"subreddit-sidebar-section-content-members-section",children:[Object(x.jsx)("span",{className:"subreddit-sidebar-section-content-members-number",children:"0"}),Object(x.jsx)("br",{}),"Online"]})]}),Object(x.jsxs)("div",{className:"subreddit-sidebar-section-content-created",children:["Created ",I(h.seconds)]}),t?Object(x.jsx)("div",{className:"subreddit-sidebar-section-create",children:Object(x.jsx)(b.b,{to:"submit",state:{flairs:j},children:Object(x.jsx)("div",{className:"subreddit-sidebar-section-create-btn",style:u?{background:n[u],color:"rgb(255, 255, 255)"}:null,children:"Create Post"})})}):null]})]}),Object(x.jsxs)("div",{className:"subreddit-sidebar-section",children:[Object(x.jsx)("div",{className:"subreddit-sidebar-section-header",style:u?{background:n[u],color:"rgb(255, 255, 255)"}:null,children:"Filter by Flair"}),Object(x.jsx)("div",{className:"subreddit-sidebar-section-flairs",children:j.map((function(e,t){return Object(x.jsx)("div",{className:"subreddit-sidebar-section-flair\n                                ".concat(r.includes(e)?"subreddit-sidebar-section-flair-active":null),onClick:function(){a(e)},children:i?Object(x.jsx)(b.b,{to:"/r/".concat(s),children:e}):e},t)}))})]})]})}),L=n.a.createContext({}),B=(s(53),function(e){var t=e.user,s=e.setUser,n=e.nightMode,r=Object(h.i)().slug,a=Object(c.useState)({slug:"",title:"",banner:"",icon:"",members:0,color:"",flairs:[],description:"",created:0}),i=Object(l.a)(a,2),u=i[0],j=i[1],b=Object(c.useState)([]),m=Object(l.a)(b,2),p=m[0],f=m[1],g=Object(c.useState)([]),N=Object(l.a)(g,2),w=N[0],k=N[1],C=u.title,S=u.banner,F=u.icon,P=u.color,E={LightBlue:"rgb(0, 121, 211)",DarkBlue:"rgb(0, 64, 121)"};Object(c.useEffect)((function(){var e=function(){var e=Object(d.a)(o.a.mark((function e(){var t,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(O.h)(),s=Object(O.e)(t,"subreddits",r),e.next=4,Object(O.f)(s);case 4:if(!(c=e.sent).exists()){e.next=9;break}return e.abrupt("return",c.data());case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(d.a)(o.a.mark((function e(){var t,s,c,n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(O.h)(),s=Object(O.b)(t,"posts"),c=Object(O.i)(s,Object(O.k)("subreddit","==",r)),e.next=5,Object(O.g)(c);case 5:n=e.sent,a=[],n.forEach((function(e){a.push(Object(v.a)(Object(v.a)({},e.data()),{},{id:e.id}))})),a.sort((function(e,t){return t.date-e.date})),f(a.slice());case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e().then((function(e){j(e)})).catch((function(e){console.log(e)})),t()}),[r]);var I=function(e){var t=w.slice();if(w.includes(e)){var s=w.indexOf(e);t.splice(s,1)}else t.push(e);k(t)};return Object(x.jsxs)("div",{className:n?"subreddit-dark":"subreddit",children:[Object(x.jsx)("div",{className:"subreddit-banner",style:{backgroundImage:"url("+S+")",backgroundColor:E[P]}}),Object(x.jsx)("div",{className:"subreddit-header",children:Object(x.jsxs)("div",{className:"subreddit-header-content",children:[Object(x.jsx)("img",{className:"subreddit-icon",url:F,alt:""}),Object(x.jsxs)("div",{className:"subreddit-title",children:[Object(x.jsx)("h1",{children:C}),Object(x.jsxs)("div",{className:"subreddit-name",children:["r/",r]})]})]})}),Object(x.jsxs)("div",{className:"subreddit-body",children:[Object(x.jsxs)("div",{className:"subreddit-posts-container",children:[Object(x.jsx)(y,{posts:p,setPosts:f,nightMode:n}),0!==p.length?p.map((function(e){return 0===w.length||function(e){var t=!1;return e.forEach((function(e){w.includes(e)&&(t=!0)})),t}(e.flairs)?Object(x.jsx)(M,{user:t,setUser:s,post:e,posts:p,setPosts:f,activeFlairs:w,pickFlair:I,nightMode:n},e.id):null})):null]}),Object(x.jsx)(U,{user:t,slug:r,subreddit:u,colors:E,activeFlairs:w,pickFlair:I,nightMode:n})]}),Object(x.jsxs)(L.Provider,{value:{subreddit:u,colors:E,posts:p,setPosts:f,activeFlairs:w,pickFlair:I},children:[Object(x.jsx)(h.b,{})," "]})]})}),A=(s(54),function(e){var t=e.user,s=e.nightMode,n=Object(h.i)().slug,r=Object(c.useState)(""),a=Object(l.a)(r,2),i=a[0],u=a[1],j=Object(c.useState)(""),m=Object(l.a)(j,2),p=m[0],v=m[1],f=Object(h.g)().state.flairs,g=Object(c.useState)([]),N=Object(l.a)(g,2),w=N[0],k=N[1],y=Object(c.useState)(""),C=Object(l.a)(y,2),S=C[0],M=C[1],F=Object(h.h)(),P=function(e){var t=e.target.innerHTML,s=w.slice();if(w.includes(t)){var c=w.indexOf(t);s.splice(c,1)}else s.push(t);k(s)},E=function(){var e=Object(d.a)(o.a.mark((function e(){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===i||""===p){e.next=6;break}return s=Object(O.h)(),e.next=4,Object(O.a)(Object(O.b)(s,"posts"),{author:t.username,comments:0,date:new Date,downvotes:0,flairs:w,subreddit:n,text:p,title:i,upvotes:1}).then((function(){F("/r/"+n)}));case 4:e.next=7;break;case 6:M("All fields required.");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t?Object(x.jsxs)("div",{className:s?"submit submit-dark":"submit",children:[Object(x.jsx)("h3",{children:"Create a post"}),Object(x.jsxs)("div",{className:"submit-subreddit",children:["Subfakeddit: ",Object(x.jsxs)(b.b,{to:"/r/".concat(n),children:["r/",n]})]}),Object(x.jsxs)("div",{className:"submit-title",children:[Object(x.jsx)("div",{className:"submit-label",children:"Title"}),Object(x.jsx)("input",{type:"text",placeholder:"My first post",onChange:function(e){u(e.target.value)}})]}),Object(x.jsxs)("div",{className:"submit-text",children:[Object(x.jsx)("div",{className:"submit-label",children:"Text"}),Object(x.jsx)("textarea",{onChange:function(e){v(e.target.value)}})]}),""!==S?Object(x.jsx)("div",{className:"error-msg",children:S}):null,Object(x.jsxs)("div",{className:"submit-flairs-container",children:[Object(x.jsx)("div",{className:"submit-label",children:"Flairs"}),Object(x.jsx)("div",{className:"submit-flairs",children:f.map((function(e,t){return Object(x.jsx)("div",{className:"submit-flair ".concat(w.includes(e)?"submit-flair-active":null),onClick:P,children:e},t)}))})]}),Object(x.jsx)("button",{className:"submit-btn",onClick:E,children:"Post"})]}):null}),T=(s(55),function(e){var t=e.user,s=e.post,n=e.setPost,r=e.parent,a=e.nightMode,i=Object(h.i)().slug,u=Object(c.useState)(""),j=Object(l.a)(u,2),b=j[0],m=j[1],p=Object(c.useState)(""),g=Object(l.a)(p,2),N=g[0],w=g[1],k=Object(c.useState)(!1),y=Object(l.a)(k,2),C=y[0],S=y[1],M=Object(c.useState)(!1),F=Object(l.a)(M,2),P=F[0],E=F[1],I=function(){var e=Object(d.a)(o.a.mark((function e(){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===b){e.next=6;break}return c=Object(O.h)(),e.next=4,Object(O.a)(Object(O.b)(c,"comments"),{author:t.username,date:new Date,downvotes:0,parentId:r,postId:s.id,replies:[],subreddit:i,text:b,upvotes:1}).then((function(){document.querySelectorAll(".reply-input").forEach((function(e){e.value=""})),m(""),w("")})).then((function(){var e=Object(O.e)(c,"posts",s.id);Object(d.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(O.j)(e,{comments:s.comments+1}).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})))(),n(Object(v.a)(Object(v.a)({},s),{},{comments:s.comments+1}))}));case 4:e.next=7;break;case 6:w("All fields required.");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:a?"reply reply-dark":"reply",children:[t?Object(x.jsxs)("div",{className:"reply-form ".concat(""===r?"reply-form-post":""),children:[Object(x.jsx)("textarea",{className:"reply-input",placeholder:"Comment on this post",onChange:function(e){m(e.target.value)}}),""!==N?Object(x.jsx)("div",{className:"error-msg",children:N}):null,Object(x.jsx)("button",{className:"reply-submit-btn",onClick:I,children:"Reply"})]}):Object(x.jsxs)("div",{children:[Object(x.jsx)("span",{children:"Log in or Sign up to leave a comment"}),Object(x.jsx)("button",{className:"login-btn",onClick:function(){S(!0)},children:"Log In"}),Object(x.jsx)("button",{className:"signup-btn",onClick:function(){E(!0)},children:"Sign Up"})]}),C?Object(x.jsx)(f,{setLogInForm:S,setSignUpForm:E,logIn:!0,nightMode:a}):null,P?Object(x.jsx)(f,{setLogInForm:S,setSignUpForm:E,logIn:!1,nightMode:a}):null]})}),D=function e(t){var s=t.user,n=t.setUser,r=t.comment,a=t.comments,i=t.setComments,u=t.post,j=t.setPost,b=t.nightMode,h=Object(c.useState)(!1),m=Object(l.a)(h,2),p=m[0],f=m[1],g=Object(c.useState)(!1),N=Object(l.a)(g,2),w=N[0],k=N[1],y=Object(c.useState)(!1),M=Object(l.a)(y,2),F=M[0],P=M[1],E=Object(c.useState)(!1),I=Object(l.a)(E,2),U=I[0],L=I[1];Object(c.useEffect)((function(){s&&s.upvoted.includes(r.id)?P(!0):P(!1),s&&s.downvoted.includes(r.id)?L(!0):L(!1)}),[s,r.id]);var B=function(){var e=Object(d.a)(o.a.mark((function e(t){var c,d,l,u,j,b,h,m,p,x;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(O.h)(),d=Object(O.e)(c,"comments",r.id),l=Object(O.e)(c,"users",s.id),u=s.upvoted.slice(),j=s.downvoted.slice(),"up"!==t||F?"down"!==t||U||j.push(r.id):u.push(r.id),F?(b=s.upvoted.indexOf(r.id),u.splice(b,1)):U&&(h=s.downvoted.indexOf(r.id),j.splice(h,1)),n(Object(v.a)(Object(v.a)({},s),{},{upvoted:u,downvoted:j})),m=r.upvotes,p=r.downvotes,"up"===t?(F?m--:m++,U&&p--):(U?p--:p++,F&&m--),e.next=13,Object(O.j)(d,{upvotes:m,downvotes:p});case 13:return e.next=15,Object(O.j)(l,{upvoted:u,downvoted:j});case 15:(x=a.slice()).forEach((function(e){e.id===r.id&&(e.upvotes=m,e.downvotes=p)})),i(x);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:b?"comment-container : comment-container-dark":"comment-container",id:r.id,children:[Object(x.jsxs)("div",{className:"comment-sidebar ".concat(p?"comment-collapsed":""),children:[p?Object(x.jsx)("div",{className:"comment-expand",onClick:function(){f(!1)}}):null,Object(x.jsx)("div",{className:"comment-avatar"}),p?null:Object(x.jsx)("div",{className:"comment-threadline",onClick:function(){f(!0)}})]}),Object(x.jsxs)("div",{className:"comment",children:[Object(x.jsxs)("div",{className:"comment-details",children:[Object(x.jsxs)("div",{className:"comment-parent",children:[Object(x.jsxs)("div",{className:"comment-meta",children:[Object(x.jsx)("span",{className:"comment-author\n                                ".concat(r.author===u.author?"comment-author-poster":"","\n                                ").concat(s&&r.author===s.username?"comment-author-user":""),children:r.author}),Object(x.jsx)("span",{className:"comment-date",children:S(r.date.seconds)})]}),p?null:Object(x.jsx)("div",{className:"comment-text",children:r.text})]}),p?null:Object(x.jsxs)("div",{className:"comment-btns-container",children:[Object(x.jsxs)("div",{className:"comment-votes-container",children:[Object(x.jsx)("div",{className:"comment-upvote-btn ".concat(s&&F?"comment-upvoted":""),onClick:s?function(){B("up")}:null}),Object(x.jsx)("div",{className:"comment-votes",children:C(r.upvotes-r.downvotes)}),Object(x.jsx)("div",{className:"comment-downvote-btn ".concat(s&&U?"comment-downvoted":""),onClick:s?function(){B("down")}:null})]}),s?Object(x.jsx)("div",{className:"comment-btn",onClick:function(){k(!w)},children:"Reply"}):null,s&&r.author===s.username?Object(x.jsx)("div",{className:"comment-btn",onClick:function(){var e=Object(O.h)(),t=function(){var t=Object(d.a)(o.a.mark((function t(s){var c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=Object(O.e)(e,"comments",s),t.next=3,Object(O.j)(c,{author:Object(O.d)(),date:Object(O.d)(),downvotes:Object(O.d)(),parentId:Object(O.d)(),postId:Object(O.d)(),replies:Object(O.d)(),subreddit:Object(O.d)(),text:Object(O.d)(),upvotes:Object(O.d)()});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s=function(){var t=Object(d.a)(o.a.mark((function t(s){var c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=Object(O.e)(e,"comments",s),t.next=3,Object(O.c)(c);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();t(r.id).then((function(){s(r.id)})).then((function(){var t=Object(O.e)(e,"posts",u.id);Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.j)(t,{comments:u.comments-1}).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})))(),j(Object(v.a)(Object(v.a)({},u),{},{comments:u.comments-1}))})).catch((function(e){console.log(e)}))},children:"Delete"}):null]})]}),!p&&w?Object(x.jsx)(T,{user:s,post:u,setPost:j,parent:r.id,nightMode:b}):null,!p&&r.replies.length>0?Object(x.jsx)("div",{className:"replies",children:r.replies.map((function(t){return Object(x.jsx)(e,{user:s,comment:t,post:u,setPost:j,nightMode:b},t.id)}))}):null]})]})},H=(s(56),function(e){var t=e.user,s=e.setUser,n=e.post,r=e.setPost,a=e.nightMode,i=Object(c.useState)([]),u=Object(l.a)(i,2),j=u[0],b=u[1];return Object(c.useEffect)((function(){var e=[],t=function(){var t=Object(d.a)(o.a.mark((function t(){var s,c,r,a,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=Object(O.h)(),c=Object(O.b)(s,"comments"),r=Object(O.i)(c,Object(O.k)("postId","==",n.id)),t.next=5,Object(O.g)(r);case 5:a=t.sent,i=[],a.forEach((function(e){i.push(Object(v.a)(Object(v.a)({},e.data()),{},{id:e.id}))})),i.sort((function(e,t){return t.upvotes-t.downvotes-(e.upvotes-e.downvotes)})),e=i.slice();case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t().then((function(){var t=[];e.forEach((function(e){""===e.parentId&&t.push(e)}));!function t(s){s.forEach((function(s){e.forEach((function(e){e.parentId===s.id&&s.replies.push(e)})),s.replies.length>0&&t(s.replies)}))}(t),b(t)})).catch((function(e){console.log(e)}))}),[n]),Object(x.jsxs)("div",{className:"comments",children:[Object(x.jsx)(y,{comments:j,setComments:b,nightMode:a}),j.map((function(e){return Object(x.jsx)(D,{user:t,setUser:s,comment:e,comments:j,setComments:b,post:n,setPost:r,nightMode:a},e.id)}))]})}),R=(s(57),function(e){var t=e.user,s=e.setUser,r=e.nightMode,a=Object(h.i)(),i=a.slug,u=a.postId,j=Object(c.useState)({id:"",author:"",comments:0,date:"",downvotes:0,flairs:[],postSubreddit:i,text:"",title:"",upvotes:0}),m=Object(l.a)(j,2),p=m[0],f=m[1],g=p.downvotes,N=p.title,w=p.upvotes,k=n.a.useContext(L),y=k.subreddit,S=k.colors,F=k.posts,P=k.setPosts,E=k.activeFlairs,I=k.pickFlair;return Object(c.useEffect)((function(){var e=function(){var e=Object(d.a)(o.a.mark((function e(){var t,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(O.h)(),s=Object(O.e)(t,"posts",u),e.next=4,Object(O.f)(s);case 4:if(!(c=e.sent).exists()){e.next=9;break}return e.abrupt("return",Object(v.a)(Object(v.a)({},c.data()),{},{id:c.id}));case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e().then((function(e){f(e)})).catch((function(e){console.log(e)})),document.body.classList.add("no-scroll"),function(){document.body.classList.remove("no-scroll")}}),[i,u]),Object(x.jsxs)("div",{className:r?"post post-dark":"post",children:[Object(x.jsx)(b.b,{to:"/r/".concat(i),children:Object(x.jsx)("div",{className:"canvas post-canvas"})}),Object(x.jsxs)("div",{className:"post-main",children:[Object(x.jsx)("div",{className:"post-header",children:Object(x.jsxs)("div",{className:"post-header-inner",children:[Object(x.jsxs)("div",{className:"post-votes-container",children:[Object(x.jsx)("div",{className:"post-upvote-btn"}),C(w),Object(x.jsx)("div",{className:"post-downvote-btn"}),C(g)]}),Object(x.jsx)("div",{className:"post-title",children:N}),Object(x.jsx)(b.b,{to:"/r/".concat(i),className:"post-close-btn-container",children:Object(x.jsx)("div",{className:"post-close-btn",children:"Close"})})]})}),Object(x.jsxs)("div",{className:"post-body",children:[Object(x.jsxs)("div",{className:"post-content-container",children:[Object(x.jsx)(M,{user:t,setUser:s,post:p,setPost:f,posts:F,setPosts:P,activeFlairs:E,pickFlair:I,postPage:!0,nightMode:r}),Object(x.jsx)(T,{user:t,post:p,setPost:f,parent:"",nightMode:r}),Object(x.jsx)(H,{user:t,setUser:s,post:p,setPost:f,nightMode:r})]}),Object(x.jsx)(U,{user:t,slug:i,subreddit:y,colors:S,activeFlairs:E,pickFlair:I,postPage:!0,nightMode:r})]})]})]})}),q=(s(35),function(){var e=function(){if(j&&j.apiKey)return j;throw new Error("No Firebase configuration object provided.")}();Object(u.a)(e);var t=Object(c.useState)(),s=Object(l.a)(t,2),n=s[0],r=s[1],a=Object(c.useState)(!1),i=Object(l.a)(a,2),p=i[0],v=i[1];return Object(c.useEffect)((function(){var e=Object(m.c)();e.onAuthStateChanged((function(t){if(t){var s=Object(O.h)(),c=function(){var t=Object(d.a)(o.a.mark((function t(){var c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=Object(O.i)(Object(O.b)(s,"users"),Object(O.k)("email","==",e.currentUser.email)),t.next=3,Object(O.g)(c);case 3:t.sent.forEach((function(e){r({id:e.id,email:e.data().email,username:e.data().username,password:e.data().password,upvoted:e.data().upvoted,downvoted:e.data().downvoted})}));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();c()}else r(null)}))}),[]),Object(x.jsxs)(b.a,{children:[Object(x.jsx)(g,{user:n,nightMode:p,setNightMode:v}),Object(x.jsxs)(h.e,{children:[Object(x.jsx)(h.c,{exact:!0,path:"/",element:Object(x.jsx)(F,{user:n,setUser:r,nightMode:p})}),Object(x.jsx)(h.c,{exact:!0,path:"/search/:searchQuery",element:Object(x.jsx)(P,{nightMode:p})}),Object(x.jsx)(h.c,{path:"/r/:slug",element:Object(x.jsx)(B,{user:n,setUser:r,nightMode:p}),children:Object(x.jsx)(h.c,{exact:!0,path:"comments/:postId/:postTitle",element:Object(x.jsx)(R,{user:n,setUser:r,nightMode:p})})}),Object(x.jsx)(h.c,{exact:!0,path:"/r/:slug/submit",element:Object(x.jsx)(A,{user:n,nightMode:p})})]}),Object(x.jsx)(E,{nightMode:p})]})});a.a.render(Object(x.jsx)(n.a.StrictMode,{children:Object(x.jsx)(q,{})}),document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.f0e5e5e0.chunk.js.map